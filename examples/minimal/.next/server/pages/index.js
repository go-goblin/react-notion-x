/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/index";
exports.ids = ["pages/index"];
exports.modules = {

/***/ "(pages-dir-node)/../../node_modules/.pnpm/next@15.3.3_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F&preferredRegion=&absolutePagePath=.%2Fpages%5Cindex.tsx&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/next@15.3.3_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F&preferredRegion=&absolutePagePath=.%2Fpages%5Cindex.tsx&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getServerSideProps: () => (/* binding */ getServerSideProps),\n/* harmony export */   getStaticPaths: () => (/* binding */ getStaticPaths),\n/* harmony export */   getStaticProps: () => (/* binding */ getStaticProps),\n/* harmony export */   reportWebVitals: () => (/* binding */ reportWebVitals),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   unstable_getServerProps: () => (/* binding */ unstable_getServerProps),\n/* harmony export */   unstable_getServerSideProps: () => (/* binding */ unstable_getServerSideProps),\n/* harmony export */   unstable_getStaticParams: () => (/* binding */ unstable_getStaticParams),\n/* harmony export */   unstable_getStaticPaths: () => (/* binding */ unstable_getStaticPaths),\n/* harmony export */   unstable_getStaticProps: () => (/* binding */ unstable_getStaticProps)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages/module.compiled */ \"(pages-dir-node)/../../node_modules/.pnpm/next@15.3.3_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/server/route-modules/pages/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(pages-dir-node)/../../node_modules/.pnpm/next@15.3.3_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(pages-dir-node)/../../node_modules/.pnpm/next@15.3.3_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! private-next-pages/_document */ \"(pages-dir-node)/./pages/_document.tsx\");\n/* harmony import */ var private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! private-next-pages/_app */ \"(pages-dir-node)/./pages/_app.tsx\");\n/* harmony import */ var _pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./pages\\index.tsx */ \"(pages-dir-node)/./pages/index.tsx\");\n\n\n\n// Import the app and document modules.\n\n\n// Import the userland code.\n\n// Re-export the component (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__, 'default'));\n// Re-export methods.\nconst getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__, 'getStaticProps');\nconst getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__, 'getStaticPaths');\nconst getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__, 'getServerSideProps');\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__, 'config');\nconst reportWebVitals = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__, 'reportWebVitals');\n// Re-export legacy methods.\nconst unstable_getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getStaticProps');\nconst unstable_getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getStaticPaths');\nconst unstable_getStaticParams = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getStaticParams');\nconst unstable_getServerProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getServerProps');\nconst unstable_getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__, 'unstable_getServerSideProps');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES,\n        page: \"/index\",\n        pathname: \"/\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    components: {\n        // default export might not exist when optimized for data only\n        App: private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n        Document: private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__[\"default\"]\n    },\n    userland: _pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__\n});\n\n//# sourceMappingURL=pages.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNS4zLjNfcmVhY3QtZG9tQDE5LjEuMF9yZWFjdEAxOS4xLjBfX3JlYWN0QDE5LjEuMC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTJnBhZ2U9JTJGJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNpbmRleC50c3gmYWJzb2x1dGVBcHBQYXRoPXByaXZhdGUtbmV4dC1wYWdlcyUyRl9hcHAmYWJzb2x1dGVEb2N1bWVudFBhdGg9cHJpdmF0ZS1uZXh0LXBhZ2VzJTJGX2RvY3VtZW50Jm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdGO0FBQ2hDO0FBQ0U7QUFDMUQ7QUFDeUQ7QUFDVjtBQUMvQztBQUMrQztBQUMvQztBQUNBLGlFQUFlLHdFQUFLLENBQUMsNkNBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sdUJBQXVCLHdFQUFLLENBQUMsNkNBQVE7QUFDckMsdUJBQXVCLHdFQUFLLENBQUMsNkNBQVE7QUFDckMsMkJBQTJCLHdFQUFLLENBQUMsNkNBQVE7QUFDekMsZUFBZSx3RUFBSyxDQUFDLDZDQUFRO0FBQzdCLHdCQUF3Qix3RUFBSyxDQUFDLDZDQUFRO0FBQzdDO0FBQ08sZ0NBQWdDLHdFQUFLLENBQUMsNkNBQVE7QUFDOUMsZ0NBQWdDLHdFQUFLLENBQUMsNkNBQVE7QUFDOUMsaUNBQWlDLHdFQUFLLENBQUMsNkNBQVE7QUFDL0MsZ0NBQWdDLHdFQUFLLENBQUMsNkNBQVE7QUFDOUMsb0NBQW9DLHdFQUFLLENBQUMsNkNBQVE7QUFDekQ7QUFDTyx3QkFBd0Isa0dBQWdCO0FBQy9DO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxhQUFhLDhEQUFXO0FBQ3hCLGtCQUFrQixtRUFBZ0I7QUFDbEMsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgYXBwIGFuZCBkb2N1bWVudCBtb2R1bGVzLlxuaW1wb3J0ICogYXMgZG9jdW1lbnQgZnJvbSBcInByaXZhdGUtbmV4dC1wYWdlcy9fZG9jdW1lbnRcIjtcbmltcG9ydCAqIGFzIGFwcCBmcm9tIFwicHJpdmF0ZS1uZXh0LXBhZ2VzL19hcHBcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGluZGV4LnRzeFwiO1xuLy8gUmUtZXhwb3J0IHRoZSBjb21wb25lbnQgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgbWV0aG9kcy5cbmV4cG9ydCBjb25zdCBnZXRTdGF0aWNQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCAnZ2V0U3RhdGljUHJvcHMnKTtcbmV4cG9ydCBjb25zdCBnZXRTdGF0aWNQYXRocyA9IGhvaXN0KHVzZXJsYW5kLCAnZ2V0U3RhdGljUGF0aHMnKTtcbmV4cG9ydCBjb25zdCBnZXRTZXJ2ZXJTaWRlUHJvcHMgPSBob2lzdCh1c2VybGFuZCwgJ2dldFNlcnZlclNpZGVQcm9wcycpO1xuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG5leHBvcnQgY29uc3QgcmVwb3J0V2ViVml0YWxzID0gaG9pc3QodXNlcmxhbmQsICdyZXBvcnRXZWJWaXRhbHMnKTtcbi8vIFJlLWV4cG9ydCBsZWdhY3kgbWV0aG9kcy5cbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTdGF0aWNQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCAndW5zdGFibGVfZ2V0U3RhdGljUHJvcHMnKTtcbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTdGF0aWNQYXRocyA9IGhvaXN0KHVzZXJsYW5kLCAndW5zdGFibGVfZ2V0U3RhdGljUGF0aHMnKTtcbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTdGF0aWNQYXJhbXMgPSBob2lzdCh1c2VybGFuZCwgJ3Vuc3RhYmxlX2dldFN0YXRpY1BhcmFtcycpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFNlcnZlclByb3BzID0gaG9pc3QodXNlcmxhbmQsICd1bnN0YWJsZV9nZXRTZXJ2ZXJQcm9wcycpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFNlcnZlclNpZGVQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCAndW5zdGFibGVfZ2V0U2VydmVyU2lkZVByb3BzJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc1JvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFUyxcbiAgICAgICAgcGFnZTogXCIvaW5kZXhcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIGNvbXBvbmVudHM6IHtcbiAgICAgICAgLy8gZGVmYXVsdCBleHBvcnQgbWlnaHQgbm90IGV4aXN0IHdoZW4gb3B0aW1pemVkIGZvciBkYXRhIG9ubHlcbiAgICAgICAgQXBwOiBhcHAuZGVmYXVsdCxcbiAgICAgICAgRG9jdW1lbnQ6IGRvY3VtZW50LmRlZmF1bHRcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/../../node_modules/.pnpm/next@15.3.3_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F&preferredRegion=&absolutePagePath=.%2Fpages%5Cindex.tsx&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(pages-dir-node)/../../packages/notion-client/build/index.js":
/*!***************************************************!*\
  !*** ../../packages/notion-client/build/index.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NotionAPI: () => (/* binding */ NotionAPI)\n/* harmony export */ });\n/* harmony import */ var ky__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ky */ \"(pages-dir-node)/../../node_modules/.pnpm/ky@1.8.1/node_modules/ky/distribution/index.js\");\n/* harmony import */ var notion_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! notion-utils */ \"(pages-dir-node)/../../packages/notion-utils/build/index.js\");\n/* harmony import */ var p_map__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! p-map */ \"(pages-dir-node)/../../node_modules/.pnpm/p-map@7.0.3/node_modules/p-map/index.js\");\n// src/notion-api.ts\n\n\n\nvar NotionAPI = class {\n  _apiBaseUrl;\n  _authToken;\n  _activeUser;\n  _userTimeZone;\n  _kyOptions;\n  constructor({\n    apiBaseUrl = \"https://www.notion.so/api/v3\",\n    authToken,\n    activeUser,\n    userTimeZone = \"America/New_York\",\n    kyOptions\n  } = {}) {\n    this._apiBaseUrl = apiBaseUrl;\n    this._authToken = authToken;\n    this._activeUser = activeUser;\n    this._userTimeZone = userTimeZone;\n    this._kyOptions = kyOptions;\n  }\n  async getPage(pageId, {\n    concurrency = 3,\n    fetchMissingBlocks = true,\n    fetchCollections = true,\n    signFileUrls = true,\n    chunkLimit = 100,\n    chunkNumber = 0,\n    throwOnCollectionErrors = false,\n    collectionReducerLimit = 999,\n    kyOptions\n  } = {}) {\n    const page = await this.getPageRaw(pageId, {\n      chunkLimit,\n      chunkNumber,\n      kyOptions\n    });\n    const recordMap = page?.recordMap;\n    if (!recordMap?.block) {\n      throw new Error(`Notion page not found \"${(0,notion_utils__WEBPACK_IMPORTED_MODULE_0__.uuidToId)(pageId)}\"`);\n    }\n    recordMap.collection = recordMap.collection ?? {};\n    recordMap.collection_view = recordMap.collection_view ?? {};\n    recordMap.notion_user = recordMap.notion_user ?? {};\n    recordMap.collection_query = {};\n    recordMap.signed_urls = {};\n    if (fetchMissingBlocks) {\n      while (true) {\n        const pendingBlockIds = (0,notion_utils__WEBPACK_IMPORTED_MODULE_0__.getPageContentBlockIds)(recordMap).filter(\n          (id) => !recordMap.block[id]\n        );\n        if (!pendingBlockIds.length) {\n          break;\n        }\n        const newBlocks = await this.getBlocks(pendingBlockIds, kyOptions).then(\n          (res) => res.recordMap.block\n        );\n        recordMap.block = { ...recordMap.block, ...newBlocks };\n      }\n    }\n    const contentBlockIds = (0,notion_utils__WEBPACK_IMPORTED_MODULE_0__.getPageContentBlockIds)(recordMap);\n    if (fetchCollections) {\n      const allCollectionInstances = contentBlockIds.flatMap((blockId) => {\n        const block = recordMap.block[blockId]?.value;\n        const collectionId = block && (block.type === \"collection_view\" || block.type === \"collection_view_page\") && (0,notion_utils__WEBPACK_IMPORTED_MODULE_0__.getBlockCollectionId)(block, recordMap);\n        if (collectionId) {\n          return block.view_ids?.map((collectionViewId) => ({\n            collectionId,\n            collectionViewId\n          }));\n        } else {\n          return [];\n        }\n      });\n      await (0,p_map__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(\n        allCollectionInstances,\n        async (collectionInstance) => {\n          const { collectionId, collectionViewId } = collectionInstance;\n          const collectionView = recordMap.collection_view[collectionViewId]?.value;\n          try {\n            const collectionData = await this.getCollectionData(\n              collectionId,\n              collectionViewId,\n              collectionView,\n              {\n                limit: collectionReducerLimit,\n                kyOptions\n              }\n            );\n            recordMap.block = {\n              ...recordMap.block,\n              ...collectionData.recordMap.block\n            };\n            recordMap.collection = {\n              ...recordMap.collection,\n              ...collectionData.recordMap.collection\n            };\n            recordMap.collection_view = {\n              ...recordMap.collection_view,\n              ...collectionData.recordMap.collection_view\n            };\n            recordMap.notion_user = {\n              ...recordMap.notion_user,\n              ...collectionData.recordMap.notion_user\n            };\n            recordMap.collection_query[collectionId] = {\n              ...recordMap.collection_query[collectionId],\n              [collectionViewId]: collectionData.result?.reducerResults\n            };\n          } catch (err) {\n            console.warn(\n              \"NotionAPI collectionQuery error\",\n              { pageId, collectionId, collectionViewId },\n              err.message\n            );\n            if (throwOnCollectionErrors) {\n              throw err;\n            } else {\n              console.error(err);\n            }\n          }\n        },\n        {\n          concurrency\n        }\n      );\n    }\n    if (signFileUrls) {\n      await this.addSignedUrls({ recordMap, contentBlockIds, kyOptions });\n    }\n    return recordMap;\n  }\n  async addSignedUrls({\n    recordMap,\n    contentBlockIds,\n    kyOptions = {}\n  }) {\n    recordMap.signed_urls = {};\n    if (!contentBlockIds) {\n      contentBlockIds = (0,notion_utils__WEBPACK_IMPORTED_MODULE_0__.getPageContentBlockIds)(recordMap);\n    }\n    const allFileInstances = contentBlockIds.flatMap((blockId) => {\n      const block = recordMap.block[blockId]?.value;\n      if (block && (block.type === \"pdf\" || block.type === \"audio\" || block.type === \"image\" && block.file_ids?.length || block.type === \"video\" || block.type === \"file\" || block.type === \"page\")) {\n        const source = block.type === \"page\" ? block.format?.page_cover : block.properties?.source?.[0]?.[0];\n        if (source) {\n          if (source.includes(\"secure.notion-static.com\") || source.includes(\"prod-files-secure\") || source.includes(\"attachment:\")) {\n            return {\n              permissionRecord: {\n                table: \"block\",\n                id: block.id\n              },\n              url: source\n            };\n          }\n          return [];\n        }\n      }\n      return [];\n    });\n    if (allFileInstances.length > 0) {\n      try {\n        const { signedUrls } = await this.getSignedFileUrls(\n          allFileInstances,\n          kyOptions\n        );\n        if (signedUrls.length === allFileInstances.length) {\n          for (const [i, file] of allFileInstances.entries()) {\n            const signedUrl = signedUrls[i];\n            if (!signedUrl) continue;\n            const blockId = file.permissionRecord.id;\n            if (!blockId) continue;\n            recordMap.signed_urls[blockId] = signedUrl;\n          }\n        }\n      } catch (err) {\n        console.warn(\"NotionAPI getSignedfileUrls error\", err);\n      }\n    }\n  }\n  async getPageRaw(pageId, {\n    kyOptions,\n    chunkLimit = 100,\n    chunkNumber = 0\n  } = {}) {\n    const parsedPageId = (0,notion_utils__WEBPACK_IMPORTED_MODULE_0__.parsePageId)(pageId);\n    if (!parsedPageId) {\n      throw new Error(`invalid notion pageId \"${pageId}\"`);\n    }\n    const body = {\n      pageId: parsedPageId,\n      limit: chunkLimit,\n      chunkNumber,\n      cursor: { stack: [] },\n      verticalColumns: false\n    };\n    return this.fetch({\n      endpoint: \"loadPageChunk\",\n      body,\n      kyOptions\n    });\n  }\n  async getCollectionData(collectionId, collectionViewId, collectionView, {\n    limit = 999,\n    searchQuery = \"\",\n    userTimeZone = this._userTimeZone,\n    loadContentCover = true,\n    kyOptions\n  } = {}) {\n    const type = collectionView?.type;\n    const isBoardType = type === \"board\";\n    const groupBy = isBoardType ? collectionView?.format?.board_columns_by : collectionView?.format?.collection_group_by;\n    let filters = [];\n    if (collectionView?.format?.property_filters) {\n      filters = collectionView.format?.property_filters.map(\n        (filterObj) => {\n          return {\n            filter: filterObj?.filter?.filter,\n            property: filterObj?.filter?.property\n          };\n        }\n      );\n    }\n    if (collectionView?.query2?.filter?.filters) {\n      filters.push(...collectionView.query2.filter.filters);\n    }\n    let loader = {\n      type: \"reducer\",\n      reducers: {\n        collection_group_results: {\n          type: \"results\",\n          limit,\n          loadContentCover\n        }\n      },\n      sort: [],\n      ...collectionView?.query2,\n      filter: {\n        filters,\n        operator: \"and\"\n      },\n      searchQuery,\n      userTimeZone\n    };\n    if (groupBy) {\n      const groups = collectionView?.format?.board_columns || collectionView?.format?.collection_groups || [];\n      const iterators = [isBoardType ? \"board\" : \"group_aggregation\", \"results\"];\n      const operators = {\n        checkbox: \"checkbox_is\",\n        url: \"string_starts_with\",\n        text: \"string_starts_with\",\n        select: \"enum_is\",\n        multi_select: \"enum_contains\",\n        created_time: \"date_is_within\",\n        undefined: \"is_empty\"\n      };\n      const reducersQuery = {};\n      for (const group of groups) {\n        const {\n          property,\n          value: { value, type: type2 }\n        } = group;\n        for (const iterator of iterators) {\n          const iteratorProps = iterator === \"results\" ? {\n            type: iterator,\n            limit\n          } : {\n            type: \"aggregation\",\n            aggregation: {\n              aggregator: \"count\"\n            }\n          };\n          const isUncategorizedValue = value === void 0;\n          const isDateValue = value?.range;\n          const queryLabel = isUncategorizedValue ? \"uncategorized\" : isDateValue ? value.range?.start_date || value.range?.end_date : value?.value || value;\n          const queryValue = !isUncategorizedValue && (isDateValue || value?.value || value);\n          reducersQuery[`${iterator}:${type2}:${queryLabel}`] = {\n            ...iteratorProps,\n            filter: {\n              operator: \"and\",\n              filters: [\n                {\n                  property,\n                  filter: {\n                    operator: !isUncategorizedValue ? operators[type2] : \"is_empty\",\n                    ...!isUncategorizedValue && {\n                      value: {\n                        type: \"exact\",\n                        value: queryValue\n                      }\n                    }\n                  }\n                }\n              ]\n            }\n          };\n        }\n      }\n      const reducerLabel = isBoardType ? \"board_columns\" : `${type}_groups`;\n      loader = {\n        type: \"reducer\",\n        reducers: {\n          [reducerLabel]: {\n            type: \"groups\",\n            groupBy,\n            ...collectionView?.query2?.filter && {\n              filter: collectionView?.query2?.filter\n            },\n            groupSortPreference: groups.map((group) => group?.value),\n            limit\n          },\n          ...reducersQuery\n        },\n        ...collectionView?.query2,\n        searchQuery,\n        userTimeZone,\n        //TODO: add filters here\n        filter: {\n          filters,\n          operator: \"and\"\n        }\n      };\n    }\n    return this.fetch({\n      endpoint: \"queryCollection\",\n      body: {\n        collection: {\n          id: collectionId\n        },\n        collectionView: {\n          id: collectionViewId\n        },\n        source: {\n          type: \"collection\",\n          id: collectionId\n        },\n        loader\n      },\n      kyOptions: {\n        timeout: 6e4,\n        ...kyOptions,\n        searchParams: {\n          // TODO: spread kyOptions?.searchParams\n          src: \"initial_load\"\n        }\n      }\n    });\n  }\n  async getUsers(userIds, kyOptions) {\n    return this.fetch({\n      endpoint: \"getRecordValues\",\n      body: {\n        requests: userIds.map((id) => ({ id, table: \"notion_user\" }))\n      },\n      kyOptions\n    });\n  }\n  async getBlocks(blockIds, kyOptions) {\n    return this.fetch({\n      endpoint: \"syncRecordValues\",\n      body: {\n        requests: blockIds.map((blockId) => ({\n          // TODO: when to use table 'space' vs 'block'?\n          table: \"block\",\n          id: blockId,\n          version: -1\n        }))\n      },\n      kyOptions\n    });\n  }\n  async getSignedFileUrls(urls, kyOptions) {\n    return this.fetch({\n      endpoint: \"getSignedFileUrls\",\n      body: {\n        urls\n      },\n      kyOptions\n    });\n  }\n  async search(params, kyOptions) {\n    const body = {\n      type: \"BlocksInAncestor\",\n      source: \"quick_find_public\",\n      ancestorId: (0,notion_utils__WEBPACK_IMPORTED_MODULE_0__.parsePageId)(params.ancestorId),\n      sort: {\n        field: \"relevance\"\n      },\n      limit: params.limit || 20,\n      query: params.query,\n      filters: {\n        isDeletedOnly: false,\n        isNavigableOnly: false,\n        excludeTemplates: true,\n        requireEditPermissions: false,\n        includePublicPagesWithoutExplicitAccess: true,\n        ancestors: [],\n        createdBy: [],\n        editedBy: [],\n        lastEditedTime: {},\n        createdTime: {},\n        ...params.filters\n      }\n    };\n    return this.fetch({\n      endpoint: \"search\",\n      body,\n      kyOptions\n    });\n  }\n  async fetch({\n    endpoint,\n    body,\n    kyOptions,\n    headers: clientHeaders\n  }) {\n    const headers = {\n      ...clientHeaders,\n      ...this._kyOptions?.headers,\n      ...kyOptions?.headers,\n      \"Content-Type\": \"application/json\"\n    };\n    if (this._authToken) {\n      headers.cookie = `token_v2=${this._authToken}`;\n    }\n    if (this._activeUser) {\n      headers[\"x-notion-active-user-header\"] = this._activeUser;\n    }\n    const url = `${this._apiBaseUrl}/${endpoint}`;\n    const res = await ky__WEBPACK_IMPORTED_MODULE_2__[\"default\"].post(url, {\n      mode: \"no-cors\",\n      ...this._kyOptions,\n      ...kyOptions,\n      json: body,\n      headers\n    });\n    return res.json();\n  }\n};\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uLi8uLi9wYWNrYWdlcy9ub3Rpb24tY2xpZW50L2J1aWxkL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNvQjtBQU1FO0FBQ0c7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxJQUFJO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLElBQUk7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsZ0RBQWdELHNEQUFRLFNBQVM7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxvRUFBc0I7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0EsNEJBQTRCLG9FQUFzQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQSxxSEFBcUgsa0VBQW9CO0FBQ3pJO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFVBQVU7QUFDVjtBQUNBO0FBQ0EsT0FBTztBQUNQLFlBQVksaURBQUk7QUFDaEI7QUFDQTtBQUNBLGtCQUFrQixpQ0FBaUM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLGdCQUFnQix3Q0FBd0M7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FB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QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxnQkFBZ0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsaUJBQWlCLEdBQUcsU0FBUztBQUNoRCxzQkFBc0IsK0NBQU87QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGt1ZHJ5XFxEb2N1bWVudHNcXFJlYWN0UHJvamVjdHNcXHJlYWN0LW5vdGlvbi14XFxwYWNrYWdlc1xcbm90aW9uLWNsaWVudFxcYnVpbGRcXGluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9ub3Rpb24tYXBpLnRzXG5pbXBvcnQga3kgZnJvbSBcImt5XCI7XG5pbXBvcnQge1xuICBnZXRCbG9ja0NvbGxlY3Rpb25JZCxcbiAgZ2V0UGFnZUNvbnRlbnRCbG9ja0lkcyxcbiAgcGFyc2VQYWdlSWQsXG4gIHV1aWRUb0lkXG59IGZyb20gXCJub3Rpb24tdXRpbHNcIjtcbmltcG9ydCBwTWFwIGZyb20gXCJwLW1hcFwiO1xudmFyIE5vdGlvbkFQSSA9IGNsYXNzIHtcbiAgX2FwaUJhc2VVcmw7XG4gIF9hdXRoVG9rZW47XG4gIF9hY3RpdmVVc2VyO1xuICBfdXNlclRpbWVab25lO1xuICBfa3lPcHRpb25zO1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgYXBpQmFzZVVybCA9IFwiaHR0cHM6Ly93d3cubm90aW9uLnNvL2FwaS92M1wiLFxuICAgIGF1dGhUb2tlbixcbiAgICBhY3RpdmVVc2VyLFxuICAgIHVzZXJUaW1lWm9uZSA9IFwiQW1lcmljYS9OZXdfWW9ya1wiLFxuICAgIGt5T3B0aW9uc1xuICB9ID0ge30pIHtcbiAgICB0aGlzLl9hcGlCYXNlVXJsID0gYXBpQmFzZVVybDtcbiAgICB0aGlzLl9hdXRoVG9rZW4gPSBhdXRoVG9rZW47XG4gICAgdGhpcy5fYWN0aXZlVXNlciA9IGFjdGl2ZVVzZXI7XG4gICAgdGhpcy5fdXNlclRpbWVab25lID0gdXNlclRpbWVab25lO1xuICAgIHRoaXMuX2t5T3B0aW9ucyA9IGt5T3B0aW9ucztcbiAgfVxuICBhc3luYyBnZXRQYWdlKHBhZ2VJZCwge1xuICAgIGNvbmN1cnJlbmN5ID0gMyxcbiAgICBmZXRjaE1pc3NpbmdCbG9ja3MgPSB0cnVlLFxuICAgIGZldGNoQ29sbGVjdGlvbnMgPSB0cnVlLFxuICAgIHNpZ25GaWxlVXJscyA9IHRydWUsXG4gICAgY2h1bmtMaW1pdCA9IDEwMCxcbiAgICBjaHVua051bWJlciA9IDAsXG4gICAgdGhyb3dPbkNvbGxlY3Rpb25FcnJvcnMgPSBmYWxzZSxcbiAgICBjb2xsZWN0aW9uUmVkdWNlckxpbWl0ID0gOTk5LFxuICAgIGt5T3B0aW9uc1xuICB9ID0ge30pIHtcbiAgICBjb25zdCBwYWdlID0gYXdhaXQgdGhpcy5nZXRQYWdlUmF3KHBhZ2VJZCwge1xuICAgICAgY2h1bmtMaW1pdCxcbiAgICAgIGNodW5rTnVtYmVyLFxuICAgICAga3lPcHRpb25zXG4gICAgfSk7XG4gICAgY29uc3QgcmVjb3JkTWFwID0gcGFnZT8ucmVjb3JkTWFwO1xuICAgIGlmICghcmVjb3JkTWFwPy5ibG9jaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBOb3Rpb24gcGFnZSBub3QgZm91bmQgXCIke3V1aWRUb0lkKHBhZ2VJZCl9XCJgKTtcbiAgICB9XG4gICAgcmVjb3JkTWFwLmNvbGxlY3Rpb24gPSByZWNvcmRNYXAuY29sbGVjdGlvbiA/PyB7fTtcbiAgICByZWNvcmRNYXAuY29sbGVjdGlvbl92aWV3ID0gcmVjb3JkTWFwLmNvbGxlY3Rpb25fdmlldyA/PyB7fTtcbiAgICByZWNvcmRNYXAubm90aW9uX3VzZXIgPSByZWNvcmRNYXAubm90aW9uX3VzZXIgPz8ge307XG4gICAgcmVjb3JkTWFwLmNvbGxlY3Rpb25fcXVlcnkgPSB7fTtcbiAgICByZWNvcmRNYXAuc2lnbmVkX3VybHMgPSB7fTtcbiAgICBpZiAoZmV0Y2hNaXNzaW5nQmxvY2tzKSB7XG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBjb25zdCBwZW5kaW5nQmxvY2tJZHMgPSBnZXRQYWdlQ29udGVudEJsb2NrSWRzKHJlY29yZE1hcCkuZmlsdGVyKFxuICAgICAgICAgIChpZCkgPT4gIXJlY29yZE1hcC5ibG9ja1tpZF1cbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCFwZW5kaW5nQmxvY2tJZHMubGVuZ3RoKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3QmxvY2tzID0gYXdhaXQgdGhpcy5nZXRCbG9ja3MocGVuZGluZ0Jsb2NrSWRzLCBreU9wdGlvbnMpLnRoZW4oXG4gICAgICAgICAgKHJlcykgPT4gcmVzLnJlY29yZE1hcC5ibG9ja1xuICAgICAgICApO1xuICAgICAgICByZWNvcmRNYXAuYmxvY2sgPSB7IC4uLnJlY29yZE1hcC5ibG9jaywgLi4ubmV3QmxvY2tzIH07XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGNvbnRlbnRCbG9ja0lkcyA9IGdldFBhZ2VDb250ZW50QmxvY2tJZHMocmVjb3JkTWFwKTtcbiAgICBpZiAoZmV0Y2hDb2xsZWN0aW9ucykge1xuICAgICAgY29uc3QgYWxsQ29sbGVjdGlvbkluc3RhbmNlcyA9IGNvbnRlbnRCbG9ja0lkcy5mbGF0TWFwKChibG9ja0lkKSA9PiB7XG4gICAgICAgIGNvbnN0IGJsb2NrID0gcmVjb3JkTWFwLmJsb2NrW2Jsb2NrSWRdPy52YWx1ZTtcbiAgICAgICAgY29uc3QgY29sbGVjdGlvbklkID0gYmxvY2sgJiYgKGJsb2NrLnR5cGUgPT09IFwiY29sbGVjdGlvbl92aWV3XCIgfHwgYmxvY2sudHlwZSA9PT0gXCJjb2xsZWN0aW9uX3ZpZXdfcGFnZVwiKSAmJiBnZXRCbG9ja0NvbGxlY3Rpb25JZChibG9jaywgcmVjb3JkTWFwKTtcbiAgICAgICAgaWYgKGNvbGxlY3Rpb25JZCkge1xuICAgICAgICAgIHJldHVybiBibG9jay52aWV3X2lkcz8ubWFwKChjb2xsZWN0aW9uVmlld0lkKSA9PiAoe1xuICAgICAgICAgICAgY29sbGVjdGlvbklkLFxuICAgICAgICAgICAgY29sbGVjdGlvblZpZXdJZFxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgYXdhaXQgcE1hcChcbiAgICAgICAgYWxsQ29sbGVjdGlvbkluc3RhbmNlcyxcbiAgICAgICAgYXN5bmMgKGNvbGxlY3Rpb25JbnN0YW5jZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgY29sbGVjdGlvbklkLCBjb2xsZWN0aW9uVmlld0lkIH0gPSBjb2xsZWN0aW9uSW5zdGFuY2U7XG4gICAgICAgICAgY29uc3QgY29sbGVjdGlvblZpZXcgPSByZWNvcmRNYXAuY29sbGVjdGlvbl92aWV3W2NvbGxlY3Rpb25WaWV3SWRdPy52YWx1ZTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29sbGVjdGlvbkRhdGEgPSBhd2FpdCB0aGlzLmdldENvbGxlY3Rpb25EYXRhKFxuICAgICAgICAgICAgICBjb2xsZWN0aW9uSWQsXG4gICAgICAgICAgICAgIGNvbGxlY3Rpb25WaWV3SWQsXG4gICAgICAgICAgICAgIGNvbGxlY3Rpb25WaWV3LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGltaXQ6IGNvbGxlY3Rpb25SZWR1Y2VyTGltaXQsXG4gICAgICAgICAgICAgICAga3lPcHRpb25zXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZWNvcmRNYXAuYmxvY2sgPSB7XG4gICAgICAgICAgICAgIC4uLnJlY29yZE1hcC5ibG9jayxcbiAgICAgICAgICAgICAgLi4uY29sbGVjdGlvbkRhdGEucmVjb3JkTWFwLmJsb2NrXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVjb3JkTWFwLmNvbGxlY3Rpb24gPSB7XG4gICAgICAgICAgICAgIC4uLnJlY29yZE1hcC5jb2xsZWN0aW9uLFxuICAgICAgICAgICAgICAuLi5jb2xsZWN0aW9uRGF0YS5yZWNvcmRNYXAuY29sbGVjdGlvblxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlY29yZE1hcC5jb2xsZWN0aW9uX3ZpZXcgPSB7XG4gICAgICAgICAgICAgIC4uLnJlY29yZE1hcC5jb2xsZWN0aW9uX3ZpZXcsXG4gICAgICAgICAgICAgIC4uLmNvbGxlY3Rpb25EYXRhLnJlY29yZE1hcC5jb2xsZWN0aW9uX3ZpZXdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZWNvcmRNYXAubm90aW9uX3VzZXIgPSB7XG4gICAgICAgICAgICAgIC4uLnJlY29yZE1hcC5ub3Rpb25fdXNlcixcbiAgICAgICAgICAgICAgLi4uY29sbGVjdGlvbkRhdGEucmVjb3JkTWFwLm5vdGlvbl91c2VyXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVjb3JkTWFwLmNvbGxlY3Rpb25fcXVlcnlbY29sbGVjdGlvbklkXSA9IHtcbiAgICAgICAgICAgICAgLi4ucmVjb3JkTWFwLmNvbGxlY3Rpb25fcXVlcnlbY29sbGVjdGlvbklkXSxcbiAgICAgICAgICAgICAgW2NvbGxlY3Rpb25WaWV3SWRdOiBjb2xsZWN0aW9uRGF0YS5yZXN1bHQ/LnJlZHVjZXJSZXN1bHRzXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICBcIk5vdGlvbkFQSSBjb2xsZWN0aW9uUXVlcnkgZXJyb3JcIixcbiAgICAgICAgICAgICAgeyBwYWdlSWQsIGNvbGxlY3Rpb25JZCwgY29sbGVjdGlvblZpZXdJZCB9LFxuICAgICAgICAgICAgICBlcnIubWVzc2FnZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmICh0aHJvd09uQ29sbGVjdGlvbkVycm9ycykge1xuICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgY29uY3VycmVuY3lcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKHNpZ25GaWxlVXJscykge1xuICAgICAgYXdhaXQgdGhpcy5hZGRTaWduZWRVcmxzKHsgcmVjb3JkTWFwLCBjb250ZW50QmxvY2tJZHMsIGt5T3B0aW9ucyB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlY29yZE1hcDtcbiAgfVxuICBhc3luYyBhZGRTaWduZWRVcmxzKHtcbiAgICByZWNvcmRNYXAsXG4gICAgY29udGVudEJsb2NrSWRzLFxuICAgIGt5T3B0aW9ucyA9IHt9XG4gIH0pIHtcbiAgICByZWNvcmRNYXAuc2lnbmVkX3VybHMgPSB7fTtcbiAgICBpZiAoIWNvbnRlbnRCbG9ja0lkcykge1xuICAgICAgY29udGVudEJsb2NrSWRzID0gZ2V0UGFnZUNvbnRlbnRCbG9ja0lkcyhyZWNvcmRNYXApO1xuICAgIH1cbiAgICBjb25zdCBhbGxGaWxlSW5zdGFuY2VzID0gY29udGVudEJsb2NrSWRzLmZsYXRNYXAoKGJsb2NrSWQpID0+IHtcbiAgICAgIGNvbnN0IGJsb2NrID0gcmVjb3JkTWFwLmJsb2NrW2Jsb2NrSWRdPy52YWx1ZTtcbiAgICAgIGlmIChibG9jayAmJiAoYmxvY2sudHlwZSA9PT0gXCJwZGZcIiB8fCBibG9jay50eXBlID09PSBcImF1ZGlvXCIgfHwgYmxvY2sudHlwZSA9PT0gXCJpbWFnZVwiICYmIGJsb2NrLmZpbGVfaWRzPy5sZW5ndGggfHwgYmxvY2sudHlwZSA9PT0gXCJ2aWRlb1wiIHx8IGJsb2NrLnR5cGUgPT09IFwiZmlsZVwiIHx8IGJsb2NrLnR5cGUgPT09IFwicGFnZVwiKSkge1xuICAgICAgICBjb25zdCBzb3VyY2UgPSBibG9jay50eXBlID09PSBcInBhZ2VcIiA/IGJsb2NrLmZvcm1hdD8ucGFnZV9jb3ZlciA6IGJsb2NrLnByb3BlcnRpZXM/LnNvdXJjZT8uWzBdPy5bMF07XG4gICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICBpZiAoc291cmNlLmluY2x1ZGVzKFwic2VjdXJlLm5vdGlvbi1zdGF0aWMuY29tXCIpIHx8IHNvdXJjZS5pbmNsdWRlcyhcInByb2QtZmlsZXMtc2VjdXJlXCIpIHx8IHNvdXJjZS5pbmNsdWRlcyhcImF0dGFjaG1lbnQ6XCIpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBwZXJtaXNzaW9uUmVjb3JkOiB7XG4gICAgICAgICAgICAgICAgdGFibGU6IFwiYmxvY2tcIixcbiAgICAgICAgICAgICAgICBpZDogYmxvY2suaWRcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdXJsOiBzb3VyY2VcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIFtdO1xuICAgIH0pO1xuICAgIGlmIChhbGxGaWxlSW5zdGFuY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgc2lnbmVkVXJscyB9ID0gYXdhaXQgdGhpcy5nZXRTaWduZWRGaWxlVXJscyhcbiAgICAgICAgICBhbGxGaWxlSW5zdGFuY2VzLFxuICAgICAgICAgIGt5T3B0aW9uc1xuICAgICAgICApO1xuICAgICAgICBpZiAoc2lnbmVkVXJscy5sZW5ndGggPT09IGFsbEZpbGVJbnN0YW5jZXMubGVuZ3RoKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBbaSwgZmlsZV0gb2YgYWxsRmlsZUluc3RhbmNlcy5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNpZ25lZFVybCA9IHNpZ25lZFVybHNbaV07XG4gICAgICAgICAgICBpZiAoIXNpZ25lZFVybCkgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCBibG9ja0lkID0gZmlsZS5wZXJtaXNzaW9uUmVjb3JkLmlkO1xuICAgICAgICAgICAgaWYgKCFibG9ja0lkKSBjb250aW51ZTtcbiAgICAgICAgICAgIHJlY29yZE1hcC5zaWduZWRfdXJsc1tibG9ja0lkXSA9IHNpZ25lZFVybDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJOb3Rpb25BUEkgZ2V0U2lnbmVkZmlsZVVybHMgZXJyb3JcIiwgZXJyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgYXN5bmMgZ2V0UGFnZVJhdyhwYWdlSWQsIHtcbiAgICBreU9wdGlvbnMsXG4gICAgY2h1bmtMaW1pdCA9IDEwMCxcbiAgICBjaHVua051bWJlciA9IDBcbiAgfSA9IHt9KSB7XG4gICAgY29uc3QgcGFyc2VkUGFnZUlkID0gcGFyc2VQYWdlSWQocGFnZUlkKTtcbiAgICBpZiAoIXBhcnNlZFBhZ2VJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIG5vdGlvbiBwYWdlSWQgXCIke3BhZ2VJZH1cImApO1xuICAgIH1cbiAgICBjb25zdCBib2R5ID0ge1xuICAgICAgcGFnZUlkOiBwYXJzZWRQYWdlSWQsXG4gICAgICBsaW1pdDogY2h1bmtMaW1pdCxcbiAgICAgIGNodW5rTnVtYmVyLFxuICAgICAgY3Vyc29yOiB7IHN0YWNrOiBbXSB9LFxuICAgICAgdmVydGljYWxDb2x1bW5zOiBmYWxzZVxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2goe1xuICAgICAgZW5kcG9pbnQ6IFwibG9hZFBhZ2VDaHVua1wiLFxuICAgICAgYm9keSxcbiAgICAgIGt5T3B0aW9uc1xuICAgIH0pO1xuICB9XG4gIGFzeW5jIGdldENvbGxlY3Rpb25EYXRhKGNvbGxlY3Rpb25JZCwgY29sbGVjdGlvblZpZXdJZCwgY29sbGVjdGlvblZpZXcsIHtcbiAgICBsaW1pdCA9IDk5OSxcbiAgICBzZWFyY2hRdWVyeSA9IFwiXCIsXG4gICAgdXNlclRpbWVab25lID0gdGhpcy5fdXNlclRpbWVab25lLFxuICAgIGxvYWRDb250ZW50Q292ZXIgPSB0cnVlLFxuICAgIGt5T3B0aW9uc1xuICB9ID0ge30pIHtcbiAgICBjb25zdCB0eXBlID0gY29sbGVjdGlvblZpZXc/LnR5cGU7XG4gICAgY29uc3QgaXNCb2FyZFR5cGUgPSB0eXBlID09PSBcImJvYXJkXCI7XG4gICAgY29uc3QgZ3JvdXBCeSA9IGlzQm9hcmRUeXBlID8gY29sbGVjdGlvblZpZXc/LmZvcm1hdD8uYm9hcmRfY29sdW1uc19ieSA6IGNvbGxlY3Rpb25WaWV3Py5mb3JtYXQ/LmNvbGxlY3Rpb25fZ3JvdXBfYnk7XG4gICAgbGV0IGZpbHRlcnMgPSBbXTtcbiAgICBpZiAoY29sbGVjdGlvblZpZXc/LmZvcm1hdD8ucHJvcGVydHlfZmlsdGVycykge1xuICAgICAgZmlsdGVycyA9IGNvbGxlY3Rpb25WaWV3LmZvcm1hdD8ucHJvcGVydHlfZmlsdGVycy5tYXAoXG4gICAgICAgIChmaWx0ZXJPYmopID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmlsdGVyOiBmaWx0ZXJPYmo/LmZpbHRlcj8uZmlsdGVyLFxuICAgICAgICAgICAgcHJvcGVydHk6IGZpbHRlck9iaj8uZmlsdGVyPy5wcm9wZXJ0eVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChjb2xsZWN0aW9uVmlldz8ucXVlcnkyPy5maWx0ZXI/LmZpbHRlcnMpIHtcbiAgICAgIGZpbHRlcnMucHVzaCguLi5jb2xsZWN0aW9uVmlldy5xdWVyeTIuZmlsdGVyLmZpbHRlcnMpO1xuICAgIH1cbiAgICBsZXQgbG9hZGVyID0ge1xuICAgICAgdHlwZTogXCJyZWR1Y2VyXCIsXG4gICAgICByZWR1Y2Vyczoge1xuICAgICAgICBjb2xsZWN0aW9uX2dyb3VwX3Jlc3VsdHM6IHtcbiAgICAgICAgICB0eXBlOiBcInJlc3VsdHNcIixcbiAgICAgICAgICBsaW1pdCxcbiAgICAgICAgICBsb2FkQ29udGVudENvdmVyXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBzb3J0OiBbXSxcbiAgICAgIC4uLmNvbGxlY3Rpb25WaWV3Py5xdWVyeTIsXG4gICAgICBmaWx0ZXI6IHtcbiAgICAgICAgZmlsdGVycyxcbiAgICAgICAgb3BlcmF0b3I6IFwiYW5kXCJcbiAgICAgIH0sXG4gICAgICBzZWFyY2hRdWVyeSxcbiAgICAgIHVzZXJUaW1lWm9uZVxuICAgIH07XG4gICAgaWYgKGdyb3VwQnkpIHtcbiAgICAgIGNvbnN0IGdyb3VwcyA9IGNvbGxlY3Rpb25WaWV3Py5mb3JtYXQ/LmJvYXJkX2NvbHVtbnMgfHwgY29sbGVjdGlvblZpZXc/LmZvcm1hdD8uY29sbGVjdGlvbl9ncm91cHMgfHwgW107XG4gICAgICBjb25zdCBpdGVyYXRvcnMgPSBbaXNCb2FyZFR5cGUgPyBcImJvYXJkXCIgOiBcImdyb3VwX2FnZ3JlZ2F0aW9uXCIsIFwicmVzdWx0c1wiXTtcbiAgICAgIGNvbnN0IG9wZXJhdG9ycyA9IHtcbiAgICAgICAgY2hlY2tib3g6IFwiY2hlY2tib3hfaXNcIixcbiAgICAgICAgdXJsOiBcInN0cmluZ19zdGFydHNfd2l0aFwiLFxuICAgICAgICB0ZXh0OiBcInN0cmluZ19zdGFydHNfd2l0aFwiLFxuICAgICAgICBzZWxlY3Q6IFwiZW51bV9pc1wiLFxuICAgICAgICBtdWx0aV9zZWxlY3Q6IFwiZW51bV9jb250YWluc1wiLFxuICAgICAgICBjcmVhdGVkX3RpbWU6IFwiZGF0ZV9pc193aXRoaW5cIixcbiAgICAgICAgdW5kZWZpbmVkOiBcImlzX2VtcHR5XCJcbiAgICAgIH07XG4gICAgICBjb25zdCByZWR1Y2Vyc1F1ZXJ5ID0ge307XG4gICAgICBmb3IgKGNvbnN0IGdyb3VwIG9mIGdyb3Vwcykge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgcHJvcGVydHksXG4gICAgICAgICAgdmFsdWU6IHsgdmFsdWUsIHR5cGU6IHR5cGUyIH1cbiAgICAgICAgfSA9IGdyb3VwO1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZXJhdG9yIG9mIGl0ZXJhdG9ycykge1xuICAgICAgICAgIGNvbnN0IGl0ZXJhdG9yUHJvcHMgPSBpdGVyYXRvciA9PT0gXCJyZXN1bHRzXCIgPyB7XG4gICAgICAgICAgICB0eXBlOiBpdGVyYXRvcixcbiAgICAgICAgICAgIGxpbWl0XG4gICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgIHR5cGU6IFwiYWdncmVnYXRpb25cIixcbiAgICAgICAgICAgIGFnZ3JlZ2F0aW9uOiB7XG4gICAgICAgICAgICAgIGFnZ3JlZ2F0b3I6IFwiY291bnRcIlxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgY29uc3QgaXNVbmNhdGVnb3JpemVkVmFsdWUgPSB2YWx1ZSA9PT0gdm9pZCAwO1xuICAgICAgICAgIGNvbnN0IGlzRGF0ZVZhbHVlID0gdmFsdWU/LnJhbmdlO1xuICAgICAgICAgIGNvbnN0IHF1ZXJ5TGFiZWwgPSBpc1VuY2F0ZWdvcml6ZWRWYWx1ZSA/IFwidW5jYXRlZ29yaXplZFwiIDogaXNEYXRlVmFsdWUgPyB2YWx1ZS5yYW5nZT8uc3RhcnRfZGF0ZSB8fCB2YWx1ZS5yYW5nZT8uZW5kX2RhdGUgOiB2YWx1ZT8udmFsdWUgfHwgdmFsdWU7XG4gICAgICAgICAgY29uc3QgcXVlcnlWYWx1ZSA9ICFpc1VuY2F0ZWdvcml6ZWRWYWx1ZSAmJiAoaXNEYXRlVmFsdWUgfHwgdmFsdWU/LnZhbHVlIHx8IHZhbHVlKTtcbiAgICAgICAgICByZWR1Y2Vyc1F1ZXJ5W2Ake2l0ZXJhdG9yfToke3R5cGUyfToke3F1ZXJ5TGFiZWx9YF0gPSB7XG4gICAgICAgICAgICAuLi5pdGVyYXRvclByb3BzLFxuICAgICAgICAgICAgZmlsdGVyOiB7XG4gICAgICAgICAgICAgIG9wZXJhdG9yOiBcImFuZFwiLFxuICAgICAgICAgICAgICBmaWx0ZXJzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgcHJvcGVydHksXG4gICAgICAgICAgICAgICAgICBmaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0b3I6ICFpc1VuY2F0ZWdvcml6ZWRWYWx1ZSA/IG9wZXJhdG9yc1t0eXBlMl0gOiBcImlzX2VtcHR5XCIsXG4gICAgICAgICAgICAgICAgICAgIC4uLiFpc1VuY2F0ZWdvcml6ZWRWYWx1ZSAmJiB7XG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZXhhY3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBxdWVyeVZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3QgcmVkdWNlckxhYmVsID0gaXNCb2FyZFR5cGUgPyBcImJvYXJkX2NvbHVtbnNcIiA6IGAke3R5cGV9X2dyb3Vwc2A7XG4gICAgICBsb2FkZXIgPSB7XG4gICAgICAgIHR5cGU6IFwicmVkdWNlclwiLFxuICAgICAgICByZWR1Y2Vyczoge1xuICAgICAgICAgIFtyZWR1Y2VyTGFiZWxdOiB7XG4gICAgICAgICAgICB0eXBlOiBcImdyb3Vwc1wiLFxuICAgICAgICAgICAgZ3JvdXBCeSxcbiAgICAgICAgICAgIC4uLmNvbGxlY3Rpb25WaWV3Py5xdWVyeTI/LmZpbHRlciAmJiB7XG4gICAgICAgICAgICAgIGZpbHRlcjogY29sbGVjdGlvblZpZXc/LnF1ZXJ5Mj8uZmlsdGVyXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ3JvdXBTb3J0UHJlZmVyZW5jZTogZ3JvdXBzLm1hcCgoZ3JvdXApID0+IGdyb3VwPy52YWx1ZSksXG4gICAgICAgICAgICBsaW1pdFxuICAgICAgICAgIH0sXG4gICAgICAgICAgLi4ucmVkdWNlcnNRdWVyeVxuICAgICAgICB9LFxuICAgICAgICAuLi5jb2xsZWN0aW9uVmlldz8ucXVlcnkyLFxuICAgICAgICBzZWFyY2hRdWVyeSxcbiAgICAgICAgdXNlclRpbWVab25lLFxuICAgICAgICAvL1RPRE86IGFkZCBmaWx0ZXJzIGhlcmVcbiAgICAgICAgZmlsdGVyOiB7XG4gICAgICAgICAgZmlsdGVycyxcbiAgICAgICAgICBvcGVyYXRvcjogXCJhbmRcIlxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5mZXRjaCh7XG4gICAgICBlbmRwb2ludDogXCJxdWVyeUNvbGxlY3Rpb25cIixcbiAgICAgIGJvZHk6IHtcbiAgICAgICAgY29sbGVjdGlvbjoge1xuICAgICAgICAgIGlkOiBjb2xsZWN0aW9uSWRcbiAgICAgICAgfSxcbiAgICAgICAgY29sbGVjdGlvblZpZXc6IHtcbiAgICAgICAgICBpZDogY29sbGVjdGlvblZpZXdJZFxuICAgICAgICB9LFxuICAgICAgICBzb3VyY2U6IHtcbiAgICAgICAgICB0eXBlOiBcImNvbGxlY3Rpb25cIixcbiAgICAgICAgICBpZDogY29sbGVjdGlvbklkXG4gICAgICAgIH0sXG4gICAgICAgIGxvYWRlclxuICAgICAgfSxcbiAgICAgIGt5T3B0aW9uczoge1xuICAgICAgICB0aW1lb3V0OiA2ZTQsXG4gICAgICAgIC4uLmt5T3B0aW9ucyxcbiAgICAgICAgc2VhcmNoUGFyYW1zOiB7XG4gICAgICAgICAgLy8gVE9ETzogc3ByZWFkIGt5T3B0aW9ucz8uc2VhcmNoUGFyYW1zXG4gICAgICAgICAgc3JjOiBcImluaXRpYWxfbG9hZFwiXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBhc3luYyBnZXRVc2Vycyh1c2VySWRzLCBreU9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaCh7XG4gICAgICBlbmRwb2ludDogXCJnZXRSZWNvcmRWYWx1ZXNcIixcbiAgICAgIGJvZHk6IHtcbiAgICAgICAgcmVxdWVzdHM6IHVzZXJJZHMubWFwKChpZCkgPT4gKHsgaWQsIHRhYmxlOiBcIm5vdGlvbl91c2VyXCIgfSkpXG4gICAgICB9LFxuICAgICAga3lPcHRpb25zXG4gICAgfSk7XG4gIH1cbiAgYXN5bmMgZ2V0QmxvY2tzKGJsb2NrSWRzLCBreU9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaCh7XG4gICAgICBlbmRwb2ludDogXCJzeW5jUmVjb3JkVmFsdWVzXCIsXG4gICAgICBib2R5OiB7XG4gICAgICAgIHJlcXVlc3RzOiBibG9ja0lkcy5tYXAoKGJsb2NrSWQpID0+ICh7XG4gICAgICAgICAgLy8gVE9ETzogd2hlbiB0byB1c2UgdGFibGUgJ3NwYWNlJyB2cyAnYmxvY2snP1xuICAgICAgICAgIHRhYmxlOiBcImJsb2NrXCIsXG4gICAgICAgICAgaWQ6IGJsb2NrSWQsXG4gICAgICAgICAgdmVyc2lvbjogLTFcbiAgICAgICAgfSkpXG4gICAgICB9LFxuICAgICAga3lPcHRpb25zXG4gICAgfSk7XG4gIH1cbiAgYXN5bmMgZ2V0U2lnbmVkRmlsZVVybHModXJscywga3lPcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2goe1xuICAgICAgZW5kcG9pbnQ6IFwiZ2V0U2lnbmVkRmlsZVVybHNcIixcbiAgICAgIGJvZHk6IHtcbiAgICAgICAgdXJsc1xuICAgICAgfSxcbiAgICAgIGt5T3B0aW9uc1xuICAgIH0pO1xuICB9XG4gIGFzeW5jIHNlYXJjaChwYXJhbXMsIGt5T3B0aW9ucykge1xuICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICB0eXBlOiBcIkJsb2Nrc0luQW5jZXN0b3JcIixcbiAgICAgIHNvdXJjZTogXCJxdWlja19maW5kX3B1YmxpY1wiLFxuICAgICAgYW5jZXN0b3JJZDogcGFyc2VQYWdlSWQocGFyYW1zLmFuY2VzdG9ySWQpLFxuICAgICAgc29ydDoge1xuICAgICAgICBmaWVsZDogXCJyZWxldmFuY2VcIlxuICAgICAgfSxcbiAgICAgIGxpbWl0OiBwYXJhbXMubGltaXQgfHwgMjAsXG4gICAgICBxdWVyeTogcGFyYW1zLnF1ZXJ5LFxuICAgICAgZmlsdGVyczoge1xuICAgICAgICBpc0RlbGV0ZWRPbmx5OiBmYWxzZSxcbiAgICAgICAgaXNOYXZpZ2FibGVPbmx5OiBmYWxzZSxcbiAgICAgICAgZXhjbHVkZVRlbXBsYXRlczogdHJ1ZSxcbiAgICAgICAgcmVxdWlyZUVkaXRQZXJtaXNzaW9uczogZmFsc2UsXG4gICAgICAgIGluY2x1ZGVQdWJsaWNQYWdlc1dpdGhvdXRFeHBsaWNpdEFjY2VzczogdHJ1ZSxcbiAgICAgICAgYW5jZXN0b3JzOiBbXSxcbiAgICAgICAgY3JlYXRlZEJ5OiBbXSxcbiAgICAgICAgZWRpdGVkQnk6IFtdLFxuICAgICAgICBsYXN0RWRpdGVkVGltZToge30sXG4gICAgICAgIGNyZWF0ZWRUaW1lOiB7fSxcbiAgICAgICAgLi4ucGFyYW1zLmZpbHRlcnNcbiAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiB0aGlzLmZldGNoKHtcbiAgICAgIGVuZHBvaW50OiBcInNlYXJjaFwiLFxuICAgICAgYm9keSxcbiAgICAgIGt5T3B0aW9uc1xuICAgIH0pO1xuICB9XG4gIGFzeW5jIGZldGNoKHtcbiAgICBlbmRwb2ludCxcbiAgICBib2R5LFxuICAgIGt5T3B0aW9ucyxcbiAgICBoZWFkZXJzOiBjbGllbnRIZWFkZXJzXG4gIH0pIHtcbiAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgLi4uY2xpZW50SGVhZGVycyxcbiAgICAgIC4uLnRoaXMuX2t5T3B0aW9ucz8uaGVhZGVycyxcbiAgICAgIC4uLmt5T3B0aW9ucz8uaGVhZGVycyxcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgfTtcbiAgICBpZiAodGhpcy5fYXV0aFRva2VuKSB7XG4gICAgICBoZWFkZXJzLmNvb2tpZSA9IGB0b2tlbl92Mj0ke3RoaXMuX2F1dGhUb2tlbn1gO1xuICAgIH1cbiAgICBpZiAodGhpcy5fYWN0aXZlVXNlcikge1xuICAgICAgaGVhZGVyc1tcIngtbm90aW9uLWFjdGl2ZS11c2VyLWhlYWRlclwiXSA9IHRoaXMuX2FjdGl2ZVVzZXI7XG4gICAgfVxuICAgIGNvbnN0IHVybCA9IGAke3RoaXMuX2FwaUJhc2VVcmx9LyR7ZW5kcG9pbnR9YDtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBreS5wb3N0KHVybCwge1xuICAgICAgbW9kZTogXCJuby1jb3JzXCIsXG4gICAgICAuLi50aGlzLl9reU9wdGlvbnMsXG4gICAgICAuLi5reU9wdGlvbnMsXG4gICAgICBqc29uOiBib2R5LFxuICAgICAgaGVhZGVyc1xuICAgIH0pO1xuICAgIHJldHVybiByZXMuanNvbigpO1xuICB9XG59O1xuZXhwb3J0IHtcbiAgTm90aW9uQVBJXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/../../packages/notion-client/build/index.js\n");

/***/ }),

/***/ "(pages-dir-node)/../../packages/notion-utils/build/index.js":
/*!**************************************************!*\
  !*** ../../packages/notion-utils/build/index.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defaultMapImageUrl: () => (/* binding */ defaultMapImageUrl),\n/* harmony export */   defaultMapPageUrl: () => (/* binding */ defaultMapPageUrl),\n/* harmony export */   estimatePageReadTime: () => (/* binding */ estimatePageReadTime),\n/* harmony export */   estimatePageReadTimeAsHumanizedString: () => (/* binding */ estimatePageReadTimeAsHumanizedString),\n/* harmony export */   formatDate: () => (/* binding */ formatDate),\n/* harmony export */   formatNotionDateTime: () => (/* binding */ formatNotionDateTime),\n/* harmony export */   getAllPagesInSpace: () => (/* binding */ getAllPagesInSpace),\n/* harmony export */   getBlockCollectionId: () => (/* binding */ getBlockCollectionId),\n/* harmony export */   getBlockIcon: () => (/* binding */ getBlockIcon),\n/* harmony export */   getBlockParentPage: () => (/* binding */ getBlockParentPage),\n/* harmony export */   getBlockTitle: () => (/* binding */ getBlockTitle),\n/* harmony export */   getCanonicalPageId: () => (/* binding */ getCanonicalPageId),\n/* harmony export */   getDateValue: () => (/* binding */ getDateValue),\n/* harmony export */   getPageBreadcrumbs: () => (/* binding */ getPageBreadcrumbs),\n/* harmony export */   getPageContentBlockIds: () => (/* binding */ getPageContentBlockIds),\n/* harmony export */   getPageImageUrls: () => (/* binding */ getPageImageUrls),\n/* harmony export */   getPageProperty: () => (/* binding */ getPageProperty),\n/* harmony export */   getPageTableOfContents: () => (/* binding */ getPageTableOfContents),\n/* harmony export */   getPageTitle: () => (/* binding */ getPageTitle),\n/* harmony export */   getPageTweetIds: () => (/* binding */ getPageTweetIds),\n/* harmony export */   getPageTweetUrls: () => (/* binding */ getPageTweetUrls),\n/* harmony export */   getTextContent: () => (/* binding */ getTextContent),\n/* harmony export */   idToUuid: () => (/* binding */ idToUuid),\n/* harmony export */   isUrl: () => (/* reexport safe */ is_url_superb__WEBPACK_IMPORTED_MODULE_1__[\"default\"]),\n/* harmony export */   mergeRecordMaps: () => (/* binding */ mergeRecordMaps),\n/* harmony export */   normalizeTitle: () => (/* binding */ normalizeTitle),\n/* harmony export */   normalizeUrl: () => (/* binding */ normalizeUrl),\n/* harmony export */   parsePageId: () => (/* binding */ parsePageId),\n/* harmony export */   uuidToId: () => (/* binding */ uuidToId)\n/* harmony export */ });\n/* harmony import */ var p_queue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-queue */ \"(pages-dir-node)/../../node_modules/.pnpm/p-queue@8.1.0/node_modules/p-queue/dist/index.js\");\n/* harmony import */ var is_url_superb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! is-url-superb */ \"(pages-dir-node)/../../node_modules/.pnpm/is-url-superb@6.1.0/node_modules/is-url-superb/index.js\");\n/* harmony import */ var memoize__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! memoize */ \"(pages-dir-node)/../../node_modules/.pnpm/memoize@10.1.0/node_modules/memoize/distribution/index.js\");\n/* harmony import */ var normalize_url__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! normalize-url */ \"(pages-dir-node)/../../node_modules/.pnpm/normalize-url@8.0.2/node_modules/normalize-url/index.js\");\n// src/estimate-page-read-time.ts\n\n\n// src/get-block-title.ts\n\n\n// src/get-block-collection-id.ts\n\nfunction getBlockCollectionId(block, recordMap) {\n  var _a, _b, _c, _d, _e, _f, _g;\n  const collectionId = block.collection_id || ((_b = (_a = block.format) == null ? void 0 : _a.collection_pointer) == null ? void 0 : _b.id);\n  if (collectionId) {\n    return collectionId;\n  }\n  const collectionViewId = (_c = block == null ? void 0 : block.view_ids) == null ? void 0 : _c[0];\n  if (collectionViewId) {\n    const collectionView = (_e = (_d = recordMap.collection_view) == null ? void 0 : _d[collectionViewId]) == null ? void 0 : _e.value;\n    if (collectionView) {\n      const collectionId2 = (_g = (_f = collectionView.format) == null ? void 0 : _f.collection_pointer) == null ? void 0 : _g.id;\n      return collectionId2;\n    }\n  }\n  return null;\n}\n\n// src/get-text-content.ts\nvar getTextContent = (text) => {\n  var _a;\n  if (!text) {\n    return \"\";\n  } else if (Array.isArray(text)) {\n    return (_a = text == null ? void 0 : text.reduce(\n      (prev, current) => prev + (current[0] !== \"\\u204D\" && current[0] !== \"\\u2023\" ? current[0] : \"\"),\n      \"\"\n    )) != null ? _a : \"\";\n  } else {\n    return text;\n  }\n};\n\n// src/get-block-title.ts\nfunction getBlockTitle(block, recordMap) {\n  var _a, _b;\n  if ((_a = block.properties) == null ? void 0 : _a.title) {\n    return getTextContent(block.properties.title);\n  }\n  if (block.type === \"collection_view_page\" || block.type === \"collection_view\") {\n    const collectionId = getBlockCollectionId(block, recordMap);\n    if (collectionId) {\n      const collection = (_b = recordMap.collection[collectionId]) == null ? void 0 : _b.value;\n      if (collection) {\n        return getTextContent(collection.name);\n      }\n    }\n  }\n  return \"\";\n}\n\n// src/get-page-table-of-contents.ts\nvar indentLevels = {\n  header: 0,\n  sub_header: 1,\n  sub_sub_header: 2\n};\nvar getPageTableOfContents = (page, recordMap) => {\n  function mapContentToEntries(content) {\n    return (content != null ? content : []).map((blockId) => {\n      var _a, _b;\n      const block = (_a = recordMap.block[blockId]) == null ? void 0 : _a.value;\n      if (block) {\n        const { type } = block;\n        if (type === \"header\" || type === \"sub_header\" || type === \"sub_sub_header\") {\n          return {\n            id: blockId,\n            type,\n            text: getTextContent((_b = block.properties) == null ? void 0 : _b.title),\n            indentLevel: indentLevels[type]\n          };\n        }\n        if (type === \"transclusion_container\") {\n          return mapContentToEntries(block.content);\n        }\n      }\n      return null;\n    });\n  }\n  const toc = mapContentToEntries(page.content).flat().filter(Boolean);\n  const indentLevelStack = [\n    {\n      actual: -1,\n      effective: -1\n    }\n  ];\n  for (const tocItem of toc) {\n    const { indentLevel } = tocItem;\n    const actual = indentLevel;\n    do {\n      const prevIndent = indentLevelStack.at(-1);\n      const { actual: prevActual, effective: prevEffective } = prevIndent;\n      if (actual > prevActual) {\n        tocItem.indentLevel = prevEffective + 1;\n        indentLevelStack.push({\n          actual,\n          effective: tocItem.indentLevel\n        });\n      } else if (actual === prevActual) {\n        tocItem.indentLevel = prevEffective;\n        break;\n      } else {\n        indentLevelStack.pop();\n      }\n    } while (true);\n  }\n  return toc;\n};\n\n// src/estimate-page-read-time.ts\nfunction estimatePageReadTime(block, recordMap, {\n  wordsPerMinute = 275,\n  imageReadTimeInSeconds = 12\n} = {}) {\n  const stats = getBlockContentStats(block, recordMap);\n  const totalWordsReadTimeInMinutes = stats.numWords / wordsPerMinute;\n  const totalImageReadTimeInSeconds = stats.numImages > 10 ? stats.numImages / 2 * (imageReadTimeInSeconds + 3) + (stats.numImages - 10) * 3 : stats.numImages / 2 * (2 * imageReadTimeInSeconds + (1 - stats.numImages));\n  const totalImageReadTimeInMinutes = totalImageReadTimeInSeconds / 60;\n  const totalReadTimeInMinutes = totalWordsReadTimeInMinutes + totalImageReadTimeInMinutes;\n  return {\n    ...stats,\n    totalWordsReadTimeInMinutes,\n    totalImageReadTimeInMinutes,\n    totalReadTimeInMinutes\n  };\n}\nfunction estimatePageReadTimeAsHumanizedString(block, recordMap, opts) {\n  const estimate = estimatePageReadTime(block, recordMap, opts);\n  return humanizeReadTime(estimate.totalReadTimeInMinutes);\n}\nfunction getBlockContentStats(block, recordMap) {\n  var _a, _b, _c, _d;\n  const stats = {\n    numWords: 0,\n    numImages: 0\n  };\n  if (!block) {\n    return stats;\n  }\n  for (const childId of block.content || []) {\n    const child = (_a = recordMap.block[childId]) == null ? void 0 : _a.value;\n    let recurse = false;\n    if (!child) continue;\n    switch (child.type) {\n      case \"quote\":\n      // fallthrough\n      case \"alias\":\n      // fallthrough\n      case \"header\":\n      // fallthrough\n      case \"sub_header\":\n      // fallthrough\n      case \"sub_sub_header\": {\n        const title = getBlockTitle(child, recordMap);\n        stats.numWords += countWordsInText(title);\n        break;\n      }\n      case \"callout\":\n      // fallthrough\n      case \"toggle\":\n      // fallthrough\n      case \"to_do\":\n      // fallthrough\n      case \"bulleted_list\":\n      // fallthrough\n      case \"numbered_list\":\n      // fallthrough\n      case \"text\": {\n        const title = getBlockTitle(child, recordMap);\n        stats.numWords += countWordsInText(title);\n        recurse = true;\n        break;\n      }\n      case \"embed\":\n      // fallthrough\n      case \"tweet\":\n      // fallthrough\n      case \"maps\":\n      // fallthrough\n      case \"pdf\":\n      // fallthrough\n      case \"figma\":\n      // fallthrough\n      case \"typeform\":\n      // fallthrough\n      case \"codepen\":\n      // fallthrough\n      case \"excalidraw\":\n      // fallthrough\n      case \"gist\":\n      // fallthrough\n      case \"video\":\n      // fallthrough\n      case \"drive\":\n      // fallthrough\n      case \"audio\":\n      // fallthrough\n      case \"file\":\n      // fallthrough\n      case \"image\":\n        stats.numImages += 1;\n        break;\n      case \"bookmark\":\n        stats.numImages += 0.25;\n        break;\n      case \"code\":\n        stats.numImages += 2;\n        break;\n      case \"table\":\n      // fallthrough\n      case \"collection_view\":\n        stats.numImages += 2;\n        break;\n      case \"column\":\n      // fallthrough\n      case \"column_list\":\n      // fallthrough\n      case \"transclusion_container\":\n        recurse = true;\n        break;\n      case \"table_of_contents\": {\n        const page = block;\n        if (!page) continue;\n        const toc = getPageTableOfContents(page, recordMap);\n        for (const tocItem of toc) {\n          stats.numWords += countWordsInText(tocItem.text);\n        }\n        break;\n      }\n      case \"transclusion_reference\": {\n        const referencePointerId = (_c = (_b = child == null ? void 0 : child.format) == null ? void 0 : _b.transclusion_reference_pointer) == null ? void 0 : _c.id;\n        if (!referencePointerId) {\n          continue;\n        }\n        const referenceBlock = (_d = recordMap.block[referencePointerId]) == null ? void 0 : _d.value;\n        if (referenceBlock) {\n          mergeContentStats(\n            stats,\n            getBlockContentStats(referenceBlock, recordMap)\n          );\n        }\n        break;\n      }\n      default:\n        break;\n    }\n    if (recurse) {\n      mergeContentStats(stats, getBlockContentStats(child, recordMap));\n    }\n  }\n  return stats;\n}\nfunction mergeContentStats(statsA, statsB) {\n  statsA.numWords += statsB.numWords;\n  statsA.numImages += statsB.numImages;\n}\nfunction countWordsInText(text) {\n  if (!text) {\n    return 0;\n  }\n  return (text.match(/\\w+/g) || []).length;\n}\nfunction humanizeReadTime(time) {\n  if (time < 0.5) {\n    return \"less than a minute\";\n  }\n  if (time < 1.5) {\n    return \"1 minute\";\n  }\n  return `${Math.ceil(time)} minutes`;\n}\n\n// src/format-date.ts\nvar formatDate = (input, { month = \"short\" } = {}) => {\n  const date = new Date(input);\n  const monthLocale = date.toLocaleString(\"en-US\", { month });\n  return `${monthLocale} ${date.getUTCDate()}, ${date.getUTCFullYear()}`;\n};\n\n// src/format-notion-date-time.ts\nvar formatNotionDateTime = (datetime) => {\n  const dateString = `${datetime.start_date}T${datetime.start_time || \"00:00\"}+00:00`;\n  return formatDate(dateString);\n};\n\n// src/get-all-pages-in-space.ts\n\n\n\n// src/id-to-uuid.ts\nvar idToUuid = (id = \"\") => `${id.slice(0, 8)}-${id.slice(8, 12)}-${id.slice(12, 16)}-${id.slice(\n  16,\n  20\n)}-${id.slice(20)}`;\n\n// src/parse-page-id.ts\nvar pageIdRe = /\\b([\\da-f]{32})\\b/;\nvar pageId2Re = /\\b([\\da-f]{8}(?:-[\\da-f]{4}){3}-[\\da-f]{12})\\b/;\nvar parsePageId = (id = \"\", { uuid = true } = {}) => {\n  if (!id) return;\n  id = id.split(\"?\")[0];\n  if (!id) return;\n  const match = id.match(pageIdRe);\n  if (match) {\n    return uuid ? idToUuid(match[1]) : match[1];\n  }\n  const match2 = id.match(pageId2Re);\n  if (match2) {\n    return uuid ? match2[1] : match2[1].replaceAll(\"-\", \"\");\n  }\n  return;\n};\n\n// src/get-all-pages-in-space.ts\nasync function getAllPagesInSpace(rootPageId, rootSpaceId, getPage, {\n  concurrency = 4,\n  traverseCollections = true,\n  targetPageId,\n  maxDepth = Number.POSITIVE_INFINITY\n} = {}) {\n  const pages = {};\n  const pendingPageIds = /* @__PURE__ */ new Set();\n  const queue = new p_queue__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({ concurrency });\n  async function processPage(pageId, depth = 0) {\n    if (depth > maxDepth) {\n      return;\n    }\n    if (targetPageId && pendingPageIds.has(targetPageId)) {\n      return;\n    }\n    pageId = parsePageId(pageId);\n    if (pageId && !pages[pageId] && !pendingPageIds.has(pageId)) {\n      pendingPageIds.add(pageId);\n      void queue.add(async () => {\n        var _a, _b;\n        try {\n          if (targetPageId && pendingPageIds.has(targetPageId) && pageId !== targetPageId) {\n            return;\n          }\n          const page = await getPage(pageId);\n          if (!page) {\n            return;\n          }\n          const spaceId = (_b = (_a = page.block[pageId]) == null ? void 0 : _a.value) == null ? void 0 : _b.space_id;\n          if (spaceId) {\n            if (!rootSpaceId) {\n              rootSpaceId = spaceId;\n            } else if (rootSpaceId !== spaceId) {\n              return;\n            }\n          }\n          for (const subPageId of Object.keys(page.block).filter((key) => {\n            var _a2;\n            const block = (_a2 = page.block[key]) == null ? void 0 : _a2.value;\n            if (!block || block.alive === false) return false;\n            if (block.type !== \"page\" && block.type !== \"collection_view_page\") {\n              return false;\n            }\n            if (rootSpaceId && block.space_id && block.space_id !== rootSpaceId) {\n              return false;\n            }\n            return true;\n          })) {\n            void processPage(subPageId, depth + 1);\n          }\n          if (traverseCollections) {\n            for (const collectionViews of Object.values(\n              page.collection_query\n            )) {\n              for (const collectionData of Object.values(collectionViews)) {\n                const { blockIds } = collectionData;\n                if (blockIds) {\n                  for (const collectionItemId of blockIds) {\n                    void processPage(collectionItemId, depth + 1);\n                  }\n                }\n              }\n            }\n          }\n          pages[pageId] = page;\n        } catch (err) {\n          console.warn(\n            \"page load error\",\n            { pageId, spaceId: rootSpaceId },\n            err.statusCode,\n            err.message\n          );\n          pages[pageId] = null;\n        }\n        pendingPageIds.delete(pageId);\n      });\n    }\n  }\n  await processPage(rootPageId);\n  await queue.onIdle();\n  return pages;\n}\n\n// src/get-block-icon.ts\n\nfunction getBlockIcon(block, recordMap) {\n  var _a, _b, _c;\n  if ((_a = block.format) == null ? void 0 : _a.page_icon) {\n    return (_b = block.format) == null ? void 0 : _b.page_icon;\n  }\n  if (block.type === \"collection_view_page\" || block.type === \"collection_view\") {\n    const collectionId = getBlockCollectionId(block, recordMap);\n    if (collectionId) {\n      const collection = (_c = recordMap.collection[collectionId]) == null ? void 0 : _c.value;\n      if (collection) {\n        return collection.icon;\n      }\n    }\n  }\n  return null;\n}\n\n// src/get-block-parent-page.ts\nvar getBlockParentPage = (block, recordMap, {\n  inclusive = false\n} = {}) => {\n  var _a, _b;\n  let currentRecord = block;\n  while (currentRecord) {\n    if (inclusive && (currentRecord == null ? void 0 : currentRecord.type) === \"page\") {\n      return currentRecord;\n    }\n    const parentId = currentRecord.parent_id;\n    const parentTable = currentRecord.parent_table;\n    if (!parentId) {\n      break;\n    }\n    if (parentTable === \"collection\") {\n      currentRecord = (_a = recordMap.collection[parentId]) == null ? void 0 : _a.value;\n    } else {\n      currentRecord = (_b = recordMap.block[parentId]) == null ? void 0 : _b.value;\n      if ((currentRecord == null ? void 0 : currentRecord.type) === \"page\") {\n        return currentRecord;\n      }\n    }\n  }\n  return null;\n};\n\n// src/get-canonical-page-id.ts\n\n\n// src/get-page-property.ts\n\nfunction getPageProperty(propertyName, block, recordMap) {\n  var _a;\n  try {\n    if (!block.properties || !Object.keys(recordMap.collection)) {\n      return null;\n    }\n    const collection = (_a = recordMap.collection[block.parent_id]) == null ? void 0 : _a.value;\n    if (collection) {\n      const propertyNameL = propertyName.toLowerCase();\n      const propertyId = Object.keys(collection.schema).find(\n        (key) => {\n          var _a2, _b;\n          return ((_b = (_a2 = collection.schema[key]) == null ? void 0 : _a2.name) == null ? void 0 : _b.toLowerCase()) === propertyNameL;\n        }\n      );\n      if (!propertyId) {\n        return null;\n      }\n      const s = collection.schema[propertyId];\n      if (!s) {\n        return null;\n      }\n      const { type } = s;\n      const content = getTextContent(block.properties[propertyId]);\n      switch (type) {\n        case \"created_time\":\n          return block.created_time;\n        case \"multi_select\":\n          return content.split(\",\");\n        case \"date\": {\n          const property = block.properties[propertyId];\n          const formatDate2 = property[0][1][0][1];\n          if (formatDate2.type === \"datetime\") {\n            return (/* @__PURE__ */ new Date(\n              `${formatDate2.start_date} ${formatDate2.start_time}`\n            )).getTime();\n          } else if (formatDate2.type === \"date\") {\n            return new Date(formatDate2.start_date).getTime();\n          } else if (formatDate2.type === \"datetimerange\") {\n            const { start_date, start_time, end_date, end_time } = formatDate2;\n            const startTime = (/* @__PURE__ */ new Date(`${start_date} ${start_time}`)).getTime();\n            const endTime = (/* @__PURE__ */ new Date(`${end_date} ${end_time}`)).getTime();\n            return [startTime, endTime];\n          } else {\n            const startTime = new Date(formatDate2.start_date).getTime();\n            const endTime = new Date(formatDate2.end_date).getTime();\n            return [startTime, endTime];\n          }\n        }\n        case \"checkbox\":\n          return content === \"Yes\";\n        case \"last_edited_time\":\n          return block.last_edited_time;\n        default:\n          return content;\n      }\n    }\n  } catch (e) {\n  }\n  return null;\n}\n\n// src/normalize-title.ts\nvar normalizeTitle = (title) => {\n  return (title || \"\").replaceAll(\" \", \"-\").replaceAll(\n    /[^\\dA-Za-z\\u3000-\\u303F\\u3041-\\u3096\\u30A1-\\u30FC\\u4E00-\\u9FFF\\uAC00-\\uD7AF-]/g,\n    \"\"\n  ).replaceAll(\"--\", \"-\").replace(/-$/, \"\").replace(/^-/, \"\").trim().toLowerCase();\n};\n\n// src/uuid-to-id.ts\nvar uuidToId = (uuid) => uuid.replaceAll(\"-\", \"\");\n\n// src/get-canonical-page-id.ts\nvar getCanonicalPageId = (pageId, recordMap, { uuid = true } = {}) => {\n  var _a;\n  if (!pageId || !recordMap) return null;\n  const id = uuidToId(pageId);\n  const block = (_a = recordMap.block[pageId]) == null ? void 0 : _a.value;\n  if (block) {\n    const slug = getPageProperty(\"slug\", block, recordMap) || getPageProperty(\"Slug\", block, recordMap) || normalizeTitle(getBlockTitle(block, recordMap));\n    if (slug) {\n      if (uuid) {\n        return `${slug}-${id}`;\n      } else {\n        return slug;\n      }\n    }\n  }\n  return id;\n};\n\n// src/get-date-value.ts\nvar getDateValue = (prop) => {\n  if (prop && Array.isArray(prop)) {\n    if (prop[0] === \"d\") {\n      return prop[1];\n    } else {\n      for (const v of prop) {\n        const value = getDateValue(v);\n        if (value) {\n          return value;\n        }\n      }\n    }\n  }\n  return null;\n};\n\n// src/get-page-breadcrumbs.ts\nvar getPageBreadcrumbs = (recordMap, activePageId) => {\n  var _a;\n  const blockMap = recordMap.block;\n  const breadcrumbs = [];\n  let currentPageId = activePageId;\n  do {\n    const block = (_a = blockMap[currentPageId]) == null ? void 0 : _a.value;\n    if (!block) {\n      break;\n    }\n    const title = getBlockTitle(block, recordMap);\n    const icon = getBlockIcon(block, recordMap);\n    if (!(title || icon)) {\n      break;\n    }\n    breadcrumbs.push({\n      block,\n      active: currentPageId === activePageId,\n      pageId: currentPageId,\n      title,\n      icon\n    });\n    const parentBlock = getBlockParentPage(block, recordMap);\n    const parentId = parentBlock == null ? void 0 : parentBlock.id;\n    if (!parentId) {\n      break;\n    }\n    currentPageId = parentId;\n  } while (true);\n  breadcrumbs.reverse();\n  return breadcrumbs;\n};\n\n// src/get-page-content-block-ids.ts\nvar getPageContentBlockIds = (recordMap, blockId) => {\n  const rootBlockId = blockId || Object.keys(recordMap.block)[0];\n  const contentBlockIds = /* @__PURE__ */ new Set();\n  function addContentBlocks(blockId2) {\n    var _a, _b, _c, _d, _e, _f;\n    if (contentBlockIds.has(blockId2)) return;\n    contentBlockIds.add(blockId2);\n    const block = (_a = recordMap.block[blockId2]) == null ? void 0 : _a.value;\n    if (!block) return;\n    const { content, type, properties, format } = block;\n    if (properties) {\n      for (const key of Object.keys(properties)) {\n        const p = properties[key];\n        if (!p) continue;\n        for (const d of p) {\n          const value2 = (_c = (_b = d == null ? void 0 : d[0]) == null ? void 0 : _b[1]) == null ? void 0 : _c[0];\n          if ((value2 == null ? void 0 : value2[0]) === \"p\" && value2[1]) {\n            addContentBlocks(value2[1]);\n          }\n        }\n        const value = (_e = (_d = p == null ? void 0 : p[0]) == null ? void 0 : _d[1]) == null ? void 0 : _e[0];\n        if ((value == null ? void 0 : value[0]) === \"p\" && value[1]) {\n          addContentBlocks(value[1]);\n        }\n      }\n    }\n    if (format) {\n      const referenceId = (_f = format.transclusion_reference_pointer) == null ? void 0 : _f.id;\n      if (referenceId) {\n        addContentBlocks(referenceId);\n      }\n    }\n    if (!content || !Array.isArray(content)) {\n      return;\n    }\n    if (blockId2 !== rootBlockId) {\n      if (type === \"page\" || type === \"collection_view_page\") {\n        return;\n      }\n    }\n    for (const blockId3 of content) {\n      addContentBlocks(blockId3);\n    }\n  }\n  addContentBlocks(rootBlockId);\n  return Array.from(contentBlockIds);\n};\n\n// src/is-url.ts\n\n\n// src/get-page-image-urls.ts\nvar getPageImageUrls = (recordMap, {\n  mapImageUrl\n}) => {\n  const blockIds = Object.keys(recordMap.block);\n  const imageUrls = blockIds.flatMap((blockId) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k;\n    const block = (_a = recordMap.block[blockId]) == null ? void 0 : _a.value;\n    const images = [];\n    if (block) {\n      if (block.type === \"image\") {\n        const signedUrl = (_b = recordMap.signed_urls) == null ? void 0 : _b[block.id];\n        let source = signedUrl || ((_e = (_d = (_c = block.properties) == null ? void 0 : _c.source) == null ? void 0 : _d[0]) == null ? void 0 : _e[0]);\n        if (source == null ? void 0 : source.includes(\"file.notion.so\")) {\n          source = (_h = (_g = (_f = block.properties) == null ? void 0 : _f.source) == null ? void 0 : _g[0]) == null ? void 0 : _h[0];\n        }\n        if (source) {\n          images.push({\n            block,\n            url: source\n          });\n        }\n      }\n      if ((_i = block.format) == null ? void 0 : _i.page_cover) {\n        const source = block.format.page_cover;\n        images.push({\n          block,\n          url: source\n        });\n      }\n      if ((_j = block.format) == null ? void 0 : _j.bookmark_cover) {\n        const source = block.format.bookmark_cover;\n        images.push({\n          block,\n          url: source\n        });\n      }\n      if ((_k = block.format) == null ? void 0 : _k.bookmark_icon) {\n        const source = block.format.bookmark_icon;\n        images.push({\n          block,\n          url: source\n        });\n      }\n      const pageIcon = getBlockIcon(block, recordMap);\n      if (pageIcon && (0,is_url_superb__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(pageIcon)) {\n        images.push({\n          block,\n          url: pageIcon\n        });\n      }\n    }\n    return images;\n  }).filter(Boolean).map(({ block, url }) => mapImageUrl(url, block)).filter(Boolean);\n  return Array.from(new Set(imageUrls));\n};\n\n// src/get-page-title.ts\n\nfunction getPageTitle(recordMap) {\n  var _a;\n  const rootBlockId = Object.keys(recordMap.block)[0];\n  if (!rootBlockId) return null;\n  const pageBlock = (_a = recordMap.block[rootBlockId]) == null ? void 0 : _a.value;\n  if (pageBlock) {\n    return getBlockTitle(pageBlock, recordMap);\n  }\n  return null;\n}\n\n// src/get-page-tweet-urls.ts\nvar getPageTweetUrls = (recordMap) => {\n  const blockIds = Object.keys(recordMap.block);\n  const tweetUrls = blockIds.map((blockId) => {\n    var _a, _b, _c, _d;\n    const block = (_a = recordMap.block[blockId]) == null ? void 0 : _a.value;\n    if ((block == null ? void 0 : block.type) === \"tweet\") {\n      const tweetUrl = (_d = (_c = (_b = block.properties) == null ? void 0 : _b.source) == null ? void 0 : _c[0]) == null ? void 0 : _d[0];\n      if (tweetUrl) {\n        return tweetUrl;\n      }\n    }\n  }).filter(Boolean);\n  return Array.from(new Set(tweetUrls));\n};\n\n// src/get-page-tweet-ids.ts\nvar getPageTweetIds = (recordMap) => {\n  const tweetUrls = getPageTweetUrls(recordMap);\n  return tweetUrls.map((url) => {\n    try {\n      const u = new URL(url);\n      const parts = u.pathname.split(\"/\");\n      return parts.at(-1);\n    } catch (e) {\n      return;\n    }\n  }).filter(Boolean);\n};\n\n// src/map-image-url.ts\n\nvar defaultMapImageUrl = (url, block) => {\n  if (!url) {\n    return void 0;\n  }\n  if (url.startsWith(\"data:\")) {\n    return url;\n  }\n  if (url.startsWith(\"https://images.unsplash.com\")) {\n    return url;\n  }\n  try {\n    const u = new URL(url);\n    if (u.pathname.startsWith(\"/secure.notion-static.com\") && u.hostname.endsWith(\".amazonaws.com\")) {\n      if (u.searchParams.has(\"X-Amz-Credential\") && u.searchParams.has(\"X-Amz-Signature\") && u.searchParams.has(\"X-Amz-Algorithm\")) {\n        return url;\n      }\n    }\n    if (u.hostname === \"img.notionusercontent.com\") {\n      return url;\n    }\n  } catch (e) {\n  }\n  if (url.startsWith(\"/images\")) {\n    url = `https://www.notion.so${url}`;\n  }\n  url = `https://www.notion.so${url.startsWith(\"/image\") ? url : `/image/${encodeURIComponent(url)}`}`;\n  const notionImageUrlV2 = new URL(url);\n  let table = block.parent_table === \"space\" ? \"block\" : block.parent_table;\n  if (table === \"collection\" || table === \"team\") {\n    table = \"block\";\n  }\n  notionImageUrlV2.searchParams.set(\"table\", table);\n  notionImageUrlV2.searchParams.set(\"id\", block.id);\n  notionImageUrlV2.searchParams.set(\"cache\", \"v2\");\n  url = notionImageUrlV2.toString();\n  return url;\n};\n\n// src/map-page-url.ts\nvar defaultMapPageUrl = (rootPageId) => (pageId) => {\n  pageId = (pageId || \"\").replaceAll(\"-\", \"\");\n  if (rootPageId && pageId === rootPageId) {\n    return \"/\";\n  } else {\n    return `/${pageId}`;\n  }\n};\n\n// src/merge-record-maps.ts\n\nfunction mergeRecordMaps(recordMapA, recordMapB) {\n  const mergedRecordMap = {\n    block: {\n      ...recordMapA.block,\n      ...recordMapB.block\n    },\n    collection: {\n      ...recordMapA.collection,\n      ...recordMapB.collection\n    },\n    collection_view: {\n      ...recordMapA.collection_view,\n      ...recordMapB.collection_view\n    },\n    notion_user: {\n      ...recordMapA.notion_user,\n      ...recordMapB.notion_user\n    },\n    collection_query: {\n      ...recordMapA.collection_query,\n      ...recordMapB.collection_query\n    },\n    signed_urls: {\n      ...recordMapA.signed_urls,\n      ...recordMapB.signed_urls\n    },\n    preview_images: {\n      ...recordMapA.preview_images,\n      ...recordMapB.preview_images\n    }\n  };\n  return mergedRecordMap;\n}\n\n// src/normalize-url.ts\n\n\nvar normalizeUrl = (0,memoize__WEBPACK_IMPORTED_MODULE_2__[\"default\"])((url) => {\n  if (!url) {\n    return \"\";\n  }\n  try {\n    if (url.startsWith(\"https://www.notion.so/image/\")) {\n      const u = new URL(url);\n      const subUrl = decodeURIComponent(u.pathname.slice(\"/image/\".length));\n      const normalizedSubUrl = normalizeUrl(subUrl);\n      u.pathname = `/image/${encodeURIComponent(normalizedSubUrl)}`;\n      url = u.toString();\n    }\n    return (0,normalize_url__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(url, {\n      stripProtocol: true,\n      stripWWW: true,\n      stripHash: true,\n      stripTextFragment: true,\n      removeQueryParameters: true\n    });\n  } catch (e) {\n    return \"\";\n  }\n});\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uLi8uLi9wYWNrYWdlcy9ub3Rpb24tdXRpbHMvYnVpbGQvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDc0I7O0FBRXRCO0FBQ3NCOztBQUV0QjtBQUNzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixPQUFPO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksY0FBYztBQUMxQjtBQUNBO0FBQ0E7QUFDQSxjQUFjLCtDQUErQztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULFFBQVE7QUFDUjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxJQUFJO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLGtDQUFrQyxJQUFJO0FBQ3RDO0FBQ0EsZ0NBQWdDLDJDQUEyQyx3QkFBd0IsRUFBRTtBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7O0FBRUE7QUFDc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzhCO0FBQ2U7QUFDN0MsbUJBQW1CLG1EQUFPO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIscUNBQXFDO0FBQ2xFO0FBQ0E7QUFDQSxXQUFXLHlEQUFnQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0EsQ0FBQztBQStCQztBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGt1ZHJ5XFxEb2N1bWVudHNcXFJlYWN0UHJvamVjdHNcXHJlYWN0LW5vdGlvbi14XFxwYWNrYWdlc1xcbm90aW9uLXV0aWxzXFxidWlsZFxcaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2VzdGltYXRlLXBhZ2UtcmVhZC10aW1lLnRzXG5pbXBvcnQgXCJub3Rpb24tdHlwZXNcIjtcblxuLy8gc3JjL2dldC1ibG9jay10aXRsZS50c1xuaW1wb3J0IFwibm90aW9uLXR5cGVzXCI7XG5cbi8vIHNyYy9nZXQtYmxvY2stY29sbGVjdGlvbi1pZC50c1xuaW1wb3J0IFwibm90aW9uLXR5cGVzXCI7XG5mdW5jdGlvbiBnZXRCbG9ja0NvbGxlY3Rpb25JZChibG9jaywgcmVjb3JkTWFwKSB7XG4gIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZztcbiAgY29uc3QgY29sbGVjdGlvbklkID0gYmxvY2suY29sbGVjdGlvbl9pZCB8fCAoKF9iID0gKF9hID0gYmxvY2suZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX2EuY29sbGVjdGlvbl9wb2ludGVyKSA9PSBudWxsID8gdm9pZCAwIDogX2IuaWQpO1xuICBpZiAoY29sbGVjdGlvbklkKSB7XG4gICAgcmV0dXJuIGNvbGxlY3Rpb25JZDtcbiAgfVxuICBjb25zdCBjb2xsZWN0aW9uVmlld0lkID0gKF9jID0gYmxvY2sgPT0gbnVsbCA/IHZvaWQgMCA6IGJsb2NrLnZpZXdfaWRzKSA9PSBudWxsID8gdm9pZCAwIDogX2NbMF07XG4gIGlmIChjb2xsZWN0aW9uVmlld0lkKSB7XG4gICAgY29uc3QgY29sbGVjdGlvblZpZXcgPSAoX2UgPSAoX2QgPSByZWNvcmRNYXAuY29sbGVjdGlvbl92aWV3KSA9PSBudWxsID8gdm9pZCAwIDogX2RbY29sbGVjdGlvblZpZXdJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfZS52YWx1ZTtcbiAgICBpZiAoY29sbGVjdGlvblZpZXcpIHtcbiAgICAgIGNvbnN0IGNvbGxlY3Rpb25JZDIgPSAoX2cgPSAoX2YgPSBjb2xsZWN0aW9uVmlldy5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfZi5jb2xsZWN0aW9uX3BvaW50ZXIpID09IG51bGwgPyB2b2lkIDAgOiBfZy5pZDtcbiAgICAgIHJldHVybiBjb2xsZWN0aW9uSWQyO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLy8gc3JjL2dldC10ZXh0LWNvbnRlbnQudHNcbnZhciBnZXRUZXh0Q29udGVudCA9ICh0ZXh0KSA9PiB7XG4gIHZhciBfYTtcbiAgaWYgKCF0ZXh0KSB7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh0ZXh0KSkge1xuICAgIHJldHVybiAoX2EgPSB0ZXh0ID09IG51bGwgPyB2b2lkIDAgOiB0ZXh0LnJlZHVjZShcbiAgICAgIChwcmV2LCBjdXJyZW50KSA9PiBwcmV2ICsgKGN1cnJlbnRbMF0gIT09IFwiXFx1MjA0RFwiICYmIGN1cnJlbnRbMF0gIT09IFwiXFx1MjAyM1wiID8gY3VycmVudFswXSA6IFwiXCIpLFxuICAgICAgXCJcIlxuICAgICkpICE9IG51bGwgPyBfYSA6IFwiXCI7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRleHQ7XG4gIH1cbn07XG5cbi8vIHNyYy9nZXQtYmxvY2stdGl0bGUudHNcbmZ1bmN0aW9uIGdldEJsb2NrVGl0bGUoYmxvY2ssIHJlY29yZE1hcCkge1xuICB2YXIgX2EsIF9iO1xuICBpZiAoKF9hID0gYmxvY2sucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnRpdGxlKSB7XG4gICAgcmV0dXJuIGdldFRleHRDb250ZW50KGJsb2NrLnByb3BlcnRpZXMudGl0bGUpO1xuICB9XG4gIGlmIChibG9jay50eXBlID09PSBcImNvbGxlY3Rpb25fdmlld19wYWdlXCIgfHwgYmxvY2sudHlwZSA9PT0gXCJjb2xsZWN0aW9uX3ZpZXdcIikge1xuICAgIGNvbnN0IGNvbGxlY3Rpb25JZCA9IGdldEJsb2NrQ29sbGVjdGlvbklkKGJsb2NrLCByZWNvcmRNYXApO1xuICAgIGlmIChjb2xsZWN0aW9uSWQpIHtcbiAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSAoX2IgPSByZWNvcmRNYXAuY29sbGVjdGlvbltjb2xsZWN0aW9uSWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2IudmFsdWU7XG4gICAgICBpZiAoY29sbGVjdGlvbikge1xuICAgICAgICByZXR1cm4gZ2V0VGV4dENvbnRlbnQoY29sbGVjdGlvbi5uYW1lKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIFwiXCI7XG59XG5cbi8vIHNyYy9nZXQtcGFnZS10YWJsZS1vZi1jb250ZW50cy50c1xudmFyIGluZGVudExldmVscyA9IHtcbiAgaGVhZGVyOiAwLFxuICBzdWJfaGVhZGVyOiAxLFxuICBzdWJfc3ViX2hlYWRlcjogMlxufTtcbnZhciBnZXRQYWdlVGFibGVPZkNvbnRlbnRzID0gKHBhZ2UsIHJlY29yZE1hcCkgPT4ge1xuICBmdW5jdGlvbiBtYXBDb250ZW50VG9FbnRyaWVzKGNvbnRlbnQpIHtcbiAgICByZXR1cm4gKGNvbnRlbnQgIT0gbnVsbCA/IGNvbnRlbnQgOiBbXSkubWFwKChibG9ja0lkKSA9PiB7XG4gICAgICB2YXIgX2EsIF9iO1xuICAgICAgY29uc3QgYmxvY2sgPSAoX2EgPSByZWNvcmRNYXAuYmxvY2tbYmxvY2tJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYS52YWx1ZTtcbiAgICAgIGlmIChibG9jaykge1xuICAgICAgICBjb25zdCB7IHR5cGUgfSA9IGJsb2NrO1xuICAgICAgICBpZiAodHlwZSA9PT0gXCJoZWFkZXJcIiB8fCB0eXBlID09PSBcInN1Yl9oZWFkZXJcIiB8fCB0eXBlID09PSBcInN1Yl9zdWJfaGVhZGVyXCIpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IGJsb2NrSWQsXG4gICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgdGV4dDogZ2V0VGV4dENvbnRlbnQoKF9iID0gYmxvY2sucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnRpdGxlKSxcbiAgICAgICAgICAgIGluZGVudExldmVsOiBpbmRlbnRMZXZlbHNbdHlwZV1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlID09PSBcInRyYW5zY2x1c2lvbl9jb250YWluZXJcIikge1xuICAgICAgICAgIHJldHVybiBtYXBDb250ZW50VG9FbnRyaWVzKGJsb2NrLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9KTtcbiAgfVxuICBjb25zdCB0b2MgPSBtYXBDb250ZW50VG9FbnRyaWVzKHBhZ2UuY29udGVudCkuZmxhdCgpLmZpbHRlcihCb29sZWFuKTtcbiAgY29uc3QgaW5kZW50TGV2ZWxTdGFjayA9IFtcbiAgICB7XG4gICAgICBhY3R1YWw6IC0xLFxuICAgICAgZWZmZWN0aXZlOiAtMVxuICAgIH1cbiAgXTtcbiAgZm9yIChjb25zdCB0b2NJdGVtIG9mIHRvYykge1xuICAgIGNvbnN0IHsgaW5kZW50TGV2ZWwgfSA9IHRvY0l0ZW07XG4gICAgY29uc3QgYWN0dWFsID0gaW5kZW50TGV2ZWw7XG4gICAgZG8ge1xuICAgICAgY29uc3QgcHJldkluZGVudCA9IGluZGVudExldmVsU3RhY2suYXQoLTEpO1xuICAgICAgY29uc3QgeyBhY3R1YWw6IHByZXZBY3R1YWwsIGVmZmVjdGl2ZTogcHJldkVmZmVjdGl2ZSB9ID0gcHJldkluZGVudDtcbiAgICAgIGlmIChhY3R1YWwgPiBwcmV2QWN0dWFsKSB7XG4gICAgICAgIHRvY0l0ZW0uaW5kZW50TGV2ZWwgPSBwcmV2RWZmZWN0aXZlICsgMTtcbiAgICAgICAgaW5kZW50TGV2ZWxTdGFjay5wdXNoKHtcbiAgICAgICAgICBhY3R1YWwsXG4gICAgICAgICAgZWZmZWN0aXZlOiB0b2NJdGVtLmluZGVudExldmVsXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChhY3R1YWwgPT09IHByZXZBY3R1YWwpIHtcbiAgICAgICAgdG9jSXRlbS5pbmRlbnRMZXZlbCA9IHByZXZFZmZlY3RpdmU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5kZW50TGV2ZWxTdGFjay5wb3AoKTtcbiAgICAgIH1cbiAgICB9IHdoaWxlICh0cnVlKTtcbiAgfVxuICByZXR1cm4gdG9jO1xufTtcblxuLy8gc3JjL2VzdGltYXRlLXBhZ2UtcmVhZC10aW1lLnRzXG5mdW5jdGlvbiBlc3RpbWF0ZVBhZ2VSZWFkVGltZShibG9jaywgcmVjb3JkTWFwLCB7XG4gIHdvcmRzUGVyTWludXRlID0gMjc1LFxuICBpbWFnZVJlYWRUaW1lSW5TZWNvbmRzID0gMTJcbn0gPSB7fSkge1xuICBjb25zdCBzdGF0cyA9IGdldEJsb2NrQ29udGVudFN0YXRzKGJsb2NrLCByZWNvcmRNYXApO1xuICBjb25zdCB0b3RhbFdvcmRzUmVhZFRpbWVJbk1pbnV0ZXMgPSBzdGF0cy5udW1Xb3JkcyAvIHdvcmRzUGVyTWludXRlO1xuICBjb25zdCB0b3RhbEltYWdlUmVhZFRpbWVJblNlY29uZHMgPSBzdGF0cy5udW1JbWFnZXMgPiAxMCA/IHN0YXRzLm51bUltYWdlcyAvIDIgKiAoaW1hZ2VSZWFkVGltZUluU2Vjb25kcyArIDMpICsgKHN0YXRzLm51bUltYWdlcyAtIDEwKSAqIDMgOiBzdGF0cy5udW1JbWFnZXMgLyAyICogKDIgKiBpbWFnZVJlYWRUaW1lSW5TZWNvbmRzICsgKDEgLSBzdGF0cy5udW1JbWFnZXMpKTtcbiAgY29uc3QgdG90YWxJbWFnZVJlYWRUaW1lSW5NaW51dGVzID0gdG90YWxJbWFnZVJlYWRUaW1lSW5TZWNvbmRzIC8gNjA7XG4gIGNvbnN0IHRvdGFsUmVhZFRpbWVJbk1pbnV0ZXMgPSB0b3RhbFdvcmRzUmVhZFRpbWVJbk1pbnV0ZXMgKyB0b3RhbEltYWdlUmVhZFRpbWVJbk1pbnV0ZXM7XG4gIHJldHVybiB7XG4gICAgLi4uc3RhdHMsXG4gICAgdG90YWxXb3Jkc1JlYWRUaW1lSW5NaW51dGVzLFxuICAgIHRvdGFsSW1hZ2VSZWFkVGltZUluTWludXRlcyxcbiAgICB0b3RhbFJlYWRUaW1lSW5NaW51dGVzXG4gIH07XG59XG5mdW5jdGlvbiBlc3RpbWF0ZVBhZ2VSZWFkVGltZUFzSHVtYW5pemVkU3RyaW5nKGJsb2NrLCByZWNvcmRNYXAsIG9wdHMpIHtcbiAgY29uc3QgZXN0aW1hdGUgPSBlc3RpbWF0ZVBhZ2VSZWFkVGltZShibG9jaywgcmVjb3JkTWFwLCBvcHRzKTtcbiAgcmV0dXJuIGh1bWFuaXplUmVhZFRpbWUoZXN0aW1hdGUudG90YWxSZWFkVGltZUluTWludXRlcyk7XG59XG5mdW5jdGlvbiBnZXRCbG9ja0NvbnRlbnRTdGF0cyhibG9jaywgcmVjb3JkTWFwKSB7XG4gIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgY29uc3Qgc3RhdHMgPSB7XG4gICAgbnVtV29yZHM6IDAsXG4gICAgbnVtSW1hZ2VzOiAwXG4gIH07XG4gIGlmICghYmxvY2spIHtcbiAgICByZXR1cm4gc3RhdHM7XG4gIH1cbiAgZm9yIChjb25zdCBjaGlsZElkIG9mIGJsb2NrLmNvbnRlbnQgfHwgW10pIHtcbiAgICBjb25zdCBjaGlsZCA9IChfYSA9IHJlY29yZE1hcC5ibG9ja1tjaGlsZElkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnZhbHVlO1xuICAgIGxldCByZWN1cnNlID0gZmFsc2U7XG4gICAgaWYgKCFjaGlsZCkgY29udGludWU7XG4gICAgc3dpdGNoIChjaGlsZC50eXBlKSB7XG4gICAgICBjYXNlIFwicXVvdGVcIjpcbiAgICAgIC8vIGZhbGx0aHJvdWdoXG4gICAgICBjYXNlIFwiYWxpYXNcIjpcbiAgICAgIC8vIGZhbGx0aHJvdWdoXG4gICAgICBjYXNlIFwiaGVhZGVyXCI6XG4gICAgICAvLyBmYWxsdGhyb3VnaFxuICAgICAgY2FzZSBcInN1Yl9oZWFkZXJcIjpcbiAgICAgIC8vIGZhbGx0aHJvdWdoXG4gICAgICBjYXNlIFwic3ViX3N1Yl9oZWFkZXJcIjoge1xuICAgICAgICBjb25zdCB0aXRsZSA9IGdldEJsb2NrVGl0bGUoY2hpbGQsIHJlY29yZE1hcCk7XG4gICAgICAgIHN0YXRzLm51bVdvcmRzICs9IGNvdW50V29yZHNJblRleHQodGl0bGUpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJjYWxsb3V0XCI6XG4gICAgICAvLyBmYWxsdGhyb3VnaFxuICAgICAgY2FzZSBcInRvZ2dsZVwiOlxuICAgICAgLy8gZmFsbHRocm91Z2hcbiAgICAgIGNhc2UgXCJ0b19kb1wiOlxuICAgICAgLy8gZmFsbHRocm91Z2hcbiAgICAgIGNhc2UgXCJidWxsZXRlZF9saXN0XCI6XG4gICAgICAvLyBmYWxsdGhyb3VnaFxuICAgICAgY2FzZSBcIm51bWJlcmVkX2xpc3RcIjpcbiAgICAgIC8vIGZhbGx0aHJvdWdoXG4gICAgICBjYXNlIFwidGV4dFwiOiB7XG4gICAgICAgIGNvbnN0IHRpdGxlID0gZ2V0QmxvY2tUaXRsZShjaGlsZCwgcmVjb3JkTWFwKTtcbiAgICAgICAgc3RhdHMubnVtV29yZHMgKz0gY291bnRXb3Jkc0luVGV4dCh0aXRsZSk7XG4gICAgICAgIHJlY3Vyc2UgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJlbWJlZFwiOlxuICAgICAgLy8gZmFsbHRocm91Z2hcbiAgICAgIGNhc2UgXCJ0d2VldFwiOlxuICAgICAgLy8gZmFsbHRocm91Z2hcbiAgICAgIGNhc2UgXCJtYXBzXCI6XG4gICAgICAvLyBmYWxsdGhyb3VnaFxuICAgICAgY2FzZSBcInBkZlwiOlxuICAgICAgLy8gZmFsbHRocm91Z2hcbiAgICAgIGNhc2UgXCJmaWdtYVwiOlxuICAgICAgLy8gZmFsbHRocm91Z2hcbiAgICAgIGNhc2UgXCJ0eXBlZm9ybVwiOlxuICAgICAgLy8gZmFsbHRocm91Z2hcbiAgICAgIGNhc2UgXCJjb2RlcGVuXCI6XG4gICAgICAvLyBmYWxsdGhyb3VnaFxuICAgICAgY2FzZSBcImV4Y2FsaWRyYXdcIjpcbiAgICAgIC8vIGZhbGx0aHJvdWdoXG4gICAgICBjYXNlIFwiZ2lzdFwiOlxuICAgICAgLy8gZmFsbHRocm91Z2hcbiAgICAgIGNhc2UgXCJ2aWRlb1wiOlxuICAgICAgLy8gZmFsbHRocm91Z2hcbiAgICAgIGNhc2UgXCJkcml2ZVwiOlxuICAgICAgLy8gZmFsbHRocm91Z2hcbiAgICAgIGNhc2UgXCJhdWRpb1wiOlxuICAgICAgLy8gZmFsbHRocm91Z2hcbiAgICAgIGNhc2UgXCJmaWxlXCI6XG4gICAgICAvLyBmYWxsdGhyb3VnaFxuICAgICAgY2FzZSBcImltYWdlXCI6XG4gICAgICAgIHN0YXRzLm51bUltYWdlcyArPSAxO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJib29rbWFya1wiOlxuICAgICAgICBzdGF0cy5udW1JbWFnZXMgKz0gMC4yNTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiY29kZVwiOlxuICAgICAgICBzdGF0cy5udW1JbWFnZXMgKz0gMjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwidGFibGVcIjpcbiAgICAgIC8vIGZhbGx0aHJvdWdoXG4gICAgICBjYXNlIFwiY29sbGVjdGlvbl92aWV3XCI6XG4gICAgICAgIHN0YXRzLm51bUltYWdlcyArPSAyO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJjb2x1bW5cIjpcbiAgICAgIC8vIGZhbGx0aHJvdWdoXG4gICAgICBjYXNlIFwiY29sdW1uX2xpc3RcIjpcbiAgICAgIC8vIGZhbGx0aHJvdWdoXG4gICAgICBjYXNlIFwidHJhbnNjbHVzaW9uX2NvbnRhaW5lclwiOlxuICAgICAgICByZWN1cnNlID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwidGFibGVfb2ZfY29udGVudHNcIjoge1xuICAgICAgICBjb25zdCBwYWdlID0gYmxvY2s7XG4gICAgICAgIGlmICghcGFnZSkgY29udGludWU7XG4gICAgICAgIGNvbnN0IHRvYyA9IGdldFBhZ2VUYWJsZU9mQ29udGVudHMocGFnZSwgcmVjb3JkTWFwKTtcbiAgICAgICAgZm9yIChjb25zdCB0b2NJdGVtIG9mIHRvYykge1xuICAgICAgICAgIHN0YXRzLm51bVdvcmRzICs9IGNvdW50V29yZHNJblRleHQodG9jSXRlbS50ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJ0cmFuc2NsdXNpb25fcmVmZXJlbmNlXCI6IHtcbiAgICAgICAgY29uc3QgcmVmZXJlbmNlUG9pbnRlcklkID0gKF9jID0gKF9iID0gY2hpbGQgPT0gbnVsbCA/IHZvaWQgMCA6IGNoaWxkLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnRyYW5zY2x1c2lvbl9yZWZlcmVuY2VfcG9pbnRlcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmlkO1xuICAgICAgICBpZiAoIXJlZmVyZW5jZVBvaW50ZXJJZCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlZmVyZW5jZUJsb2NrID0gKF9kID0gcmVjb3JkTWFwLmJsb2NrW3JlZmVyZW5jZVBvaW50ZXJJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfZC52YWx1ZTtcbiAgICAgICAgaWYgKHJlZmVyZW5jZUJsb2NrKSB7XG4gICAgICAgICAgbWVyZ2VDb250ZW50U3RhdHMoXG4gICAgICAgICAgICBzdGF0cyxcbiAgICAgICAgICAgIGdldEJsb2NrQ29udGVudFN0YXRzKHJlZmVyZW5jZUJsb2NrLCByZWNvcmRNYXApXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZiAocmVjdXJzZSkge1xuICAgICAgbWVyZ2VDb250ZW50U3RhdHMoc3RhdHMsIGdldEJsb2NrQ29udGVudFN0YXRzKGNoaWxkLCByZWNvcmRNYXApKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHN0YXRzO1xufVxuZnVuY3Rpb24gbWVyZ2VDb250ZW50U3RhdHMoc3RhdHNBLCBzdGF0c0IpIHtcbiAgc3RhdHNBLm51bVdvcmRzICs9IHN0YXRzQi5udW1Xb3JkcztcbiAgc3RhdHNBLm51bUltYWdlcyArPSBzdGF0c0IubnVtSW1hZ2VzO1xufVxuZnVuY3Rpb24gY291bnRXb3Jkc0luVGV4dCh0ZXh0KSB7XG4gIGlmICghdGV4dCkge1xuICAgIHJldHVybiAwO1xuICB9XG4gIHJldHVybiAodGV4dC5tYXRjaCgvXFx3Ky9nKSB8fCBbXSkubGVuZ3RoO1xufVxuZnVuY3Rpb24gaHVtYW5pemVSZWFkVGltZSh0aW1lKSB7XG4gIGlmICh0aW1lIDwgMC41KSB7XG4gICAgcmV0dXJuIFwibGVzcyB0aGFuIGEgbWludXRlXCI7XG4gIH1cbiAgaWYgKHRpbWUgPCAxLjUpIHtcbiAgICByZXR1cm4gXCIxIG1pbnV0ZVwiO1xuICB9XG4gIHJldHVybiBgJHtNYXRoLmNlaWwodGltZSl9IG1pbnV0ZXNgO1xufVxuXG4vLyBzcmMvZm9ybWF0LWRhdGUudHNcbnZhciBmb3JtYXREYXRlID0gKGlucHV0LCB7IG1vbnRoID0gXCJzaG9ydFwiIH0gPSB7fSkgPT4ge1xuICBjb25zdCBkYXRlID0gbmV3IERhdGUoaW5wdXQpO1xuICBjb25zdCBtb250aExvY2FsZSA9IGRhdGUudG9Mb2NhbGVTdHJpbmcoXCJlbi1VU1wiLCB7IG1vbnRoIH0pO1xuICByZXR1cm4gYCR7bW9udGhMb2NhbGV9ICR7ZGF0ZS5nZXRVVENEYXRlKCl9LCAke2RhdGUuZ2V0VVRDRnVsbFllYXIoKX1gO1xufTtcblxuLy8gc3JjL2Zvcm1hdC1ub3Rpb24tZGF0ZS10aW1lLnRzXG52YXIgZm9ybWF0Tm90aW9uRGF0ZVRpbWUgPSAoZGF0ZXRpbWUpID0+IHtcbiAgY29uc3QgZGF0ZVN0cmluZyA9IGAke2RhdGV0aW1lLnN0YXJ0X2RhdGV9VCR7ZGF0ZXRpbWUuc3RhcnRfdGltZSB8fCBcIjAwOjAwXCJ9KzAwOjAwYDtcbiAgcmV0dXJuIGZvcm1hdERhdGUoZGF0ZVN0cmluZyk7XG59O1xuXG4vLyBzcmMvZ2V0LWFsbC1wYWdlcy1pbi1zcGFjZS50c1xuaW1wb3J0IFwibm90aW9uLXR5cGVzXCI7XG5pbXBvcnQgUFF1ZXVlIGZyb20gXCJwLXF1ZXVlXCI7XG5cbi8vIHNyYy9pZC10by11dWlkLnRzXG52YXIgaWRUb1V1aWQgPSAoaWQgPSBcIlwiKSA9PiBgJHtpZC5zbGljZSgwLCA4KX0tJHtpZC5zbGljZSg4LCAxMil9LSR7aWQuc2xpY2UoMTIsIDE2KX0tJHtpZC5zbGljZShcbiAgMTYsXG4gIDIwXG4pfS0ke2lkLnNsaWNlKDIwKX1gO1xuXG4vLyBzcmMvcGFyc2UtcGFnZS1pZC50c1xudmFyIHBhZ2VJZFJlID0gL1xcYihbXFxkYS1mXXszMn0pXFxiLztcbnZhciBwYWdlSWQyUmUgPSAvXFxiKFtcXGRhLWZdezh9KD86LVtcXGRhLWZdezR9KXszfS1bXFxkYS1mXXsxMn0pXFxiLztcbnZhciBwYXJzZVBhZ2VJZCA9IChpZCA9IFwiXCIsIHsgdXVpZCA9IHRydWUgfSA9IHt9KSA9PiB7XG4gIGlmICghaWQpIHJldHVybjtcbiAgaWQgPSBpZC5zcGxpdChcIj9cIilbMF07XG4gIGlmICghaWQpIHJldHVybjtcbiAgY29uc3QgbWF0Y2ggPSBpZC5tYXRjaChwYWdlSWRSZSk7XG4gIGlmIChtYXRjaCkge1xuICAgIHJldHVybiB1dWlkID8gaWRUb1V1aWQobWF0Y2hbMV0pIDogbWF0Y2hbMV07XG4gIH1cbiAgY29uc3QgbWF0Y2gyID0gaWQubWF0Y2gocGFnZUlkMlJlKTtcbiAgaWYgKG1hdGNoMikge1xuICAgIHJldHVybiB1dWlkID8gbWF0Y2gyWzFdIDogbWF0Y2gyWzFdLnJlcGxhY2VBbGwoXCItXCIsIFwiXCIpO1xuICB9XG4gIHJldHVybjtcbn07XG5cbi8vIHNyYy9nZXQtYWxsLXBhZ2VzLWluLXNwYWNlLnRzXG5hc3luYyBmdW5jdGlvbiBnZXRBbGxQYWdlc0luU3BhY2Uocm9vdFBhZ2VJZCwgcm9vdFNwYWNlSWQsIGdldFBhZ2UsIHtcbiAgY29uY3VycmVuY3kgPSA0LFxuICB0cmF2ZXJzZUNvbGxlY3Rpb25zID0gdHJ1ZSxcbiAgdGFyZ2V0UGFnZUlkLFxuICBtYXhEZXB0aCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWVxufSA9IHt9KSB7XG4gIGNvbnN0IHBhZ2VzID0ge307XG4gIGNvbnN0IHBlbmRpbmdQYWdlSWRzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgY29uc3QgcXVldWUgPSBuZXcgUFF1ZXVlKHsgY29uY3VycmVuY3kgfSk7XG4gIGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NQYWdlKHBhZ2VJZCwgZGVwdGggPSAwKSB7XG4gICAgaWYgKGRlcHRoID4gbWF4RGVwdGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRhcmdldFBhZ2VJZCAmJiBwZW5kaW5nUGFnZUlkcy5oYXModGFyZ2V0UGFnZUlkKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBwYWdlSWQgPSBwYXJzZVBhZ2VJZChwYWdlSWQpO1xuICAgIGlmIChwYWdlSWQgJiYgIXBhZ2VzW3BhZ2VJZF0gJiYgIXBlbmRpbmdQYWdlSWRzLmhhcyhwYWdlSWQpKSB7XG4gICAgICBwZW5kaW5nUGFnZUlkcy5hZGQocGFnZUlkKTtcbiAgICAgIHZvaWQgcXVldWUuYWRkKGFzeW5jICgpID0+IHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAodGFyZ2V0UGFnZUlkICYmIHBlbmRpbmdQYWdlSWRzLmhhcyh0YXJnZXRQYWdlSWQpICYmIHBhZ2VJZCAhPT0gdGFyZ2V0UGFnZUlkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCBnZXRQYWdlKHBhZ2VJZCk7XG4gICAgICAgICAgaWYgKCFwYWdlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHNwYWNlSWQgPSAoX2IgPSAoX2EgPSBwYWdlLmJsb2NrW3BhZ2VJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYS52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnNwYWNlX2lkO1xuICAgICAgICAgIGlmIChzcGFjZUlkKSB7XG4gICAgICAgICAgICBpZiAoIXJvb3RTcGFjZUlkKSB7XG4gICAgICAgICAgICAgIHJvb3RTcGFjZUlkID0gc3BhY2VJZDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocm9vdFNwYWNlSWQgIT09IHNwYWNlSWQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGNvbnN0IHN1YlBhZ2VJZCBvZiBPYmplY3Qua2V5cyhwYWdlLmJsb2NrKS5maWx0ZXIoKGtleSkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hMjtcbiAgICAgICAgICAgIGNvbnN0IGJsb2NrID0gKF9hMiA9IHBhZ2UuYmxvY2tba2V5XSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi52YWx1ZTtcbiAgICAgICAgICAgIGlmICghYmxvY2sgfHwgYmxvY2suYWxpdmUgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBpZiAoYmxvY2sudHlwZSAhPT0gXCJwYWdlXCIgJiYgYmxvY2sudHlwZSAhPT0gXCJjb2xsZWN0aW9uX3ZpZXdfcGFnZVwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb290U3BhY2VJZCAmJiBibG9jay5zcGFjZV9pZCAmJiBibG9jay5zcGFjZV9pZCAhPT0gcm9vdFNwYWNlSWQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgIHZvaWQgcHJvY2Vzc1BhZ2Uoc3ViUGFnZUlkLCBkZXB0aCArIDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodHJhdmVyc2VDb2xsZWN0aW9ucykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBjb2xsZWN0aW9uVmlld3Mgb2YgT2JqZWN0LnZhbHVlcyhcbiAgICAgICAgICAgICAgcGFnZS5jb2xsZWN0aW9uX3F1ZXJ5XG4gICAgICAgICAgICApKSB7XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgY29sbGVjdGlvbkRhdGEgb2YgT2JqZWN0LnZhbHVlcyhjb2xsZWN0aW9uVmlld3MpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBibG9ja0lkcyB9ID0gY29sbGVjdGlvbkRhdGE7XG4gICAgICAgICAgICAgICAgaWYgKGJsb2NrSWRzKSB7XG4gICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNvbGxlY3Rpb25JdGVtSWQgb2YgYmxvY2tJZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdm9pZCBwcm9jZXNzUGFnZShjb2xsZWN0aW9uSXRlbUlkLCBkZXB0aCArIDEpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBwYWdlc1twYWdlSWRdID0gcGFnZTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgXCJwYWdlIGxvYWQgZXJyb3JcIixcbiAgICAgICAgICAgIHsgcGFnZUlkLCBzcGFjZUlkOiByb290U3BhY2VJZCB9LFxuICAgICAgICAgICAgZXJyLnN0YXR1c0NvZGUsXG4gICAgICAgICAgICBlcnIubWVzc2FnZVxuICAgICAgICAgICk7XG4gICAgICAgICAgcGFnZXNbcGFnZUlkXSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcGVuZGluZ1BhZ2VJZHMuZGVsZXRlKHBhZ2VJZCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgYXdhaXQgcHJvY2Vzc1BhZ2Uocm9vdFBhZ2VJZCk7XG4gIGF3YWl0IHF1ZXVlLm9uSWRsZSgpO1xuICByZXR1cm4gcGFnZXM7XG59XG5cbi8vIHNyYy9nZXQtYmxvY2staWNvbi50c1xuaW1wb3J0IFwibm90aW9uLXR5cGVzXCI7XG5mdW5jdGlvbiBnZXRCbG9ja0ljb24oYmxvY2ssIHJlY29yZE1hcCkge1xuICB2YXIgX2EsIF9iLCBfYztcbiAgaWYgKChfYSA9IGJsb2NrLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnBhZ2VfaWNvbikge1xuICAgIHJldHVybiAoX2IgPSBibG9jay5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfYi5wYWdlX2ljb247XG4gIH1cbiAgaWYgKGJsb2NrLnR5cGUgPT09IFwiY29sbGVjdGlvbl92aWV3X3BhZ2VcIiB8fCBibG9jay50eXBlID09PSBcImNvbGxlY3Rpb25fdmlld1wiKSB7XG4gICAgY29uc3QgY29sbGVjdGlvbklkID0gZ2V0QmxvY2tDb2xsZWN0aW9uSWQoYmxvY2ssIHJlY29yZE1hcCk7XG4gICAgaWYgKGNvbGxlY3Rpb25JZCkge1xuICAgICAgY29uc3QgY29sbGVjdGlvbiA9IChfYyA9IHJlY29yZE1hcC5jb2xsZWN0aW9uW2NvbGxlY3Rpb25JZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYy52YWx1ZTtcbiAgICAgIGlmIChjb2xsZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBjb2xsZWN0aW9uLmljb247XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG4vLyBzcmMvZ2V0LWJsb2NrLXBhcmVudC1wYWdlLnRzXG52YXIgZ2V0QmxvY2tQYXJlbnRQYWdlID0gKGJsb2NrLCByZWNvcmRNYXAsIHtcbiAgaW5jbHVzaXZlID0gZmFsc2Vcbn0gPSB7fSkgPT4ge1xuICB2YXIgX2EsIF9iO1xuICBsZXQgY3VycmVudFJlY29yZCA9IGJsb2NrO1xuICB3aGlsZSAoY3VycmVudFJlY29yZCkge1xuICAgIGlmIChpbmNsdXNpdmUgJiYgKGN1cnJlbnRSZWNvcmQgPT0gbnVsbCA/IHZvaWQgMCA6IGN1cnJlbnRSZWNvcmQudHlwZSkgPT09IFwicGFnZVwiKSB7XG4gICAgICByZXR1cm4gY3VycmVudFJlY29yZDtcbiAgICB9XG4gICAgY29uc3QgcGFyZW50SWQgPSBjdXJyZW50UmVjb3JkLnBhcmVudF9pZDtcbiAgICBjb25zdCBwYXJlbnRUYWJsZSA9IGN1cnJlbnRSZWNvcmQucGFyZW50X3RhYmxlO1xuICAgIGlmICghcGFyZW50SWQpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZiAocGFyZW50VGFibGUgPT09IFwiY29sbGVjdGlvblwiKSB7XG4gICAgICBjdXJyZW50UmVjb3JkID0gKF9hID0gcmVjb3JkTWFwLmNvbGxlY3Rpb25bcGFyZW50SWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2EudmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGN1cnJlbnRSZWNvcmQgPSAoX2IgPSByZWNvcmRNYXAuYmxvY2tbcGFyZW50SWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2IudmFsdWU7XG4gICAgICBpZiAoKGN1cnJlbnRSZWNvcmQgPT0gbnVsbCA/IHZvaWQgMCA6IGN1cnJlbnRSZWNvcmQudHlwZSkgPT09IFwicGFnZVwiKSB7XG4gICAgICAgIHJldHVybiBjdXJyZW50UmVjb3JkO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbi8vIHNyYy9nZXQtY2Fub25pY2FsLXBhZ2UtaWQudHNcbmltcG9ydCBcIm5vdGlvbi10eXBlc1wiO1xuXG4vLyBzcmMvZ2V0LXBhZ2UtcHJvcGVydHkudHNcbmltcG9ydCBcIm5vdGlvbi10eXBlc1wiO1xuZnVuY3Rpb24gZ2V0UGFnZVByb3BlcnR5KHByb3BlcnR5TmFtZSwgYmxvY2ssIHJlY29yZE1hcCkge1xuICB2YXIgX2E7XG4gIHRyeSB7XG4gICAgaWYgKCFibG9jay5wcm9wZXJ0aWVzIHx8ICFPYmplY3Qua2V5cyhyZWNvcmRNYXAuY29sbGVjdGlvbikpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBjb2xsZWN0aW9uID0gKF9hID0gcmVjb3JkTWFwLmNvbGxlY3Rpb25bYmxvY2sucGFyZW50X2lkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnZhbHVlO1xuICAgIGlmIChjb2xsZWN0aW9uKSB7XG4gICAgICBjb25zdCBwcm9wZXJ0eU5hbWVMID0gcHJvcGVydHlOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICBjb25zdCBwcm9wZXJ0eUlkID0gT2JqZWN0LmtleXMoY29sbGVjdGlvbi5zY2hlbWEpLmZpbmQoXG4gICAgICAgIChrZXkpID0+IHtcbiAgICAgICAgICB2YXIgX2EyLCBfYjtcbiAgICAgICAgICByZXR1cm4gKChfYiA9IChfYTIgPSBjb2xsZWN0aW9uLnNjaGVtYVtrZXldKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLm5hbWUpID09IG51bGwgPyB2b2lkIDAgOiBfYi50b0xvd2VyQ2FzZSgpKSA9PT0gcHJvcGVydHlOYW1lTDtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGlmICghcHJvcGVydHlJZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHMgPSBjb2xsZWN0aW9uLnNjaGVtYVtwcm9wZXJ0eUlkXTtcbiAgICAgIGlmICghcykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgdHlwZSB9ID0gcztcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBnZXRUZXh0Q29udGVudChibG9jay5wcm9wZXJ0aWVzW3Byb3BlcnR5SWRdKTtcbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIFwiY3JlYXRlZF90aW1lXCI6XG4gICAgICAgICAgcmV0dXJuIGJsb2NrLmNyZWF0ZWRfdGltZTtcbiAgICAgICAgY2FzZSBcIm11bHRpX3NlbGVjdFwiOlxuICAgICAgICAgIHJldHVybiBjb250ZW50LnNwbGl0KFwiLFwiKTtcbiAgICAgICAgY2FzZSBcImRhdGVcIjoge1xuICAgICAgICAgIGNvbnN0IHByb3BlcnR5ID0gYmxvY2sucHJvcGVydGllc1twcm9wZXJ0eUlkXTtcbiAgICAgICAgICBjb25zdCBmb3JtYXREYXRlMiA9IHByb3BlcnR5WzBdWzFdWzBdWzFdO1xuICAgICAgICAgIGlmIChmb3JtYXREYXRlMi50eXBlID09PSBcImRhdGV0aW1lXCIpIHtcbiAgICAgICAgICAgIHJldHVybiAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKFxuICAgICAgICAgICAgICBgJHtmb3JtYXREYXRlMi5zdGFydF9kYXRlfSAke2Zvcm1hdERhdGUyLnN0YXJ0X3RpbWV9YFxuICAgICAgICAgICAgKSkuZ2V0VGltZSgpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZm9ybWF0RGF0ZTIudHlwZSA9PT0gXCJkYXRlXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShmb3JtYXREYXRlMi5zdGFydF9kYXRlKS5nZXRUaW1lKCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChmb3JtYXREYXRlMi50eXBlID09PSBcImRhdGV0aW1lcmFuZ2VcIikge1xuICAgICAgICAgICAgY29uc3QgeyBzdGFydF9kYXRlLCBzdGFydF90aW1lLCBlbmRfZGF0ZSwgZW5kX3RpbWUgfSA9IGZvcm1hdERhdGUyO1xuICAgICAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZShgJHtzdGFydF9kYXRlfSAke3N0YXJ0X3RpbWV9YCkpLmdldFRpbWUoKTtcbiAgICAgICAgICAgIGNvbnN0IGVuZFRpbWUgPSAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKGAke2VuZF9kYXRlfSAke2VuZF90aW1lfWApKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICByZXR1cm4gW3N0YXJ0VGltZSwgZW5kVGltZV07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IG5ldyBEYXRlKGZvcm1hdERhdGUyLnN0YXJ0X2RhdGUpLmdldFRpbWUoKTtcbiAgICAgICAgICAgIGNvbnN0IGVuZFRpbWUgPSBuZXcgRGF0ZShmb3JtYXREYXRlMi5lbmRfZGF0ZSkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgcmV0dXJuIFtzdGFydFRpbWUsIGVuZFRpbWVdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiY2hlY2tib3hcIjpcbiAgICAgICAgICByZXR1cm4gY29udGVudCA9PT0gXCJZZXNcIjtcbiAgICAgICAgY2FzZSBcImxhc3RfZWRpdGVkX3RpbWVcIjpcbiAgICAgICAgICByZXR1cm4gYmxvY2subGFzdF9lZGl0ZWRfdGltZTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLy8gc3JjL25vcm1hbGl6ZS10aXRsZS50c1xudmFyIG5vcm1hbGl6ZVRpdGxlID0gKHRpdGxlKSA9PiB7XG4gIHJldHVybiAodGl0bGUgfHwgXCJcIikucmVwbGFjZUFsbChcIiBcIiwgXCItXCIpLnJlcGxhY2VBbGwoXG4gICAgL1teXFxkQS1aYS16XFx1MzAwMC1cXHUzMDNGXFx1MzA0MS1cXHUzMDk2XFx1MzBBMS1cXHUzMEZDXFx1NEUwMC1cXHU5RkZGXFx1QUMwMC1cXHVEN0FGLV0vZyxcbiAgICBcIlwiXG4gICkucmVwbGFjZUFsbChcIi0tXCIsIFwiLVwiKS5yZXBsYWNlKC8tJC8sIFwiXCIpLnJlcGxhY2UoL14tLywgXCJcIikudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG59O1xuXG4vLyBzcmMvdXVpZC10by1pZC50c1xudmFyIHV1aWRUb0lkID0gKHV1aWQpID0+IHV1aWQucmVwbGFjZUFsbChcIi1cIiwgXCJcIik7XG5cbi8vIHNyYy9nZXQtY2Fub25pY2FsLXBhZ2UtaWQudHNcbnZhciBnZXRDYW5vbmljYWxQYWdlSWQgPSAocGFnZUlkLCByZWNvcmRNYXAsIHsgdXVpZCA9IHRydWUgfSA9IHt9KSA9PiB7XG4gIHZhciBfYTtcbiAgaWYgKCFwYWdlSWQgfHwgIXJlY29yZE1hcCkgcmV0dXJuIG51bGw7XG4gIGNvbnN0IGlkID0gdXVpZFRvSWQocGFnZUlkKTtcbiAgY29uc3QgYmxvY2sgPSAoX2EgPSByZWNvcmRNYXAuYmxvY2tbcGFnZUlkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnZhbHVlO1xuICBpZiAoYmxvY2spIHtcbiAgICBjb25zdCBzbHVnID0gZ2V0UGFnZVByb3BlcnR5KFwic2x1Z1wiLCBibG9jaywgcmVjb3JkTWFwKSB8fCBnZXRQYWdlUHJvcGVydHkoXCJTbHVnXCIsIGJsb2NrLCByZWNvcmRNYXApIHx8IG5vcm1hbGl6ZVRpdGxlKGdldEJsb2NrVGl0bGUoYmxvY2ssIHJlY29yZE1hcCkpO1xuICAgIGlmIChzbHVnKSB7XG4gICAgICBpZiAodXVpZCkge1xuICAgICAgICByZXR1cm4gYCR7c2x1Z30tJHtpZH1gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNsdWc7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBpZDtcbn07XG5cbi8vIHNyYy9nZXQtZGF0ZS12YWx1ZS50c1xudmFyIGdldERhdGVWYWx1ZSA9IChwcm9wKSA9PiB7XG4gIGlmIChwcm9wICYmIEFycmF5LmlzQXJyYXkocHJvcCkpIHtcbiAgICBpZiAocHJvcFswXSA9PT0gXCJkXCIpIHtcbiAgICAgIHJldHVybiBwcm9wWzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGNvbnN0IHYgb2YgcHJvcCkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGdldERhdGVWYWx1ZSh2KTtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuLy8gc3JjL2dldC1wYWdlLWJyZWFkY3J1bWJzLnRzXG52YXIgZ2V0UGFnZUJyZWFkY3J1bWJzID0gKHJlY29yZE1hcCwgYWN0aXZlUGFnZUlkKSA9PiB7XG4gIHZhciBfYTtcbiAgY29uc3QgYmxvY2tNYXAgPSByZWNvcmRNYXAuYmxvY2s7XG4gIGNvbnN0IGJyZWFkY3J1bWJzID0gW107XG4gIGxldCBjdXJyZW50UGFnZUlkID0gYWN0aXZlUGFnZUlkO1xuICBkbyB7XG4gICAgY29uc3QgYmxvY2sgPSAoX2EgPSBibG9ja01hcFtjdXJyZW50UGFnZUlkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnZhbHVlO1xuICAgIGlmICghYmxvY2spIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjb25zdCB0aXRsZSA9IGdldEJsb2NrVGl0bGUoYmxvY2ssIHJlY29yZE1hcCk7XG4gICAgY29uc3QgaWNvbiA9IGdldEJsb2NrSWNvbihibG9jaywgcmVjb3JkTWFwKTtcbiAgICBpZiAoISh0aXRsZSB8fCBpY29uKSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGJyZWFkY3J1bWJzLnB1c2goe1xuICAgICAgYmxvY2ssXG4gICAgICBhY3RpdmU6IGN1cnJlbnRQYWdlSWQgPT09IGFjdGl2ZVBhZ2VJZCxcbiAgICAgIHBhZ2VJZDogY3VycmVudFBhZ2VJZCxcbiAgICAgIHRpdGxlLFxuICAgICAgaWNvblxuICAgIH0pO1xuICAgIGNvbnN0IHBhcmVudEJsb2NrID0gZ2V0QmxvY2tQYXJlbnRQYWdlKGJsb2NrLCByZWNvcmRNYXApO1xuICAgIGNvbnN0IHBhcmVudElkID0gcGFyZW50QmxvY2sgPT0gbnVsbCA/IHZvaWQgMCA6IHBhcmVudEJsb2NrLmlkO1xuICAgIGlmICghcGFyZW50SWQpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjdXJyZW50UGFnZUlkID0gcGFyZW50SWQ7XG4gIH0gd2hpbGUgKHRydWUpO1xuICBicmVhZGNydW1icy5yZXZlcnNlKCk7XG4gIHJldHVybiBicmVhZGNydW1icztcbn07XG5cbi8vIHNyYy9nZXQtcGFnZS1jb250ZW50LWJsb2NrLWlkcy50c1xudmFyIGdldFBhZ2VDb250ZW50QmxvY2tJZHMgPSAocmVjb3JkTWFwLCBibG9ja0lkKSA9PiB7XG4gIGNvbnN0IHJvb3RCbG9ja0lkID0gYmxvY2tJZCB8fCBPYmplY3Qua2V5cyhyZWNvcmRNYXAuYmxvY2spWzBdO1xuICBjb25zdCBjb250ZW50QmxvY2tJZHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICBmdW5jdGlvbiBhZGRDb250ZW50QmxvY2tzKGJsb2NrSWQyKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7XG4gICAgaWYgKGNvbnRlbnRCbG9ja0lkcy5oYXMoYmxvY2tJZDIpKSByZXR1cm47XG4gICAgY29udGVudEJsb2NrSWRzLmFkZChibG9ja0lkMik7XG4gICAgY29uc3QgYmxvY2sgPSAoX2EgPSByZWNvcmRNYXAuYmxvY2tbYmxvY2tJZDJdKSA9PSBudWxsID8gdm9pZCAwIDogX2EudmFsdWU7XG4gICAgaWYgKCFibG9jaykgcmV0dXJuO1xuICAgIGNvbnN0IHsgY29udGVudCwgdHlwZSwgcHJvcGVydGllcywgZm9ybWF0IH0gPSBibG9jaztcbiAgICBpZiAocHJvcGVydGllcykge1xuICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMocHJvcGVydGllcykpIHtcbiAgICAgICAgY29uc3QgcCA9IHByb3BlcnRpZXNba2V5XTtcbiAgICAgICAgaWYgKCFwKSBjb250aW51ZTtcbiAgICAgICAgZm9yIChjb25zdCBkIG9mIHApIHtcbiAgICAgICAgICBjb25zdCB2YWx1ZTIgPSAoX2MgPSAoX2IgPSBkID09IG51bGwgPyB2b2lkIDAgOiBkWzBdKSA9PSBudWxsID8gdm9pZCAwIDogX2JbMV0pID09IG51bGwgPyB2b2lkIDAgOiBfY1swXTtcbiAgICAgICAgICBpZiAoKHZhbHVlMiA9PSBudWxsID8gdm9pZCAwIDogdmFsdWUyWzBdKSA9PT0gXCJwXCIgJiYgdmFsdWUyWzFdKSB7XG4gICAgICAgICAgICBhZGRDb250ZW50QmxvY2tzKHZhbHVlMlsxXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlID0gKF9lID0gKF9kID0gcCA9PSBudWxsID8gdm9pZCAwIDogcFswXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kWzFdKSA9PSBudWxsID8gdm9pZCAwIDogX2VbMF07XG4gICAgICAgIGlmICgodmFsdWUgPT0gbnVsbCA/IHZvaWQgMCA6IHZhbHVlWzBdKSA9PT0gXCJwXCIgJiYgdmFsdWVbMV0pIHtcbiAgICAgICAgICBhZGRDb250ZW50QmxvY2tzKHZhbHVlWzFdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZm9ybWF0KSB7XG4gICAgICBjb25zdCByZWZlcmVuY2VJZCA9IChfZiA9IGZvcm1hdC50cmFuc2NsdXNpb25fcmVmZXJlbmNlX3BvaW50ZXIpID09IG51bGwgPyB2b2lkIDAgOiBfZi5pZDtcbiAgICAgIGlmIChyZWZlcmVuY2VJZCkge1xuICAgICAgICBhZGRDb250ZW50QmxvY2tzKHJlZmVyZW5jZUlkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFjb250ZW50IHx8ICFBcnJheS5pc0FycmF5KGNvbnRlbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChibG9ja0lkMiAhPT0gcm9vdEJsb2NrSWQpIHtcbiAgICAgIGlmICh0eXBlID09PSBcInBhZ2VcIiB8fCB0eXBlID09PSBcImNvbGxlY3Rpb25fdmlld19wYWdlXCIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGJsb2NrSWQzIG9mIGNvbnRlbnQpIHtcbiAgICAgIGFkZENvbnRlbnRCbG9ja3MoYmxvY2tJZDMpO1xuICAgIH1cbiAgfVxuICBhZGRDb250ZW50QmxvY2tzKHJvb3RCbG9ja0lkKTtcbiAgcmV0dXJuIEFycmF5LmZyb20oY29udGVudEJsb2NrSWRzKTtcbn07XG5cbi8vIHNyYy9pcy11cmwudHNcbmltcG9ydCB7IGRlZmF1bHQgYXMgZGVmYXVsdDIgfSBmcm9tIFwiaXMtdXJsLXN1cGVyYlwiO1xuXG4vLyBzcmMvZ2V0LXBhZ2UtaW1hZ2UtdXJscy50c1xudmFyIGdldFBhZ2VJbWFnZVVybHMgPSAocmVjb3JkTWFwLCB7XG4gIG1hcEltYWdlVXJsXG59KSA9PiB7XG4gIGNvbnN0IGJsb2NrSWRzID0gT2JqZWN0LmtleXMocmVjb3JkTWFwLmJsb2NrKTtcbiAgY29uc3QgaW1hZ2VVcmxzID0gYmxvY2tJZHMuZmxhdE1hcCgoYmxvY2tJZCkgPT4ge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9pLCBfaiwgX2s7XG4gICAgY29uc3QgYmxvY2sgPSAoX2EgPSByZWNvcmRNYXAuYmxvY2tbYmxvY2tJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYS52YWx1ZTtcbiAgICBjb25zdCBpbWFnZXMgPSBbXTtcbiAgICBpZiAoYmxvY2spIHtcbiAgICAgIGlmIChibG9jay50eXBlID09PSBcImltYWdlXCIpIHtcbiAgICAgICAgY29uc3Qgc2lnbmVkVXJsID0gKF9iID0gcmVjb3JkTWFwLnNpZ25lZF91cmxzKSA9PSBudWxsID8gdm9pZCAwIDogX2JbYmxvY2suaWRdO1xuICAgICAgICBsZXQgc291cmNlID0gc2lnbmVkVXJsIHx8ICgoX2UgPSAoX2QgPSAoX2MgPSBibG9jay5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX2Muc291cmNlKSA9PSBudWxsID8gdm9pZCAwIDogX2RbMF0pID09IG51bGwgPyB2b2lkIDAgOiBfZVswXSk7XG4gICAgICAgIGlmIChzb3VyY2UgPT0gbnVsbCA/IHZvaWQgMCA6IHNvdXJjZS5pbmNsdWRlcyhcImZpbGUubm90aW9uLnNvXCIpKSB7XG4gICAgICAgICAgc291cmNlID0gKF9oID0gKF9nID0gKF9mID0gYmxvY2sucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9mLnNvdXJjZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9nWzBdKSA9PSBudWxsID8gdm9pZCAwIDogX2hbMF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgIGltYWdlcy5wdXNoKHtcbiAgICAgICAgICAgIGJsb2NrLFxuICAgICAgICAgICAgdXJsOiBzb3VyY2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKChfaSA9IGJsb2NrLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9pLnBhZ2VfY292ZXIpIHtcbiAgICAgICAgY29uc3Qgc291cmNlID0gYmxvY2suZm9ybWF0LnBhZ2VfY292ZXI7XG4gICAgICAgIGltYWdlcy5wdXNoKHtcbiAgICAgICAgICBibG9jayxcbiAgICAgICAgICB1cmw6IHNvdXJjZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICgoX2ogPSBibG9jay5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfai5ib29rbWFya19jb3Zlcikge1xuICAgICAgICBjb25zdCBzb3VyY2UgPSBibG9jay5mb3JtYXQuYm9va21hcmtfY292ZXI7XG4gICAgICAgIGltYWdlcy5wdXNoKHtcbiAgICAgICAgICBibG9jayxcbiAgICAgICAgICB1cmw6IHNvdXJjZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICgoX2sgPSBibG9jay5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfay5ib29rbWFya19pY29uKSB7XG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IGJsb2NrLmZvcm1hdC5ib29rbWFya19pY29uO1xuICAgICAgICBpbWFnZXMucHVzaCh7XG4gICAgICAgICAgYmxvY2ssXG4gICAgICAgICAgdXJsOiBzb3VyY2VcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBwYWdlSWNvbiA9IGdldEJsb2NrSWNvbihibG9jaywgcmVjb3JkTWFwKTtcbiAgICAgIGlmIChwYWdlSWNvbiAmJiBkZWZhdWx0MihwYWdlSWNvbikpIHtcbiAgICAgICAgaW1hZ2VzLnB1c2goe1xuICAgICAgICAgIGJsb2NrLFxuICAgICAgICAgIHVybDogcGFnZUljb25cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpbWFnZXM7XG4gIH0pLmZpbHRlcihCb29sZWFuKS5tYXAoKHsgYmxvY2ssIHVybCB9KSA9PiBtYXBJbWFnZVVybCh1cmwsIGJsb2NrKSkuZmlsdGVyKEJvb2xlYW4pO1xuICByZXR1cm4gQXJyYXkuZnJvbShuZXcgU2V0KGltYWdlVXJscykpO1xufTtcblxuLy8gc3JjL2dldC1wYWdlLXRpdGxlLnRzXG5pbXBvcnQgXCJub3Rpb24tdHlwZXNcIjtcbmZ1bmN0aW9uIGdldFBhZ2VUaXRsZShyZWNvcmRNYXApIHtcbiAgdmFyIF9hO1xuICBjb25zdCByb290QmxvY2tJZCA9IE9iamVjdC5rZXlzKHJlY29yZE1hcC5ibG9jaylbMF07XG4gIGlmICghcm9vdEJsb2NrSWQpIHJldHVybiBudWxsO1xuICBjb25zdCBwYWdlQmxvY2sgPSAoX2EgPSByZWNvcmRNYXAuYmxvY2tbcm9vdEJsb2NrSWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2EudmFsdWU7XG4gIGlmIChwYWdlQmxvY2spIHtcbiAgICByZXR1cm4gZ2V0QmxvY2tUaXRsZShwYWdlQmxvY2ssIHJlY29yZE1hcCk7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8vIHNyYy9nZXQtcGFnZS10d2VldC11cmxzLnRzXG52YXIgZ2V0UGFnZVR3ZWV0VXJscyA9IChyZWNvcmRNYXApID0+IHtcbiAgY29uc3QgYmxvY2tJZHMgPSBPYmplY3Qua2V5cyhyZWNvcmRNYXAuYmxvY2spO1xuICBjb25zdCB0d2VldFVybHMgPSBibG9ja0lkcy5tYXAoKGJsb2NrSWQpID0+IHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgY29uc3QgYmxvY2sgPSAoX2EgPSByZWNvcmRNYXAuYmxvY2tbYmxvY2tJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYS52YWx1ZTtcbiAgICBpZiAoKGJsb2NrID09IG51bGwgPyB2b2lkIDAgOiBibG9jay50eXBlKSA9PT0gXCJ0d2VldFwiKSB7XG4gICAgICBjb25zdCB0d2VldFVybCA9IChfZCA9IChfYyA9IChfYiA9IGJsb2NrLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYi5zb3VyY2UpID09IG51bGwgPyB2b2lkIDAgOiBfY1swXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kWzBdO1xuICAgICAgaWYgKHR3ZWV0VXJsKSB7XG4gICAgICAgIHJldHVybiB0d2VldFVybDtcbiAgICAgIH1cbiAgICB9XG4gIH0pLmZpbHRlcihCb29sZWFuKTtcbiAgcmV0dXJuIEFycmF5LmZyb20obmV3IFNldCh0d2VldFVybHMpKTtcbn07XG5cbi8vIHNyYy9nZXQtcGFnZS10d2VldC1pZHMudHNcbnZhciBnZXRQYWdlVHdlZXRJZHMgPSAocmVjb3JkTWFwKSA9PiB7XG4gIGNvbnN0IHR3ZWV0VXJscyA9IGdldFBhZ2VUd2VldFVybHMocmVjb3JkTWFwKTtcbiAgcmV0dXJuIHR3ZWV0VXJscy5tYXAoKHVybCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1ID0gbmV3IFVSTCh1cmwpO1xuICAgICAgY29uc3QgcGFydHMgPSB1LnBhdGhuYW1lLnNwbGl0KFwiL1wiKTtcbiAgICAgIHJldHVybiBwYXJ0cy5hdCgtMSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSkuZmlsdGVyKEJvb2xlYW4pO1xufTtcblxuLy8gc3JjL21hcC1pbWFnZS11cmwudHNcbmltcG9ydCBcIm5vdGlvbi10eXBlc1wiO1xudmFyIGRlZmF1bHRNYXBJbWFnZVVybCA9ICh1cmwsIGJsb2NrKSA9PiB7XG4gIGlmICghdXJsKSB7XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfVxuICBpZiAodXJsLnN0YXJ0c1dpdGgoXCJkYXRhOlwiKSkge1xuICAgIHJldHVybiB1cmw7XG4gIH1cbiAgaWYgKHVybC5zdGFydHNXaXRoKFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tXCIpKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuICB0cnkge1xuICAgIGNvbnN0IHUgPSBuZXcgVVJMKHVybCk7XG4gICAgaWYgKHUucGF0aG5hbWUuc3RhcnRzV2l0aChcIi9zZWN1cmUubm90aW9uLXN0YXRpYy5jb21cIikgJiYgdS5ob3N0bmFtZS5lbmRzV2l0aChcIi5hbWF6b25hd3MuY29tXCIpKSB7XG4gICAgICBpZiAodS5zZWFyY2hQYXJhbXMuaGFzKFwiWC1BbXotQ3JlZGVudGlhbFwiKSAmJiB1LnNlYXJjaFBhcmFtcy5oYXMoXCJYLUFtei1TaWduYXR1cmVcIikgJiYgdS5zZWFyY2hQYXJhbXMuaGFzKFwiWC1BbXotQWxnb3JpdGhtXCIpKSB7XG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh1Lmhvc3RuYW1lID09PSBcImltZy5ub3Rpb251c2VyY29udGVudC5jb21cIikge1xuICAgICAgcmV0dXJuIHVybDtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxuICBpZiAodXJsLnN0YXJ0c1dpdGgoXCIvaW1hZ2VzXCIpKSB7XG4gICAgdXJsID0gYGh0dHBzOi8vd3d3Lm5vdGlvbi5zbyR7dXJsfWA7XG4gIH1cbiAgdXJsID0gYGh0dHBzOi8vd3d3Lm5vdGlvbi5zbyR7dXJsLnN0YXJ0c1dpdGgoXCIvaW1hZ2VcIikgPyB1cmwgOiBgL2ltYWdlLyR7ZW5jb2RlVVJJQ29tcG9uZW50KHVybCl9YH1gO1xuICBjb25zdCBub3Rpb25JbWFnZVVybFYyID0gbmV3IFVSTCh1cmwpO1xuICBsZXQgdGFibGUgPSBibG9jay5wYXJlbnRfdGFibGUgPT09IFwic3BhY2VcIiA/IFwiYmxvY2tcIiA6IGJsb2NrLnBhcmVudF90YWJsZTtcbiAgaWYgKHRhYmxlID09PSBcImNvbGxlY3Rpb25cIiB8fCB0YWJsZSA9PT0gXCJ0ZWFtXCIpIHtcbiAgICB0YWJsZSA9IFwiYmxvY2tcIjtcbiAgfVxuICBub3Rpb25JbWFnZVVybFYyLnNlYXJjaFBhcmFtcy5zZXQoXCJ0YWJsZVwiLCB0YWJsZSk7XG4gIG5vdGlvbkltYWdlVXJsVjIuc2VhcmNoUGFyYW1zLnNldChcImlkXCIsIGJsb2NrLmlkKTtcbiAgbm90aW9uSW1hZ2VVcmxWMi5zZWFyY2hQYXJhbXMuc2V0KFwiY2FjaGVcIiwgXCJ2MlwiKTtcbiAgdXJsID0gbm90aW9uSW1hZ2VVcmxWMi50b1N0cmluZygpO1xuICByZXR1cm4gdXJsO1xufTtcblxuLy8gc3JjL21hcC1wYWdlLXVybC50c1xudmFyIGRlZmF1bHRNYXBQYWdlVXJsID0gKHJvb3RQYWdlSWQpID0+IChwYWdlSWQpID0+IHtcbiAgcGFnZUlkID0gKHBhZ2VJZCB8fCBcIlwiKS5yZXBsYWNlQWxsKFwiLVwiLCBcIlwiKTtcbiAgaWYgKHJvb3RQYWdlSWQgJiYgcGFnZUlkID09PSByb290UGFnZUlkKSB7XG4gICAgcmV0dXJuIFwiL1wiO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBgLyR7cGFnZUlkfWA7XG4gIH1cbn07XG5cbi8vIHNyYy9tZXJnZS1yZWNvcmQtbWFwcy50c1xuaW1wb3J0IFwibm90aW9uLXR5cGVzXCI7XG5mdW5jdGlvbiBtZXJnZVJlY29yZE1hcHMocmVjb3JkTWFwQSwgcmVjb3JkTWFwQikge1xuICBjb25zdCBtZXJnZWRSZWNvcmRNYXAgPSB7XG4gICAgYmxvY2s6IHtcbiAgICAgIC4uLnJlY29yZE1hcEEuYmxvY2ssXG4gICAgICAuLi5yZWNvcmRNYXBCLmJsb2NrXG4gICAgfSxcbiAgICBjb2xsZWN0aW9uOiB7XG4gICAgICAuLi5yZWNvcmRNYXBBLmNvbGxlY3Rpb24sXG4gICAgICAuLi5yZWNvcmRNYXBCLmNvbGxlY3Rpb25cbiAgICB9LFxuICAgIGNvbGxlY3Rpb25fdmlldzoge1xuICAgICAgLi4ucmVjb3JkTWFwQS5jb2xsZWN0aW9uX3ZpZXcsXG4gICAgICAuLi5yZWNvcmRNYXBCLmNvbGxlY3Rpb25fdmlld1xuICAgIH0sXG4gICAgbm90aW9uX3VzZXI6IHtcbiAgICAgIC4uLnJlY29yZE1hcEEubm90aW9uX3VzZXIsXG4gICAgICAuLi5yZWNvcmRNYXBCLm5vdGlvbl91c2VyXG4gICAgfSxcbiAgICBjb2xsZWN0aW9uX3F1ZXJ5OiB7XG4gICAgICAuLi5yZWNvcmRNYXBBLmNvbGxlY3Rpb25fcXVlcnksXG4gICAgICAuLi5yZWNvcmRNYXBCLmNvbGxlY3Rpb25fcXVlcnlcbiAgICB9LFxuICAgIHNpZ25lZF91cmxzOiB7XG4gICAgICAuLi5yZWNvcmRNYXBBLnNpZ25lZF91cmxzLFxuICAgICAgLi4ucmVjb3JkTWFwQi5zaWduZWRfdXJsc1xuICAgIH0sXG4gICAgcHJldmlld19pbWFnZXM6IHtcbiAgICAgIC4uLnJlY29yZE1hcEEucHJldmlld19pbWFnZXMsXG4gICAgICAuLi5yZWNvcmRNYXBCLnByZXZpZXdfaW1hZ2VzXG4gICAgfVxuICB9O1xuICByZXR1cm4gbWVyZ2VkUmVjb3JkTWFwO1xufVxuXG4vLyBzcmMvbm9ybWFsaXplLXVybC50c1xuaW1wb3J0IG1lbW9pemUgZnJvbSBcIm1lbW9pemVcIjtcbmltcG9ydCBub3JtYWxpemVVcmxJbXBsIGZyb20gXCJub3JtYWxpemUtdXJsXCI7XG52YXIgbm9ybWFsaXplVXJsID0gbWVtb2l6ZSgodXJsKSA9PiB7XG4gIGlmICghdXJsKSB7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cbiAgdHJ5IHtcbiAgICBpZiAodXJsLnN0YXJ0c1dpdGgoXCJodHRwczovL3d3dy5ub3Rpb24uc28vaW1hZ2UvXCIpKSB7XG4gICAgICBjb25zdCB1ID0gbmV3IFVSTCh1cmwpO1xuICAgICAgY29uc3Qgc3ViVXJsID0gZGVjb2RlVVJJQ29tcG9uZW50KHUucGF0aG5hbWUuc2xpY2UoXCIvaW1hZ2UvXCIubGVuZ3RoKSk7XG4gICAgICBjb25zdCBub3JtYWxpemVkU3ViVXJsID0gbm9ybWFsaXplVXJsKHN1YlVybCk7XG4gICAgICB1LnBhdGhuYW1lID0gYC9pbWFnZS8ke2VuY29kZVVSSUNvbXBvbmVudChub3JtYWxpemVkU3ViVXJsKX1gO1xuICAgICAgdXJsID0gdS50b1N0cmluZygpO1xuICAgIH1cbiAgICByZXR1cm4gbm9ybWFsaXplVXJsSW1wbCh1cmwsIHtcbiAgICAgIHN0cmlwUHJvdG9jb2w6IHRydWUsXG4gICAgICBzdHJpcFdXVzogdHJ1ZSxcbiAgICAgIHN0cmlwSGFzaDogdHJ1ZSxcbiAgICAgIHN0cmlwVGV4dEZyYWdtZW50OiB0cnVlLFxuICAgICAgcmVtb3ZlUXVlcnlQYXJhbWV0ZXJzOiB0cnVlXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfVxufSk7XG5leHBvcnQge1xuICBkZWZhdWx0TWFwSW1hZ2VVcmwsXG4gIGRlZmF1bHRNYXBQYWdlVXJsLFxuICBlc3RpbWF0ZVBhZ2VSZWFkVGltZSxcbiAgZXN0aW1hdGVQYWdlUmVhZFRpbWVBc0h1bWFuaXplZFN0cmluZyxcbiAgZm9ybWF0RGF0ZSxcbiAgZm9ybWF0Tm90aW9uRGF0ZVRpbWUsXG4gIGdldEFsbFBhZ2VzSW5TcGFjZSxcbiAgZ2V0QmxvY2tDb2xsZWN0aW9uSWQsXG4gIGdldEJsb2NrSWNvbixcbiAgZ2V0QmxvY2tQYXJlbnRQYWdlLFxuICBnZXRCbG9ja1RpdGxlLFxuICBnZXRDYW5vbmljYWxQYWdlSWQsXG4gIGdldERhdGVWYWx1ZSxcbiAgZ2V0UGFnZUJyZWFkY3J1bWJzLFxuICBnZXRQYWdlQ29udGVudEJsb2NrSWRzLFxuICBnZXRQYWdlSW1hZ2VVcmxzLFxuICBnZXRQYWdlUHJvcGVydHksXG4gIGdldFBhZ2VUYWJsZU9mQ29udGVudHMsXG4gIGdldFBhZ2VUaXRsZSxcbiAgZ2V0UGFnZVR3ZWV0SWRzLFxuICBnZXRQYWdlVHdlZXRVcmxzLFxuICBnZXRUZXh0Q29udGVudCxcbiAgaWRUb1V1aWQsXG4gIGRlZmF1bHQyIGFzIGlzVXJsLFxuICBtZXJnZVJlY29yZE1hcHMsXG4gIG5vcm1hbGl6ZVRpdGxlLFxuICBub3JtYWxpemVVcmwsXG4gIHBhcnNlUGFnZUlkLFxuICB1dWlkVG9JZFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/../../packages/notion-utils/build/index.js\n");

/***/ }),

/***/ "(pages-dir-node)/../../packages/react-notion-x/build/index.js":
/*!****************************************************!*\
  !*** ../../packages/react-notion-x/build/index.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Breadcrumbs: () => (/* binding */ Breadcrumbs),\n/* harmony export */   Header: () => (/* binding */ Header),\n/* harmony export */   NotionContextConsumer: () => (/* binding */ NotionContextConsumer),\n/* harmony export */   NotionContextProvider: () => (/* binding */ NotionContextProvider),\n/* harmony export */   NotionRenderer: () => (/* binding */ NotionRenderer),\n/* harmony export */   PageIcon: () => (/* binding */ PageIcon),\n/* harmony export */   PageIconImpl: () => (/* binding */ PageIconImpl),\n/* harmony export */   Search: () => (/* binding */ Search),\n/* harmony export */   Text: () => (/* binding */ Text),\n/* harmony export */   cs: () => (/* binding */ cs),\n/* harmony export */   dummyLink: () => (/* binding */ dummyLink),\n/* harmony export */   formatDate: () => (/* reexport safe */ notion_utils__WEBPACK_IMPORTED_MODULE_4__.formatDate),\n/* harmony export */   formatNotionDateTime: () => (/* reexport safe */ notion_utils__WEBPACK_IMPORTED_MODULE_4__.formatNotionDateTime),\n/* harmony export */   getHashFragmentValue: () => (/* binding */ getHashFragmentValue),\n/* harmony export */   getListNestingLevel: () => (/* binding */ getListNestingLevel),\n/* harmony export */   getListNumber: () => (/* binding */ getListNumber),\n/* harmony export */   getListStyle: () => (/* binding */ getListStyle),\n/* harmony export */   getUrlParams: () => (/* binding */ getUrlParams),\n/* harmony export */   getYoutubeId: () => (/* binding */ getYoutubeId),\n/* harmony export */   isBrowser: () => (/* binding */ isBrowser),\n/* harmony export */   isUrl: () => (/* reexport safe */ notion_utils__WEBPACK_IMPORTED_MODULE_4__.isUrl),\n/* harmony export */   useNotionContext: () => (/* binding */ useNotionContext)\n/* harmony export */ });\n/* harmony import */ var notion_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! notion-utils */ \"(pages-dir-node)/../../packages/notion-utils/build/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react_hotkeys_hook__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-hotkeys-hook */ \"(pages-dir-node)/../../node_modules/.pnpm/react-hotkeys-hook@4.6.2_re_132c23ea08d1cf082479922b9f53a5dd/node_modules/react-hotkeys-hook/dist/index.js\");\n/* harmony import */ var react_lazy_images__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-lazy-images */ \"(pages-dir-node)/../../node_modules/.pnpm/react-lazy-images@1.1.0_rea_8ee3c10bdf36427c94472c5e0f755fc1/node_modules/react-lazy-images/dist/react-lazy-images.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react/jsx-runtime */ \"react/jsx-runtime\");\n/* harmony import */ var react_image__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-image */ \"(pages-dir-node)/../../node_modules/.pnpm/react-image@4.1.0_@babel+ru_6fbc4a02b6848c0cca97fe2864b98fb7/node_modules/react-image/cjs/index.js\");\n/* harmony import */ var react_fast_compare__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-fast-compare */ \"(pages-dir-node)/../../node_modules/.pnpm/react-fast-compare@3.2.2/node_modules/react-fast-compare/index.js\");\n/* harmony import */ var _fisch0920_medium_zoom__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @fisch0920/medium-zoom */ \"(pages-dir-node)/../../node_modules/.pnpm/@fisch0920+medium-zoom@1.0.7/node_modules/@fisch0920/medium-zoom/dist/medium-zoom.min.js\");\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n// ../../node_modules/.pnpm/lodash.throttle@4.1.1/node_modules/lodash.throttle/index.js\nvar require_lodash = __commonJS({\n  \"../../node_modules/.pnpm/lodash.throttle@4.1.1/node_modules/lodash.throttle/index.js\"(exports, module) {\n    \"use strict\";\n    var FUNC_ERROR_TEXT = \"Expected a function\";\n    var NAN = 0 / 0;\n    var symbolTag = \"[object Symbol]\";\n    var reTrim = /^\\s+|\\s+$/g;\n    var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n    var reIsBinary = /^0b[01]+$/i;\n    var reIsOctal = /^0o[0-7]+$/i;\n    var freeParseInt = parseInt;\n    var freeGlobal = typeof global == \"object\" && global && global.Object === Object && global;\n    var freeSelf = typeof self == \"object\" && self && self.Object === Object && self;\n    var root = freeGlobal || freeSelf || Function(\"return this\")();\n    var objectProto = Object.prototype;\n    var objectToString = objectProto.toString;\n    var nativeMax = Math.max;\n    var nativeMin = Math.min;\n    var now = function() {\n      return root.Date.now();\n    };\n    function debounce(func, wait, options) {\n      var lastArgs, lastThis, maxWait, result, timerId, lastCallTime, lastInvokeTime = 0, leading = false, maxing = false, trailing = true;\n      if (typeof func != \"function\") {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      wait = toNumber(wait) || 0;\n      if (isObject(options)) {\n        leading = !!options.leading;\n        maxing = \"maxWait\" in options;\n        maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n        trailing = \"trailing\" in options ? !!options.trailing : trailing;\n      }\n      function invokeFunc(time) {\n        var args = lastArgs, thisArg = lastThis;\n        lastArgs = lastThis = void 0;\n        lastInvokeTime = time;\n        result = func.apply(thisArg, args);\n        return result;\n      }\n      function leadingEdge(time) {\n        lastInvokeTime = time;\n        timerId = setTimeout(timerExpired, wait);\n        return leading ? invokeFunc(time) : result;\n      }\n      function remainingWait(time) {\n        var timeSinceLastCall = time - lastCallTime, timeSinceLastInvoke = time - lastInvokeTime, result2 = wait - timeSinceLastCall;\n        return maxing ? nativeMin(result2, maxWait - timeSinceLastInvoke) : result2;\n      }\n      function shouldInvoke(time) {\n        var timeSinceLastCall = time - lastCallTime, timeSinceLastInvoke = time - lastInvokeTime;\n        return lastCallTime === void 0 || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;\n      }\n      function timerExpired() {\n        var time = now();\n        if (shouldInvoke(time)) {\n          return trailingEdge(time);\n        }\n        timerId = setTimeout(timerExpired, remainingWait(time));\n      }\n      function trailingEdge(time) {\n        timerId = void 0;\n        if (trailing && lastArgs) {\n          return invokeFunc(time);\n        }\n        lastArgs = lastThis = void 0;\n        return result;\n      }\n      function cancel() {\n        if (timerId !== void 0) {\n          clearTimeout(timerId);\n        }\n        lastInvokeTime = 0;\n        lastArgs = lastCallTime = lastThis = timerId = void 0;\n      }\n      function flush() {\n        return timerId === void 0 ? result : trailingEdge(now());\n      }\n      function debounced() {\n        var time = now(), isInvoking = shouldInvoke(time);\n        lastArgs = arguments;\n        lastThis = this;\n        lastCallTime = time;\n        if (isInvoking) {\n          if (timerId === void 0) {\n            return leadingEdge(lastCallTime);\n          }\n          if (maxing) {\n            timerId = setTimeout(timerExpired, wait);\n            return invokeFunc(lastCallTime);\n          }\n        }\n        if (timerId === void 0) {\n          timerId = setTimeout(timerExpired, wait);\n        }\n        return result;\n      }\n      debounced.cancel = cancel;\n      debounced.flush = flush;\n      return debounced;\n    }\n    function throttle3(func, wait, options) {\n      var leading = true, trailing = true;\n      if (typeof func != \"function\") {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      if (isObject(options)) {\n        leading = \"leading\" in options ? !!options.leading : leading;\n        trailing = \"trailing\" in options ? !!options.trailing : trailing;\n      }\n      return debounce(func, wait, {\n        \"leading\": leading,\n        \"maxWait\": wait,\n        \"trailing\": trailing\n      });\n    }\n    function isObject(value) {\n      var type = typeof value;\n      return !!value && (type == \"object\" || type == \"function\");\n    }\n    function isObjectLike(value) {\n      return !!value && typeof value == \"object\";\n    }\n    function isSymbol(value) {\n      return typeof value == \"symbol\" || isObjectLike(value) && objectToString.call(value) == symbolTag;\n    }\n    function toNumber(value) {\n      if (typeof value == \"number\") {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      if (isObject(value)) {\n        var other = typeof value.valueOf == \"function\" ? value.valueOf() : value;\n        value = isObject(other) ? other + \"\" : other;\n      }\n      if (typeof value != \"string\") {\n        return value === 0 ? value : +value;\n      }\n      value = value.replace(reTrim, \"\");\n      var isBinary = reIsBinary.test(value);\n      return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;\n    }\n    module.exports = throttle3;\n  }\n});\n\n// src/components/header.tsx\n\n\n\n\n// src/context.tsx\n\n\n\n\n// src/components/asset-wrapper.tsx\n\n\n\n// src/utils.ts\n\n\nvar cs = (...classes) => classes.filter((a) => !!a).join(\" \");\nvar groupBlockContent = (blockMap) => {\n  var _a, _b, _c, _d;\n  const output = [];\n  let lastType;\n  let index = -1;\n  for (const id of Object.keys(blockMap)) {\n    const blockValue = (_a = blockMap[id]) == null ? void 0 : _a.value;\n    if (blockValue) {\n      if (blockValue.content)\n        for (const blockId of blockValue.content) {\n          const blockType = (_c = (_b = blockMap[blockId]) == null ? void 0 : _b.value) == null ? void 0 : _c.type;\n          if (blockType && blockType !== lastType) {\n            index++;\n            lastType = blockType;\n            output[index] = [];\n          }\n          if (index > -1) {\n            (_d = output[index]) == null ? void 0 : _d.push(blockId);\n          }\n        }\n    }\n    lastType = void 0;\n  }\n  return output;\n};\nvar getListNumber = (blockId, blockMap) => {\n  const groups = groupBlockContent(blockMap);\n  const group = groups.find((g) => g.includes(blockId));\n  if (!group) {\n    return;\n  }\n  return group.indexOf(blockId) + 1;\n};\nvar getListNestingLevel = (blockId, blockMap) => {\n  var _a, _b, _c;\n  let level = 0;\n  let currentBlockId = blockId;\n  while (true) {\n    const parentId = (_b = (_a = blockMap[currentBlockId]) == null ? void 0 : _a.value) == null ? void 0 : _b.parent_id;\n    if (!parentId) break;\n    const parentBlock = (_c = blockMap[parentId]) == null ? void 0 : _c.value;\n    if (!parentBlock) break;\n    if (parentBlock.type === \"numbered_list\") {\n      level++;\n      currentBlockId = parentId;\n    } else {\n      break;\n    }\n  }\n  return level;\n};\nvar getListStyle = (level) => {\n  const styles = [\"decimal\", \"lower-alpha\", \"lower-roman\"];\n  const index = (level % styles.length + styles.length) % styles.length;\n  return styles[index];\n};\nvar getHashFragmentValue = (url) => {\n  return url.includes(\"#\") ? url.replace(/^.+(#.+)$/, \"$1\") : \"\";\n};\nvar isBrowser = !!globalThis.window;\nvar youtubeDomains = /* @__PURE__ */ new Set([\n  \"youtu.be\",\n  \"youtube.com\",\n  \"www.youtube.com\",\n  \"youtube-nocookie.com\",\n  \"www.youtube-nocookie.com\"\n]);\nvar getYoutubeId = (url) => {\n  var _a;\n  try {\n    const { hostname } = new URL(url);\n    if (!youtubeDomains.has(hostname)) {\n      return null;\n    }\n    const regExp = /^.*(youtu\\.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/i;\n    const match = url.match(regExp);\n    if (match && ((_a = match[2]) == null ? void 0 : _a.length) === 11) {\n      return match[2];\n    }\n  } catch (e) {\n  }\n  return null;\n};\nvar getUrlParams = (url) => {\n  try {\n    const { searchParams } = new URL(url);\n    const result = {};\n    for (const [key, value] of searchParams.entries()) {\n      result[key] = value;\n    }\n    return result;\n  } catch (e) {\n  }\n  return;\n};\n\n// src/components/asset.tsx\n\n\n\n// src/components/lazy-image.tsx\n\n\n\n\nfunction LazyImage({\n  src,\n  alt,\n  className,\n  style,\n  zoomable = false,\n  priority = false,\n  height,\n  ...rest\n}) {\n  var _a, _b, _c;\n  const { recordMap, zoom, previewImages, forceCustomImages, components } = useNotionContext();\n  const zoomRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(zoom ? zoom.clone() : null);\n  const previewImage = previewImages ? (_c = (_a = recordMap == null ? void 0 : recordMap.preview_images) == null ? void 0 : _a[src]) != null ? _c : (_b = recordMap == null ? void 0 : recordMap.preview_images) == null ? void 0 : _b[(0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.normalizeUrl)(src)] : null;\n  const onLoad = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (e) => {\n      if (zoomable && (e.target.src || e.target.srcset)) {\n        if (zoomRef.current) {\n          ;\n          zoomRef.current.attach(e.target);\n        }\n      }\n    },\n    [zoomRef, zoomable]\n  );\n  const attachZoom = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (image) => {\n      if (zoomRef.current && image) {\n        ;\n        zoomRef.current.attach(image);\n      }\n    },\n    [zoomRef]\n  );\n  const attachZoomRef = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => zoomable ? attachZoom : void 0,\n    [zoomable, attachZoom]\n  );\n  if (previewImage) {\n    const aspectRatio = previewImage.originalHeight / previewImage.originalWidth;\n    if (components.Image) {\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n        components.Image,\n        {\n          src,\n          alt,\n          style,\n          className,\n          width: previewImage.originalWidth,\n          height: previewImage.originalHeight,\n          blurDataURL: previewImage.dataURIBase64,\n          placeholder: \"blur\",\n          priority,\n          onLoad\n        }\n      );\n    }\n    return (\n      // @ts-expect-error LazyImage types are out-of-date.\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react_lazy_images__WEBPACK_IMPORTED_MODULE_2__.LazyImageFull, { src, ...rest, experimentalDecode: true, children: ({ imageState, ref }) => {\n        const isLoaded = imageState === react_lazy_images__WEBPACK_IMPORTED_MODULE_2__.ImageState.LoadSuccess;\n        const wrapperStyle = {\n          width: \"100%\"\n        };\n        const imgStyle = {};\n        if (height) {\n          wrapperStyle.height = height;\n        } else {\n          imgStyle.position = \"absolute\";\n          wrapperStyle.paddingBottom = `${aspectRatio * 100}%`;\n        }\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\n          \"div\",\n          {\n            className: cs(\n              \"lazy-image-wrapper\",\n              isLoaded && \"lazy-image-loaded\",\n              className\n            ),\n            style: wrapperStyle,\n            children: [\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n                \"img\",\n                {\n                  className: \"lazy-image-preview\",\n                  src: previewImage.dataURIBase64,\n                  alt,\n                  ref,\n                  style,\n                  decoding: \"async\"\n                }\n              ),\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n                \"img\",\n                {\n                  className: \"lazy-image-real\",\n                  src,\n                  alt,\n                  ref: attachZoomRef,\n                  style: {\n                    ...style,\n                    ...imgStyle\n                  },\n                  width: previewImage.originalWidth,\n                  height: previewImage.originalHeight,\n                  decoding: \"async\",\n                  loading: \"lazy\"\n                }\n              )\n            ]\n          }\n        );\n      } })\n    );\n  } else {\n    if (components.Image && forceCustomImages) {\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n        components.Image,\n        {\n          src,\n          alt,\n          className,\n          style,\n          width: null,\n          height: height || null,\n          priority,\n          onLoad\n        }\n      );\n    }\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n      \"img\",\n      {\n        className,\n        style,\n        src,\n        alt,\n        ref: attachZoomRef,\n        loading: \"lazy\",\n        decoding: \"async\",\n        ...rest\n      }\n    );\n  }\n}\n\n// src/components/lite-youtube-embed.tsx\n\n\nvar qs = (params) => {\n  return Object.keys(params).map(\n    (key) => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`\n  ).join(\"&\");\n};\nvar resolutions = [120, 320, 480, 640, 1280];\nvar resolutionMap = {\n  120: \"default\",\n  320: \"mqdefault\",\n  480: \"hqdefault\",\n  640: \"sddefault\",\n  1280: \"maxresdefault\"\n  // 2k, 4k, 8k images don't seem to be available\n  // Source: https://longzero.com/articles/youtube-thumbnail-sizes-url/\n};\nvar resolutionSizes = resolutions.map((resolution) => `(max-width: ${resolution}px) ${resolution}px`).join(\", \");\nfunction getPosterUrl(id, resolution = 480, type = \"jpg\") {\n  if (type === \"webp\") {\n    return `https://i.ytimg.com/vi_webp/${id}/${resolutionMap[resolution]}.webp`;\n  }\n  return `https://i.ytimg.com/vi/${id}/${resolutionMap[resolution]}.jpg`;\n}\nfunction generateSrcSet(id, type = \"jpg\") {\n  return resolutions.map((resolution) => `${getPosterUrl(id, resolution, type)} ${resolution}w`).join(\", \");\n}\nfunction LiteYouTubeEmbed({\n  id,\n  defaultPlay = false,\n  mute = false,\n  lazyImage = false,\n  iframeTitle = \"YouTube video\",\n  alt = \"Video preview\",\n  params = {},\n  adLinksPreconnect = true,\n  style,\n  className\n}) {\n  const muteParam = mute || defaultPlay ? \"1\" : \"0\";\n  const queryString = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => qs({ autoplay: \"1\", mute: muteParam, ...params }),\n    [muteParam, params]\n  );\n  const ytUrl = \"https://www.youtube-nocookie.com\";\n  const iframeSrc = `${ytUrl}/embed/${id}?${queryString}`;\n  const [isPreconnected, setIsPreconnected] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  const [iframeInitialized, setIframeInitialized] = react__WEBPACK_IMPORTED_MODULE_0__.useState(defaultPlay);\n  const [isIframeLoaded, setIsIframeLoaded] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  const warmConnections = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    if (isPreconnected) return;\n    setIsPreconnected(true);\n  }, [isPreconnected]);\n  const onLoadIframe = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    if (iframeInitialized) return;\n    setIframeInitialized(true);\n  }, [iframeInitialized]);\n  const onIframeLoaded = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    setIsIframeLoaded(true);\n  }, []);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, { children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n      \"link\",\n      {\n        rel: \"preload\",\n        as: \"image\",\n        href: getPosterUrl(id),\n        imageSrcSet: generateSrcSet(id, \"webp\"),\n        imageSizes: resolutionSizes\n      }\n    ),\n    isPreconnected && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, { children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"link\", { rel: \"preconnect\", href: ytUrl }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"link\", { rel: \"preconnect\", href: \"https://www.google.com\" })\n    ] }),\n    isPreconnected && adLinksPreconnect && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, { children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"link\", { rel: \"preconnect\", href: \"https://static.doubleclick.net\" }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"link\", { rel: \"preconnect\", href: \"https://googleads.g.doubleclick.net\" })\n    ] }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\n      \"div\",\n      {\n        onClick: onLoadIframe,\n        onPointerOver: warmConnections,\n        className: cs(\n          \"notion-yt-lite\",\n          isIframeLoaded && \"notion-yt-loaded\",\n          iframeInitialized && \"notion-yt-initialized\",\n          className\n        ),\n        style,\n        children: [\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"picture\", { children: [\n            resolutions.map((resolution) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n              \"source\",\n              {\n                srcSet: `${getPosterUrl(id, resolution, \"webp\")} ${resolution}w`,\n                media: `(max-width: ${resolution}px)`,\n                type: \"image/webp\"\n              },\n              resolution\n            )),\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n              \"img\",\n              {\n                src: getPosterUrl(id),\n                className: \"notion-yt-thumbnail\",\n                loading: lazyImage ? \"lazy\" : void 0,\n                alt\n              }\n            )\n          ] }),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-yt-playbtn\" }),\n          iframeInitialized && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n            \"iframe\",\n            {\n              width: \"560\",\n              height: \"315\",\n              frameBorder: \"0\",\n              allow: \"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\",\n              allowFullScreen: true,\n              title: iframeTitle,\n              src: iframeSrc,\n              onLoad: onIframeLoaded\n            }\n          )\n        ]\n      }\n    )\n  ] });\n}\n\n// src/components/asset.tsx\n\nvar isServer = !globalThis.window;\nvar supportedAssetTypes = /* @__PURE__ */ new Set([\n  \"replit\",\n  \"video\",\n  \"image\",\n  \"embed\",\n  \"figma\",\n  \"typeform\",\n  \"excalidraw\",\n  \"maps\",\n  \"tweet\",\n  \"pdf\",\n  \"gist\",\n  \"codepen\",\n  \"drive\"\n]);\nfunction Asset({\n  block,\n  zoomable = true,\n  children\n}) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l;\n  const { recordMap, mapImageUrl, components } = useNotionContext();\n  if (!block || !supportedAssetTypes.has(block.type)) {\n    return null;\n  }\n  const style = {\n    position: \"relative\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignSelf: \"center\",\n    width: \"100%\",\n    maxWidth: \"100%\",\n    flexDirection: \"column\"\n  };\n  const assetStyle = {};\n  if (block.format) {\n    const {\n      block_aspect_ratio,\n      block_height,\n      block_width,\n      block_full_width,\n      block_page_width,\n      block_preserve_scale\n    } = block.format;\n    if (block_full_width || block_page_width) {\n      if (block_full_width) {\n        style.width = \"100vw\";\n      } else {\n        style.width = \"100%\";\n      }\n      if (block.type === \"video\") {\n        if (block_height) {\n          style.height = block_height;\n        } else if (block_aspect_ratio) {\n          style.paddingBottom = `${block_aspect_ratio * 100}%`;\n        } else if (block_preserve_scale) {\n          style.objectFit = \"contain\";\n        }\n      } else if (block_aspect_ratio && block.type !== \"image\") {\n        style.paddingBottom = `${block_aspect_ratio * 100}%`;\n      } else if (block_height) {\n        style.height = block_height;\n      } else if (block_preserve_scale) {\n        if (block.type === \"image\") {\n          style.height = \"100%\";\n        } else {\n          style.paddingBottom = \"75%\";\n          style.minHeight = 100;\n        }\n      }\n    } else {\n      switch ((_a = block.format) == null ? void 0 : _a.block_alignment) {\n        case \"center\":\n          style.alignSelf = \"center\";\n          break;\n        case \"left\":\n          style.alignSelf = \"start\";\n          break;\n        case \"right\":\n          style.alignSelf = \"end\";\n          break;\n      }\n      if (block_width) {\n        style.width = block_width;\n      }\n      if (block_preserve_scale && block.type !== \"image\") {\n        style.paddingBottom = \"50%\";\n        style.minHeight = 100;\n      } else {\n        if (block_height && block.type !== \"image\") {\n          style.height = block_height;\n        }\n      }\n    }\n    if (block.type === \"image\") {\n      assetStyle.objectFit = \"cover\";\n    } else if (block_preserve_scale) {\n      assetStyle.objectFit = \"contain\";\n    }\n  }\n  let source = ((_b = recordMap.signed_urls) == null ? void 0 : _b[block.id]) || ((_e = (_d = (_c = block.properties) == null ? void 0 : _c.source) == null ? void 0 : _d[0]) == null ? void 0 : _e[0]);\n  if (!source) {\n    return null;\n  }\n  if (block.space_id) {\n    const url = new URL(source);\n    url.searchParams.set(\"spaceId\", block.space_id);\n    source = url.toString();\n  }\n  let content = null;\n  if (block.type === \"tweet\") {\n    const src = source;\n    if (!src) return null;\n    const id = (_g = (_f = src.split(\"?\")) == null ? void 0 : _f[0]) == null ? void 0 : _g.split(\"/\").pop();\n    if (!id) return null;\n    content = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n      \"div\",\n      {\n        style: {\n          ...assetStyle,\n          maxWidth: 420,\n          width: \"100%\",\n          marginLeft: \"auto\",\n          marginRight: \"auto\"\n        },\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(components.Tweet, { id })\n      }\n    );\n  } else if (block.type === \"pdf\") {\n    style.overflow = \"auto\";\n    style.background = \"rgb(226, 226, 226)\";\n    style.display = \"block\";\n    if (!style.padding) {\n      style.padding = \"8px 16px\";\n    }\n    if (!isServer) {\n      content = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(components.Pdf, { file: source });\n    }\n  } else if (block.type === \"embed\" || block.type === \"video\" || block.type === \"figma\" || block.type === \"typeform\" || block.type === \"gist\" || block.type === \"maps\" || block.type === \"excalidraw\" || block.type === \"codepen\" || block.type === \"drive\" || block.type === \"replit\") {\n    if (block.type === \"video\" && source && !source.includes(\"youtube\") && !source.includes(\"youtu.be\") && !source.includes(\"vimeo\") && !source.includes(\"wistia\") && !source.includes(\"loom\") && !source.includes(\"videoask\") && !source.includes(\"getcloudapp\") && !source.includes(\"tella\")) {\n      style.paddingBottom = void 0;\n      content = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n        \"video\",\n        {\n          playsInline: true,\n          controls: true,\n          preload: \"metadata\",\n          style: assetStyle,\n          src: source,\n          title: block.type\n        }\n      );\n    } else {\n      let src = ((_h = block.format) == null ? void 0 : _h.display_source) || source;\n      if (src) {\n        const youtubeVideoId = block.type === \"video\" ? getYoutubeId(src) : null;\n        if (youtubeVideoId) {\n          const params = getUrlParams(src);\n          content = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n            LiteYouTubeEmbed,\n            {\n              id: youtubeVideoId,\n              style: assetStyle,\n              className: \"notion-asset-object-fit\",\n              params\n            }\n          );\n        } else if (block.type === \"gist\") {\n          if (!src.endsWith(\".pibb\")) {\n            src = `${src}.pibb`;\n          }\n          assetStyle.width = \"100%\";\n          style.paddingBottom = \"50%\";\n          content = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n            \"iframe\",\n            {\n              style: assetStyle,\n              className: \"notion-asset-object-fit\",\n              src,\n              title: \"GitHub Gist\",\n              frameBorder: \"0\",\n              loading: \"lazy\",\n              scrolling: \"auto\"\n            }\n          );\n        } else {\n          src += block.type === \"typeform\" ? \"&disable-auto-focus=true\" : \"\";\n          content = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n            \"iframe\",\n            {\n              className: \"notion-asset-object-fit\",\n              style: assetStyle,\n              src,\n              title: `iframe ${block.type}`,\n              frameBorder: \"0\",\n              allowFullScreen: true,\n              loading: \"lazy\",\n              scrolling: \"auto\"\n            }\n          );\n        }\n      }\n    }\n  } else if (block.type === \"image\") {\n    if (source.includes(\"file.notion.so\")) {\n      source = (_k = (_j = (_i = block.properties) == null ? void 0 : _i.source) == null ? void 0 : _j[0]) == null ? void 0 : _k[0];\n    }\n    const src = mapImageUrl(source, block);\n    const caption = (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.getTextContent)((_l = block.properties) == null ? void 0 : _l.caption);\n    const alt = caption || \"notion image\";\n    content = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n      LazyImage,\n      {\n        src,\n        alt,\n        zoomable,\n        height: style.height,\n        style: assetStyle\n      }\n    );\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, { children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { style, children: [\n      content,\n      block.type === \"image\" && children\n    ] }),\n    block.type !== \"image\" && children\n  ] });\n}\n\n// src/components/text.tsx\n\n\n\n\n// src/components/eoi.tsx\n\n\n// src/icons/type-github.tsx\n\nfunction SvgTypeGitHub(props) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"svg\", { viewBox: \"0 0 260 260\", ...props, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"g\", { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n    \"path\",\n    {\n      d: \"M128.00106,0 C57.3172926,0 0,57.3066942 0,128.00106 C0,184.555281 36.6761997,232.535542 87.534937,249.460899 C93.9320223,250.645779 96.280588,246.684165 96.280588,243.303333 C96.280588,240.251045 96.1618878,230.167899 96.106777,219.472176 C60.4967585,227.215235 52.9826207,204.369712 52.9826207,204.369712 C47.1599584,189.574598 38.770408,185.640538 38.770408,185.640538 C27.1568785,177.696113 39.6458206,177.859325 39.6458206,177.859325 C52.4993419,178.762293 59.267365,191.04987 59.267365,191.04987 C70.6837675,210.618423 89.2115753,204.961093 96.5158685,201.690482 C97.6647155,193.417512 100.981959,187.77078 104.642583,184.574357 C76.211799,181.33766 46.324819,170.362144 46.324819,121.315702 C46.324819,107.340889 51.3250588,95.9223682 59.5132437,86.9583937 C58.1842268,83.7344152 53.8029229,70.715562 60.7532354,53.0843636 C60.7532354,53.0843636 71.5019501,49.6441813 95.9626412,66.2049595 C106.172967,63.368876 117.123047,61.9465949 128.00106,61.8978432 C138.879073,61.9465949 149.837632,63.368876 160.067033,66.2049595 C184.49805,49.6441813 195.231926,53.0843636 195.231926,53.0843636 C202.199197,70.715562 197.815773,83.7344152 196.486756,86.9583937 C204.694018,95.9223682 209.660343,107.340889 209.660343,121.315702 C209.660343,170.478725 179.716133,181.303747 151.213281,184.472614 C155.80443,188.444828 159.895342,196.234518 159.895342,208.176593 C159.895342,225.303317 159.746968,239.087361 159.746968,243.303333 C159.746968,246.709601 162.05102,250.70089 168.53925,249.443941 C219.370432,232.499507 256,184.536204 256,128.00106 C256,57.3066942 198.691187,0 128.00106,0 Z M47.9405593,182.340212 C47.6586465,182.976105 46.6581745,183.166873 45.7467277,182.730227 C44.8183235,182.312656 44.2968914,181.445722 44.5978808,180.80771 C44.8734344,180.152739 45.876026,179.97045 46.8023103,180.409216 C47.7328342,180.826786 48.2627451,181.702199 47.9405593,182.340212 Z M54.2367892,187.958254 C53.6263318,188.524199 52.4329723,188.261363 51.6232682,187.366874 C50.7860088,186.474504 50.6291553,185.281144 51.2480912,184.70672 C51.8776254,184.140775 53.0349512,184.405731 53.8743302,185.298101 C54.7115892,186.201069 54.8748019,187.38595 54.2367892,187.958254 Z M58.5562413,195.146347 C57.7719732,195.691096 56.4895886,195.180261 55.6968417,194.042013 C54.9125733,192.903764 54.9125733,191.538713 55.713799,190.991845 C56.5086651,190.444977 57.7719732,190.936735 58.5753181,192.066505 C59.3574669,193.22383 59.3574669,194.58888 58.5562413,195.146347 Z M65.8613592,203.471174 C65.1597571,204.244846 63.6654083,204.03712 62.5716717,202.981538 C61.4524999,201.94927 61.1409122,200.484596 61.8446341,199.710926 C62.5547146,198.935137 64.0575422,199.15346 65.1597571,200.200564 C66.2704506,201.230712 66.6095936,202.705984 65.8613592,203.471174 Z M75.3025151,206.281542 C74.9930474,207.284134 73.553809,207.739857 72.1039724,207.313809 C70.6562556,206.875043 69.7087748,205.700761 70.0012857,204.687571 C70.302275,203.678621 71.7478721,203.20382 73.2083069,203.659543 C74.6539041,204.09619 75.6035048,205.261994 75.3025151,206.281542 Z M86.046947,207.473627 C86.0829806,208.529209 84.8535871,209.404622 83.3316829,209.4237 C81.8013,209.457614 80.563428,208.603398 80.5464708,207.564772 C80.5464708,206.498591 81.7483088,205.631657 83.2786917,205.606221 C84.8005962,205.576546 86.046947,206.424403 86.046947,207.473627 Z M96.6021471,207.069023 C96.7844366,208.099171 95.7267341,209.156872 94.215428,209.438785 C92.7295577,209.710099 91.3539086,209.074206 91.1652603,208.052538 C90.9808515,206.996955 92.0576306,205.939253 93.5413813,205.66582 C95.054807,205.402984 96.4092596,206.021919 96.6021471,207.069023 Z\",\n      fill: \"#161614\"\n    }\n  ) }) });\n}\nvar type_github_default = SvgTypeGitHub;\n\n// src/components/mention-preview-card.tsx\n\nfunction capitalizeFirstLetter(str) {\n  if (!str) return \"\";\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\nfunction MentionPreviewCard({\n  owner,\n  lastUpdated,\n  externalImage,\n  title,\n  domain\n}) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { className: \"notion-external-subtitle\", children: [\n    externalImage && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { className: \"notion-preview-card-domain-warp\", children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-preview-card-logo\", children: externalImage }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-preview-card-domain\", children: capitalizeFirstLetter(domain.split(\".\")[0]) })\n    ] }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-preview-card-title\", children: title }),\n    owner && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { className: \"notion-external-subtitle-item\", children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-external-subtitle-item-name\", children: \"Owner\" }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", { className: \"notion-external-subtitle-item-desc\", children: owner })\n    ] }),\n    lastUpdated && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { className: \"notion-external-subtitle-item\", children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-external-subtitle-item-name\", children: \"Updated\" }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", { className: \"notion-external-subtitle-item-desc\", children: lastUpdated })\n    ] }),\n    domain === \"github.com\" && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { className: \"notion-preview-card-github-shields\", children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n        \"img\",\n        {\n          src: `https://img.shields.io/github/stars/${owner}/${title}?logo=github`,\n          alt: \"\"\n        }\n      ),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n        \"img\",\n        {\n          src: `https://img.shields.io/github/last-commit/${owner}/${title}`,\n          alt: \"\"\n        }\n      )\n    ] })\n  ] });\n}\n\n// src/components/eoi.tsx\n\nfunction EOI({\n  block,\n  inline,\n  className\n}) {\n  var _a, _b, _c;\n  const { components } = useNotionContext();\n  const { original_url, attributes, domain } = (block == null ? void 0 : block.format) || {};\n  if (!original_url || !attributes) {\n    return null;\n  }\n  const title = (_a = attributes.find((attr) => attr.id === \"title\")) == null ? void 0 : _a.values[0];\n  let owner = (_b = attributes.find((attr) => attr.id === \"owner\")) == null ? void 0 : _b.values[0];\n  const lastUpdatedAt = (_c = attributes.find((attr) => attr.id === \"updated_at\")) == null ? void 0 : _c.values[0];\n  const lastUpdated = lastUpdatedAt ? (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.formatNotionDateTime)(lastUpdatedAt) : null;\n  let externalImage;\n  switch (domain) {\n    case \"github.com\":\n      externalImage = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(type_github_default, {});\n      if (owner) {\n        const parts = owner.split(\"/\");\n        owner = parts.at(-1);\n      }\n      break;\n    default:\n      if (true) {\n        console.log(\n          `Unsupported external_object_instance domain \"${domain}\"`,\n          JSON.stringify(block, null, 2)\n        );\n      }\n      return null;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\n    components.Link,\n    {\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      href: original_url,\n      className: cs(\n        \"notion-external\",\n        inline ? \"notion-external-mention\" : \"notion-external-block notion-row\",\n        className\n      ),\n      children: [\n        externalImage && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-external-image\", children: externalImage }),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { className: \"notion-external-description\", children: [\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-external-title\", children: title }),\n          !inline && owner ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { className: \"notion-external-block-desc\", children: [\n            owner,\n            lastUpdated && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", { children: \" \\u2022 \" }),\n            lastUpdated && `Updated ${lastUpdated}`\n          ] }) : null,\n          inline && (owner || lastUpdated) && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n            MentionPreviewCard,\n            {\n              title,\n              owner,\n              lastUpdated,\n              domain,\n              externalImage\n            }\n          )\n        ] })\n      ]\n    }\n  );\n}\n\n// src/components/graceful-image.tsx\n\n\n\nfunction GracefulImage(props) {\n  if (isBrowser) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react_image__WEBPACK_IMPORTED_MODULE_5__.Img, { ...props });\n  } else {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"img\", { ...props });\n  }\n}\n\n// src/components/link-mention.tsx\n\n\nfunction LinkMention({ metadata }) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"span\", { className: \"notion-link-mention\", children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(LinkMentionInline, { metadata }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(LinkMentionPreview, { metadata })\n  ] });\n}\nfunction LinkMentionInline({ metadata }) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\n    \"a\",\n    {\n      href: metadata.href,\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      className: \"notion-link-mention-link\",\n      children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n          \"img\",\n          {\n            className: \"notion-link-mention-icon\",\n            src: metadata.icon_url,\n            alt: metadata.link_provider\n          }\n        ),\n        metadata.link_provider && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", { className: \"notion-link-mention-provider\", children: metadata.link_provider }),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", { className: \"notion-link-mention-title\", children: metadata.title })\n      ]\n    }\n  );\n}\nfunction LinkMentionPreview({ metadata }) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-link-mention-preview\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"article\", { className: \"notion-link-mention-card\", children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n      \"img\",\n      {\n        className: \"notion-link-mention-preview-thumbnail\",\n        src: metadata.thumbnail_url,\n        alt: metadata.title,\n        referrerPolicy: \"same-origin\"\n      }\n    ),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { className: \"notion-link-mention-preview-content\", children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"p\", { className: \"notion-link-mention-preview-title\", children: metadata.title }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"p\", { className: \"notion-link-mention-preview-description\", children: metadata.description }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { className: \"notion-link-mention-preview-footer\", children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n          \"img\",\n          {\n            className: \"notion-link-mention-preview-icon\",\n            src: metadata.icon_url,\n            alt: metadata.link_provider,\n            referrerPolicy: \"same-origin\"\n          }\n        ),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", { className: \"notion-link-mention-preview-provider\", children: metadata.link_provider })\n      ] })\n    ] })\n  ] }) });\n}\n\n// src/components/page-title.tsx\n\n\n\n\n// src/components/page-icon.tsx\n\n\n\n\n// src/icons/default-page-icon.tsx\n\n\nfunction DefaultPageIcon(props) {\n  const { className, ...rest } = props;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"svg\", { className, ...rest, viewBox: \"0 0 30 30\", width: \"16\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"path\", { d: \"M16,1H4v28h22V11L16,1z M16,3.828L23.172,11H16V3.828z M24,27H6V3h8v10h10V27z M8,17h14v-2H8V17z M8,21h14v-2H8V21z M8,25h14v-2H8V25z\" }) });\n}\n\n// src/components/page-icon.tsx\n\nvar isIconBlock = (value) => {\n  return value.type === \"page\" || value.type === \"callout\" || value.type === \"collection_view\" || value.type === \"collection_view_page\";\n};\nfunction PageIconImpl({\n  block,\n  className,\n  inline = true,\n  hideDefaultIcon = false,\n  defaultIcon\n}) {\n  var _a;\n  const { mapImageUrl, recordMap, darkMode } = useNotionContext();\n  let isImage = false;\n  let content = null;\n  if (isIconBlock(block)) {\n    const icon = ((_a = (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.getBlockIcon)(block, recordMap)) == null ? void 0 : _a.trim()) || defaultIcon;\n    const title = (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.getBlockTitle)(block, recordMap);\n    if (icon && (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.isUrl)(icon)) {\n      const url = mapImageUrl(icon, block);\n      isImage = true;\n      content = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n        LazyImage,\n        {\n          src: url,\n          alt: title || \"page icon\",\n          className: cs(className, \"notion-page-icon\")\n        }\n      );\n    } else if (icon && icon.startsWith(\"/icons/\")) {\n      const url = \"https://www.notion.so\" + icon + \"?mode=\" + (darkMode ? \"dark\" : \"light\");\n      content = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n        LazyImage,\n        {\n          src: url,\n          alt: title || \"page icon\",\n          className: cs(className, \"notion-page-icon\")\n        }\n      );\n    } else if (!icon) {\n      if (!hideDefaultIcon) {\n        isImage = true;\n        content = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n          DefaultPageIcon,\n          {\n            className: cs(className, \"notion-page-icon\"),\n            alt: title || \"page icon\"\n          }\n        );\n      }\n    } else {\n      isImage = false;\n      content = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n        \"span\",\n        {\n          className: cs(className, \"notion-page-icon\"),\n          role: \"img\",\n          \"aria-label\": icon,\n          children: icon\n        }\n      );\n    }\n  }\n  if (!content) {\n    return null;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n    \"div\",\n    {\n      className: cs(\n        inline ? \"notion-page-icon-inline\" : \"notion-page-icon-hero\",\n        isImage ? \"notion-page-icon-image\" : \"notion-page-icon-span\"\n      ),\n      children: content\n    }\n  );\n}\nvar PageIcon = react__WEBPACK_IMPORTED_MODULE_0__.memo(PageIconImpl);\n\n// src/components/page-title.tsx\n\nfunction PageTitleImpl({\n  block,\n  className,\n  defaultIcon,\n  ...rest\n}) {\n  var _a, _b;\n  const { recordMap } = useNotionContext();\n  if (!block) return null;\n  if (block.type === \"collection_view_page\" || block.type === \"collection_view\") {\n    const title = (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.getBlockTitle)(block, recordMap);\n    if (!title) {\n      return null;\n    }\n    const titleDecoration = [[title]];\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"span\", { className: cs(\"notion-page-title\", className), ...rest, children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n        PageIcon,\n        {\n          block,\n          defaultIcon,\n          className: \"notion-page-title-icon\"\n        }\n      ),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", { className: \"notion-page-title-text\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Text, { value: titleDecoration, block }) })\n    ] });\n  }\n  if (!((_a = block.properties) == null ? void 0 : _a.title)) {\n    return null;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"span\", { className: cs(\"notion-page-title\", className), ...rest, children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n      PageIcon,\n      {\n        block,\n        defaultIcon,\n        className: \"notion-page-title-icon\"\n      }\n    ),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", { className: \"notion-page-title-text\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Text, { value: (_b = block.properties) == null ? void 0 : _b.title, block }) })\n  ] });\n}\nvar PageTitle = react__WEBPACK_IMPORTED_MODULE_0__.memo(PageTitleImpl);\n\n// src/components/text.tsx\n\nfunction Text({\n  value,\n  block,\n  linkProps,\n  linkProtocol\n}) {\n  const { components, recordMap, mapPageUrl, mapImageUrl, rootDomain } = useNotionContext();\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: value == null ? void 0 : value.map(([text, decorations], index) => {\n    if (!decorations) {\n      if (text === \",\") {\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", { style: { padding: \"0.5em\" } }, index);\n      } else {\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: text }, index);\n      }\n    }\n    const formatted = decorations.reduce(\n      (element, decorator) => {\n        var _a, _b, _c, _d, _e;\n        switch (decorator[0]) {\n          case \"p\": {\n            const blockId = decorator[1];\n            const linkedBlock = (_a = recordMap.block[blockId]) == null ? void 0 : _a.value;\n            if (!linkedBlock) {\n              console.log('\"p\" missing block', blockId);\n              return null;\n            }\n            return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n              components.PageLink,\n              {\n                className: \"notion-link\",\n                href: mapPageUrl(blockId),\n                children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(PageTitle, { block: linkedBlock })\n              }\n            );\n          }\n          case \"\\u2023\": {\n            const linkType = decorator[1][0];\n            const id = decorator[1][1];\n            switch (linkType) {\n              case \"u\": {\n                const user = (_b = recordMap.notion_user[id]) == null ? void 0 : _b.value;\n                if (!user) {\n                  console.log('\"\\u2023\" missing user', id);\n                  return null;\n                }\n                const src = mapImageUrl(user.profile_photo, block);\n                if (!src) return null;\n                const name = [user.given_name, user.family_name].filter(Boolean).join(\" \");\n                return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n                  GracefulImage,\n                  {\n                    className: \"notion-user\",\n                    src,\n                    alt: name\n                  }\n                );\n              }\n              default: {\n                const linkedBlock = (_c = recordMap.block[id]) == null ? void 0 : _c.value;\n                if (!linkedBlock) {\n                  console.log('\"\\u2023\" missing block', linkType, id);\n                  return null;\n                }\n                return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n                  components.PageLink,\n                  {\n                    className: \"notion-link\",\n                    href: mapPageUrl(id),\n                    ...linkProps,\n                    target: \"_blank\",\n                    rel: \"noopener noreferrer\",\n                    children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(PageTitle, { block: linkedBlock })\n                  }\n                );\n              }\n            }\n          }\n          case \"h\":\n            return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", { className: `notion-${decorator[1]}`, children: element });\n          case \"c\":\n            return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"code\", { className: \"notion-inline-code\", children: element });\n          case \"b\":\n            return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"b\", { children: element });\n          case \"i\":\n            return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"em\", { children: element });\n          case \"s\":\n            return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"s\", { children: element });\n          case \"_\":\n            return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", { className: \"notion-inline-underscore\", children: element });\n          case \"e\":\n            return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(components.Equation, { math: decorator[1], inline: true });\n          case \"m\":\n            return element;\n          //still need to return the base element\n          case \"a\": {\n            const v = decorator[1];\n            const pathname = v.slice(1);\n            const id = (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.parsePageId)(pathname, { uuid: true });\n            if (rootDomain && v.includes(rootDomain) || id && v[0] === \"/\") {\n              const href = rootDomain && v.includes(rootDomain) ? v : `${mapPageUrl(id)}${getHashFragmentValue(v)}`;\n              return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n                components.PageLink,\n                {\n                  className: \"notion-link\",\n                  href,\n                  ...linkProps,\n                  children: element\n                }\n              );\n            } else {\n              return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n                components.Link,\n                {\n                  className: \"notion-link\",\n                  href: linkProtocol ? `${linkProtocol}:${decorator[1]}` : decorator[1],\n                  ...linkProps,\n                  children: element\n                }\n              );\n            }\n          }\n          case \"d\": {\n            const v = decorator[1];\n            const type = v == null ? void 0 : v.type;\n            if (type === \"date\") {\n              const startDate = v.start_date;\n              return (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.formatDate)(startDate);\n            } else if (type === \"datetime\") {\n              const startDate = v.start_date;\n              const startTime = v.start_time;\n              return `${(0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.formatDate)(startDate)} ${startTime}`;\n            } else if (type === \"daterange\") {\n              const startDate = v.start_date;\n              const endDate = v.end_date;\n              return `${(0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.formatDate)(startDate)} \\u2192 ${(0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.formatDate)(endDate)}`;\n            } else {\n              return element;\n            }\n          }\n          case \"u\": {\n            const userId = decorator[1];\n            const user = (_d = recordMap.notion_user[userId]) == null ? void 0 : _d.value;\n            if (!user) {\n              console.log(\"missing user\", userId);\n              return null;\n            }\n            const src = mapImageUrl(user.profile_photo, block);\n            if (!src) return null;\n            const name = [user.given_name, user.family_name].filter(Boolean).join(\" \");\n            return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(GracefulImage, { className: \"notion-user\", src, alt: name });\n          }\n          case \"lm\": {\n            const metadata = decorator[1];\n            return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(LinkMention, { metadata });\n          }\n          case \"eoi\": {\n            const blockId = decorator[1];\n            const externalObjectInstance = (_e = recordMap.block[blockId]) == null ? void 0 : _e.value;\n            return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(EOI, { block: externalObjectInstance, inline: true });\n          }\n          case \"si\":\n            return null;\n          default:\n            if (true) {\n              console.log(\"unsupported text format\", decorator);\n            }\n            return element;\n        }\n      },\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, { children: text })\n    );\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: formatted }, index);\n  }) });\n}\n\n// src/components/asset-wrapper.tsx\n\nvar urlStyle = { width: \"100%\" };\nfunction AssetWrapper({\n  blockId,\n  block\n}) {\n  var _a, _b, _c, _d, _e, _f, _g, _h;\n  const value = block;\n  const { components, mapPageUrl, rootDomain, zoom } = useNotionContext();\n  let isURL = false;\n  if (block.type === \"image\") {\n    const caption = (_c = (_b = (_a = value == null ? void 0 : value.properties) == null ? void 0 : _a.caption) == null ? void 0 : _b[0]) == null ? void 0 : _c[0];\n    if (caption) {\n      const id = (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.parsePageId)(caption, { uuid: true });\n      const isPage = caption.charAt(0) === \"/\" && id;\n      if (isPage || isValidURL(caption)) {\n        isURL = true;\n      }\n    }\n  }\n  const figure = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n    \"figure\",\n    {\n      className: cs(\n        \"notion-asset-wrapper\",\n        `notion-asset-wrapper-${block.type}`,\n        ((_d = value.format) == null ? void 0 : _d.block_full_width) && \"notion-asset-wrapper-full\",\n        blockId\n      ),\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Asset, { block: value, zoomable: zoom && !isURL, children: ((_e = value == null ? void 0 : value.properties) == null ? void 0 : _e.caption) && !isURL && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"figcaption\", { className: \"notion-asset-caption\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Text, { value: value.properties.caption, block }) }) })\n    }\n  );\n  if (isURL) {\n    const caption = (_h = (_g = (_f = value == null ? void 0 : value.properties) == null ? void 0 : _f.caption) == null ? void 0 : _g[0]) == null ? void 0 : _h[0];\n    const id = (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.parsePageId)(caption, { uuid: true });\n    const isPage = (caption == null ? void 0 : caption.charAt(0)) === \"/\" && id;\n    const captionHostname = extractHostname(caption);\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n      components.PageLink,\n      {\n        style: urlStyle,\n        href: isPage ? mapPageUrl(id) : caption,\n        target: captionHostname && captionHostname !== rootDomain && !(caption == null ? void 0 : caption.startsWith(\"/\")) ? \"blank_\" : null,\n        children: figure\n      }\n    );\n  }\n  return figure;\n}\nfunction isValidURL(str) {\n  const pattern = new RegExp(\n    \"^(https?:\\\\/\\\\/)?((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*(\\\\?[;&a-z\\\\d%_.~+=-]*)?(\\\\#[-a-z\\\\d_]*)?$\",\n    \"i\"\n  );\n  return !!pattern.test(str);\n}\nfunction extractHostname(url) {\n  try {\n    const hostname = new URL(url).hostname;\n    return hostname;\n  } catch (e) {\n    return \"\";\n  }\n}\n\n// src/icons/check.tsx\n\nfunction SvgCheck(props) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"svg\", { viewBox: \"0 0 14 14\", ...props, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"path\", { d: \"M5.5 12L14 3.5 12.5 2l-7 7-4-4.003L0 6.499z\" }) });\n}\nvar check_default = SvgCheck;\n\n// src/components/checkbox.tsx\n\nfunction Checkbox({\n  isChecked\n}) {\n  let content = null;\n  if (isChecked) {\n    content = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-property-checkbox-checked\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(check_default, {}) });\n  } else {\n    content = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-property-checkbox-unchecked\" });\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", { className: \"notion-property notion-property-checkbox\", children: content });\n}\n\n// src/next.tsx\n\n\n\nvar wrapNextImage = (NextImage) => {\n  return react__WEBPACK_IMPORTED_MODULE_0__.memo(function ReactNotionXNextImage({\n    src,\n    alt,\n    width,\n    height,\n    className,\n    fill,\n    ...rest\n  }) {\n    if (fill === \"undefined\") {\n      fill = !(width && height);\n    }\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n      NextImage,\n      {\n        className,\n        src,\n        alt,\n        width: !fill && width && height ? width : void 0,\n        height: !fill && width && height ? height : void 0,\n        fill,\n        ...rest\n      }\n    );\n  }, react_fast_compare__WEBPACK_IMPORTED_MODULE_6__);\n};\nvar wrapNextLegacyImage = (NextLegacyImage) => {\n  return react__WEBPACK_IMPORTED_MODULE_0__.memo(function ReactNotionXNextLegacyImage({\n    src,\n    alt,\n    width,\n    height,\n    className,\n    style,\n    layout,\n    ...rest\n  }) {\n    if (!layout) {\n      layout = width && height ? \"intrinsic\" : \"fill\";\n    }\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n      NextLegacyImage,\n      {\n        className,\n        src,\n        alt,\n        width: layout === \"intrinsic\" && width,\n        height: layout === \"intrinsic\" && height,\n        objectFit: style == null ? void 0 : style.objectFit,\n        objectPosition: style == null ? void 0 : style.objectPosition,\n        layout,\n        ...rest\n      }\n    );\n  }, react_fast_compare__WEBPACK_IMPORTED_MODULE_6__);\n};\nfunction wrapNextLink(NextLink) {\n  return ({\n    href,\n    as,\n    passHref,\n    prefetch,\n    replace,\n    scroll,\n    shallow,\n    locale,\n    ...linkProps\n  }) => {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n      NextLink,\n      {\n        href,\n        as,\n        passHref,\n        prefetch,\n        replace,\n        scroll,\n        shallow,\n        locale,\n        legacyBehavior: true,\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"a\", { ...linkProps })\n      }\n    );\n  };\n}\n\n// src/context.tsx\n\nfunction DefaultLink(props) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"a\", { target: \"_blank\", rel: \"noopener noreferrer\", ...props });\n}\nvar DefaultLinkMemo = react__WEBPACK_IMPORTED_MODULE_0__.memo(DefaultLink);\nfunction DefaultPageLink(props) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"a\", { ...props });\n}\nvar DefaultPageLinkMemo = react__WEBPACK_IMPORTED_MODULE_0__.memo(DefaultPageLink);\nfunction DefaultEmbed(props) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(AssetWrapper, { ...props });\n}\nvar DefaultHeader = Header;\nfunction dummyLink({ href, rel, target, title, ...rest }) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", { ...rest });\n}\nvar dummyComponent = (name) => () => {\n  console.warn(\n    `Warning: using empty component \"${name}\" (you should override this in NotionRenderer.components)`\n  );\n  return null;\n};\nvar dummyOverrideFn = (_, defaultValueFn) => defaultValueFn();\nvar defaultComponents = {\n  Image: null,\n  // disable custom images by default\n  Link: DefaultLinkMemo,\n  PageLink: DefaultPageLinkMemo,\n  Checkbox,\n  Callout: void 0,\n  // use the built-in callout rendering by default\n  Code: dummyComponent(\"Code\"),\n  Equation: dummyComponent(\"Equation\"),\n  Collection: dummyComponent(\"Collection\"),\n  Property: void 0,\n  // use the built-in property rendering by default\n  propertyTextValue: dummyOverrideFn,\n  propertySelectValue: dummyOverrideFn,\n  propertyRelationValue: dummyOverrideFn,\n  propertyFormulaValue: dummyOverrideFn,\n  propertyTitleValue: dummyOverrideFn,\n  propertyPersonValue: dummyOverrideFn,\n  propertyFileValue: dummyOverrideFn,\n  propertyCheckboxValue: dummyOverrideFn,\n  propertyUrlValue: dummyOverrideFn,\n  propertyEmailValue: dummyOverrideFn,\n  propertyPhoneNumberValue: dummyOverrideFn,\n  propertyNumberValue: dummyOverrideFn,\n  propertyLastEditedTimeValue: dummyOverrideFn,\n  propertyCreatedTimeValue: dummyOverrideFn,\n  propertyDateValue: dummyOverrideFn,\n  propertyAutoIncrementIdValue: dummyOverrideFn,\n  Pdf: dummyComponent(\"Pdf\"),\n  Tweet: dummyComponent(\"Tweet\"),\n  Modal: dummyComponent(\"Modal\"),\n  Header: DefaultHeader,\n  Embed: DefaultEmbed\n};\nvar defaultNotionContext = {\n  recordMap: {\n    block: {},\n    collection: {},\n    collection_view: {},\n    collection_query: {},\n    notion_user: {},\n    signed_urls: {}\n  },\n  components: defaultComponents,\n  mapPageUrl: (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.defaultMapPageUrl)(),\n  mapImageUrl: notion_utils__WEBPACK_IMPORTED_MODULE_4__.defaultMapImageUrl,\n  searchNotion: void 0,\n  isShowingSearch: false,\n  onHideSearch: void 0,\n  fullPage: false,\n  darkMode: false,\n  previewImages: false,\n  forceCustomImages: false,\n  showCollectionViewDropdown: true,\n  linkTableTitleProperties: true,\n  isLinkCollectionToUrlProperty: false,\n  showTableOfContents: false,\n  minTableOfContentsItems: 3,\n  defaultPageIcon: null,\n  defaultPageCover: null,\n  defaultPageCoverPosition: 0.5,\n  zoom: null\n};\nvar ctx = react__WEBPACK_IMPORTED_MODULE_0__.createContext(defaultNotionContext);\nfunction NotionContextProvider({\n  components: themeComponents = {},\n  children,\n  mapPageUrl,\n  mapImageUrl,\n  rootPageId,\n  ...rest\n}) {\n  for (const key of Object.keys(rest)) {\n    if (rest[key] === void 0) {\n      delete rest[key];\n    }\n  }\n  const wrappedThemeComponents = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => ({\n      ...themeComponents\n    }),\n    [themeComponents]\n  );\n  if (wrappedThemeComponents.nextImage && wrappedThemeComponents.nextLegacyImage) {\n    console.warn(\n      \"You should not pass both nextImage and nextLegacyImage. Only nextImage component will be used.\"\n    );\n    wrappedThemeComponents.Image = wrapNextImage(themeComponents.nextImage);\n  } else if (wrappedThemeComponents.nextImage) {\n    wrappedThemeComponents.Image = wrapNextImage(themeComponents.nextImage);\n  } else if (wrappedThemeComponents.nextLegacyImage) {\n    wrappedThemeComponents.Image = wrapNextLegacyImage(\n      themeComponents.nextLegacyImage\n    );\n  }\n  if (wrappedThemeComponents.nextLink) {\n    wrappedThemeComponents.nextLink = wrapNextLink(themeComponents.nextLink);\n  }\n  for (const key of Object.keys(wrappedThemeComponents)) {\n    if (!wrappedThemeComponents[key]) {\n      delete wrappedThemeComponents[key];\n    }\n  }\n  const value = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => ({\n      ...defaultNotionContext,\n      ...rest,\n      rootPageId,\n      mapPageUrl: mapPageUrl != null ? mapPageUrl : (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.defaultMapPageUrl)(rootPageId),\n      mapImageUrl: mapImageUrl != null ? mapImageUrl : notion_utils__WEBPACK_IMPORTED_MODULE_4__.defaultMapImageUrl,\n      components: { ...defaultComponents, ...wrappedThemeComponents }\n    }),\n    [mapImageUrl, mapPageUrl, wrappedThemeComponents, rootPageId, rest]\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(ctx.Provider, { value, children });\n}\nvar NotionContextConsumer = ctx.Consumer;\nvar useNotionContext = () => {\n  return react__WEBPACK_IMPORTED_MODULE_0__.useContext(ctx);\n};\n\n// src/icons/search-icon.tsx\n\n\nfunction SearchIcon(props) {\n  const { className, ...rest } = props;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"svg\", { className: cs(\"notion-icon\", className), viewBox: \"0 0 17 17\", ...rest, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"path\", { d: \"M6.78027 13.6729C8.24805 13.6729 9.60156 13.1982 10.709 12.4072L14.875 16.5732C15.0684 16.7666 15.3232 16.8633 15.5957 16.8633C16.167 16.8633 16.5713 16.4238 16.5713 15.8613C16.5713 15.5977 16.4834 15.3516 16.29 15.1582L12.1504 11.0098C13.0205 9.86719 13.5391 8.45215 13.5391 6.91406C13.5391 3.19629 10.498 0.155273 6.78027 0.155273C3.0625 0.155273 0.0214844 3.19629 0.0214844 6.91406C0.0214844 10.6318 3.0625 13.6729 6.78027 13.6729ZM6.78027 12.2139C3.87988 12.2139 1.48047 9.81445 1.48047 6.91406C1.48047 4.01367 3.87988 1.61426 6.78027 1.61426C9.68066 1.61426 12.0801 4.01367 12.0801 6.91406C12.0801 9.81445 9.68066 12.2139 6.78027 12.2139Z\" }) });\n}\n\n// src/components/search-dialog.tsx\nvar import_lodash = __toESM(require_lodash(), 1);\n\n\n\n// src/icons/clear-icon.tsx\n\n\nfunction ClearIcon(props) {\n  const { className, ...rest } = props;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"svg\", { className: cs(\"notion-icon\", className), ...rest, viewBox: \"0 0 30 30\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"path\", { d: \"M15,0C6.716,0,0,6.716,0,15s6.716,15,15,15s15-6.716,15-15S23.284,0,15,0z M22,20.6L20.6,22L15,16.4L9.4,22L8,20.6l5.6-5.6 L8,9.4L9.4,8l5.6,5.6L20.6,8L22,9.4L16.4,15L22,20.6z\" }) });\n}\n\n// src/icons/loading-icon.tsx\n\n\nfunction LoadingIcon(props) {\n  const { className, ...rest } = props;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"svg\", { className: cs(\"notion-icon\", className), ...rest, viewBox: \"0 0 24 24\", children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"defs\", { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\n      \"linearGradient\",\n      {\n        x1: \"28.1542969%\",\n        y1: \"63.7402344%\",\n        x2: \"74.6289062%\",\n        y2: \"17.7832031%\",\n        id: \"linearGradient-1\",\n        children: [\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"stop\", { stopColor: \"rgba(164, 164, 164, 1)\", offset: \"0%\" }),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n            \"stop\",\n            {\n              stopColor: \"rgba(164, 164, 164, 0)\",\n              stopOpacity: \"0\",\n              offset: \"100%\"\n            }\n          )\n        ]\n      }\n    ) }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"g\", { id: \"Page-1\", stroke: \"none\", strokeWidth: \"1\", fill: \"none\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"g\", { transform: \"translate(-236.000000, -286.000000)\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"g\", { transform: \"translate(238.000000, 286.000000)\", children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n        \"circle\",\n        {\n          id: \"Oval-2\",\n          stroke: \"url(#linearGradient-1)\",\n          strokeWidth: \"4\",\n          cx: \"10\",\n          cy: \"12\",\n          r: \"10\"\n        }\n      ),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n        \"path\",\n        {\n          d: \"M10,2 C4.4771525,2 0,6.4771525 0,12\",\n          id: \"Oval-2\",\n          stroke: \"rgba(164, 164, 164, 1)\",\n          strokeWidth: \"4\"\n        }\n      ),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n        \"rect\",\n        {\n          id: \"Rectangle-1\",\n          fill: \"rgba(164, 164, 164, 1)\",\n          x: \"8\",\n          y: \"0\",\n          width: \"4\",\n          height: \"4\",\n          rx: \"8\"\n        }\n      )\n    ] }) }) })\n  ] });\n}\n\n// src/components/search-dialog.tsx\n\nvar SearchDialog = class extends react__WEBPACK_IMPORTED_MODULE_0__.Component {\n  constructor(props) {\n    super(props);\n    __publicField(this, \"state\", {\n      isLoading: false,\n      query: \"\",\n      searchResult: null,\n      searchError: null\n    });\n    __publicField(this, \"_inputRef\");\n    __publicField(this, \"_search\");\n    __publicField(this, \"_onAfterOpen\", () => {\n      if (this._inputRef.current) {\n        this._inputRef.current.focus();\n      }\n    });\n    __publicField(this, \"_onChangeQuery\", (e) => {\n      const query = e.target.value;\n      this.setState({ query });\n      if (!query.trim()) {\n        this.setState({ isLoading: false, searchResult: null, searchError: null });\n        return;\n      } else {\n        this._search();\n      }\n    });\n    __publicField(this, \"_onClearQuery\", () => {\n      this._onChangeQuery({ target: { value: \"\" } });\n    });\n    __publicField(this, \"_warmupSearch\", async () => {\n      const { searchNotion, rootBlockId } = this.props;\n      await searchNotion({\n        query: \"\",\n        ancestorId: rootBlockId\n      });\n    });\n    __publicField(this, \"_searchImpl\", async () => {\n      const { searchNotion, rootBlockId } = this.props;\n      const { query } = this.state;\n      if (!query.trim()) {\n        this.setState({ isLoading: false, searchResult: null, searchError: null });\n        return;\n      }\n      this.setState({ isLoading: true });\n      const result = await searchNotion({\n        query,\n        ancestorId: rootBlockId\n      });\n      console.log(\"search\", query, result);\n      let searchResult = null;\n      let searchError = null;\n      if (result.error || result.errorId) {\n        searchError = result;\n      } else {\n        searchResult = { ...result };\n        const results = searchResult.results.map((result2) => {\n          var _a, _b;\n          const block = (_a = searchResult.recordMap.block[result2.id]) == null ? void 0 : _a.value;\n          if (!block) return;\n          const title = (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.getBlockTitle)(block, searchResult.recordMap);\n          if (!title) {\n            return;\n          }\n          result2.title = title;\n          result2.block = block;\n          result2.recordMap = searchResult.recordMap;\n          result2.page = (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.getBlockParentPage)(block, searchResult.recordMap, {\n            inclusive: true\n          }) || block;\n          if (!result2.page.id) {\n            return;\n          }\n          if ((_b = result2.highlight) == null ? void 0 : _b.text) {\n            result2.highlight.html = result2.highlight.text.replaceAll(/<gzknfouu>/gi, \"<b>\").replaceAll(/<\\/gzknfouu>/gi, \"</b>\");\n          }\n          return result2;\n        }).filter(Boolean);\n        const searchResultsMap = Object.fromEntries(\n          results.map((result2) => [result2.page.id, result2])\n        );\n        searchResult.results = Object.values(searchResultsMap);\n      }\n      if (this.state.query === query) {\n        this.setState({ isLoading: false, searchResult, searchError });\n      }\n    });\n    this._inputRef = react__WEBPACK_IMPORTED_MODULE_0__.createRef();\n  }\n  componentDidMount() {\n    this._search = (0, import_lodash.default)(this._searchImpl.bind(this), 1e3);\n    void this._warmupSearch();\n  }\n  render() {\n    const { isOpen, onClose } = this.props;\n    const { isLoading, query, searchResult, searchError } = this.state;\n    const hasQuery = !!query.trim();\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(NotionContextConsumer, { children: (ctx2) => {\n      const { components, defaultPageIcon, mapPageUrl } = ctx2;\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n        components.Modal,\n        {\n          isOpen,\n          contentLabel: \"Search\",\n          className: \"notion-search\",\n          overlayClassName: \"notion-search-overlay\",\n          onRequestClose: onClose,\n          onAfterOpen: this._onAfterOpen,\n          children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { className: \"quickFindMenu\", children: [\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { className: \"searchBar\", children: [\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"inlineIcon\", children: isLoading ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(LoadingIcon, { className: \"loadingIcon\" }) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(SearchIcon, {}) }),\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n                \"input\",\n                {\n                  className: \"searchInput\",\n                  placeholder: \"Search\",\n                  value: query,\n                  ref: this._inputRef,\n                  onChange: this._onChangeQuery\n                }\n              ),\n              query && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n                \"div\",\n                {\n                  role: \"button\",\n                  className: \"clearButton\",\n                  onClick: this._onClearQuery,\n                  children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(ClearIcon, { className: \"clearIcon\" })\n                }\n              )\n            ] }),\n            hasQuery && searchResult && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, { children: searchResult.results.length ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\n              NotionContextProvider,\n              {\n                ...ctx2,\n                recordMap: searchResult.recordMap,\n                children: [\n                  /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"resultsPane\", children: searchResult.results.map((result) => {\n                    var _a;\n                    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\n                      components.PageLink,\n                      {\n                        className: cs(\"result\", \"notion-page-link\"),\n                        href: mapPageUrl(\n                          result.page.id,\n                          // TODO\n                          searchResult.recordMap\n                        ),\n                        children: [\n                          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n                            PageTitle,\n                            {\n                              block: result.page,\n                              defaultIcon: defaultPageIcon\n                            }\n                          ),\n                          ((_a = result.highlight) == null ? void 0 : _a.html) && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n                            \"div\",\n                            {\n                              className: \"notion-search-result-highlight\",\n                              dangerouslySetInnerHTML: {\n                                __html: result.highlight.html\n                              }\n                            }\n                          )\n                        ]\n                      },\n                      result.id\n                    );\n                  }) }),\n                  /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"footer\", { className: \"resultsFooter\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { children: [\n                    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", { className: \"resultsCount\", children: searchResult.total }),\n                    searchResult.total === 1 ? \" result\" : \" results\"\n                  ] }) })\n                ]\n              }\n            ) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { className: \"noResultsPane\", children: [\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"noResults\", children: \"No results\" }),\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"noResultsDetail\", children: \"Try different search terms\" })\n            ] }) }),\n            hasQuery && !searchResult && searchError && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"noResultsPane\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"noResults\", children: \"Search error\" }) })\n          ] })\n        }\n      );\n    } });\n  }\n};\n\n// src/components/header.tsx\n\nfunction Header({\n  block\n}) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"header\", { className: \"notion-header\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { className: \"notion-nav-header\", children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Breadcrumbs, { block }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Search, { block })\n  ] }) });\n}\nfunction Breadcrumbs({\n  block,\n  rootOnly = false\n}) {\n  const { recordMap, mapPageUrl, components } = useNotionContext();\n  const breadcrumbs = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const tempBreadcrumbs = (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.getPageBreadcrumbs)(recordMap, block.id);\n    if (rootOnly) {\n      return [tempBreadcrumbs == null ? void 0 : tempBreadcrumbs[0]].filter(Boolean);\n    }\n    return tempBreadcrumbs;\n  }, [recordMap, block.id, rootOnly]);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"breadcrumbs\", children: breadcrumbs == null ? void 0 : breadcrumbs.map((breadcrumb, index) => {\n    if (!breadcrumb) {\n      return null;\n    }\n    const pageLinkProps = {};\n    const componentMap = {\n      pageLink: components.PageLink\n    };\n    if (breadcrumb.active) {\n      componentMap.pageLink = (props) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { ...props });\n    } else {\n      pageLinkProps.href = mapPageUrl(breadcrumb.pageId);\n    }\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\n        componentMap.pageLink,\n        {\n          className: cs(\"breadcrumb\", breadcrumb.active && \"active\"),\n          ...pageLinkProps,\n          children: [\n            breadcrumb.icon && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(PageIcon, { className: \"icon\", block: breadcrumb.block }),\n            breadcrumb.title && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", { className: \"title\", children: breadcrumb.title })\n          ]\n        }\n      ),\n      index < breadcrumbs.length - 1 && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", { className: \"spacer\", children: \"/\" })\n    ] }, breadcrumb.pageId);\n  }) }, \"breadcrumbs\");\n}\nfunction Search({\n  block,\n  search,\n  title = \"Search\"\n}) {\n  const { searchNotion, rootPageId, isShowingSearch, onHideSearch } = useNotionContext();\n  const onSearchNotion = search || searchNotion;\n  const [isSearchOpen, setIsSearchOpen] = react__WEBPACK_IMPORTED_MODULE_0__.useState(isShowingSearch);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    setIsSearchOpen(isShowingSearch);\n  }, [isShowingSearch]);\n  const onOpenSearch = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    setIsSearchOpen(true);\n  }, []);\n  const onCloseSearch = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    setIsSearchOpen(false);\n    if (onHideSearch) {\n      onHideSearch();\n    }\n  }, [onHideSearch]);\n  (0,react_hotkeys_hook__WEBPACK_IMPORTED_MODULE_1__.useHotkeys)(\"cmd+p\", (event) => {\n    onOpenSearch();\n    event.preventDefault();\n    event.stopPropagation();\n  });\n  (0,react_hotkeys_hook__WEBPACK_IMPORTED_MODULE_1__.useHotkeys)(\"cmd+k\", (event) => {\n    onOpenSearch();\n    event.preventDefault();\n    event.stopPropagation();\n  });\n  const hasSearch = !!onSearchNotion;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, { children: [\n    hasSearch && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\n      \"div\",\n      {\n        role: \"button\",\n        className: cs(\"breadcrumb\", \"button\", \"notion-search-button\"),\n        onClick: onOpenSearch,\n        children: [\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(SearchIcon, { className: \"searchIcon\" }),\n          title && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", { className: \"title\", children: title })\n        ]\n      }\n    ),\n    isSearchOpen && hasSearch && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n      SearchDialog,\n      {\n        isOpen: isSearchOpen,\n        rootBlockId: rootPageId || (block == null ? void 0 : block.id),\n        onClose: onCloseSearch,\n        searchNotion: onSearchNotion\n      }\n    )\n  ] });\n}\n\n// src/renderer.tsx\n\n\n\n\n// src/block.tsx\n\n\n\n// src/components/audio.tsx\n\n\nfunction Audio({\n  block,\n  className\n}) {\n  var _a, _b, _c;\n  const { recordMap } = useNotionContext();\n  let source = recordMap.signed_urls[block.id] || ((_c = (_b = (_a = block.properties) == null ? void 0 : _a.source) == null ? void 0 : _b[0]) == null ? void 0 : _c[0]);\n  if (!source) {\n    return null;\n  }\n  if (block.space_id) {\n    const url = new URL(source);\n    url.searchParams.set(\"spaceId\", block.space_id);\n    source = url.toString();\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: cs(\"notion-audio\", className), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"audio\", { controls: true, preload: \"none\", src: source }) });\n}\n\n// src/components/file.tsx\n\n\n// src/icons/file-icon.tsx\n\n\nfunction FileIcon(props) {\n  const { className, ...rest } = props;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"svg\", { className, ...rest, viewBox: \"0 0 30 30\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"path\", { d: \"M22,8v12c0,3.866-3.134,7-7,7s-7-3.134-7-7V8c0-2.762,2.238-5,5-5s5,2.238,5,5v12c0,1.657-1.343,3-3,3s-3-1.343-3-3V8h-2v12c0,2.762,2.238,5,5,5s5-2.238,5-5V8c0-3.866-3.134-7-7-7S6,4.134,6,8v12c0,4.971,4.029,9,9,9s9-4.029,9-9V8H22z\" }) });\n}\n\n// src/components/file.tsx\n\nfunction File({\n  block,\n  className\n}) {\n  var _a, _b, _c, _d, _e;\n  const { components, recordMap } = useNotionContext();\n  let source = recordMap.signed_urls[block.id] || ((_c = (_b = (_a = block.properties) == null ? void 0 : _a.source) == null ? void 0 : _b[0]) == null ? void 0 : _c[0]);\n  if (!source) {\n    return null;\n  }\n  if (block.space_id) {\n    const url = new URL(source);\n    url.searchParams.set(\"spaceId\", block.space_id);\n    source = url.toString();\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: cs(\"notion-file\", className), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\n    components.Link,\n    {\n      className: \"notion-file-link\",\n      href: source,\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(FileIcon, { className: \"notion-file-icon\" }),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { className: \"notion-file-info\", children: [\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-file-title\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Text, { value: ((_d = block.properties) == null ? void 0 : _d.title) || [[\"File\"]], block }) }),\n          ((_e = block.properties) == null ? void 0 : _e.size) && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-file-size\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Text, { value: block.properties.size, block }) })\n        ] })\n      ]\n    }\n  ) });\n}\n\n// src/components/google-drive.tsx\n\n\nfunction GoogleDrive({\n  block,\n  className\n}) {\n  var _a;\n  const { components, mapImageUrl } = useNotionContext();\n  const properties = (_a = block.format) == null ? void 0 : _a.drive_properties;\n  if (!properties) return null;\n  let domain;\n  try {\n    const url = new URL(properties.url);\n    domain = url.hostname;\n  } catch (e) {\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: cs(\"notion-google-drive\", className), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\n    components.Link,\n    {\n      className: \"notion-google-drive-link\",\n      href: properties.url,\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-google-drive-preview\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n          GracefulImage,\n          {\n            src: mapImageUrl(properties.thumbnail, block),\n            alt: properties.title || \"Google Drive Document\",\n            loading: \"lazy\"\n          }\n        ) }),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { className: \"notion-google-drive-body\", children: [\n          properties.title && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-google-drive-body-title\", children: properties.title }),\n          properties.icon && domain && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { className: \"notion-google-drive-body-source\", children: [\n            properties.icon && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n              \"div\",\n              {\n                className: \"notion-google-drive-body-source-icon\",\n                style: {\n                  backgroundImage: `url(${properties.icon})`\n                }\n              }\n            ),\n            domain && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-google-drive-body-source-domain\", children: domain })\n          ] })\n        ] })\n      ]\n    }\n  ) });\n}\n\n// src/components/page-aside.tsx\nvar import_lodash2 = __toESM(require_lodash(), 1);\n\n\n\nfunction PageAside({\n  toc,\n  activeSection,\n  setActiveSection,\n  pageAside,\n  hasToc,\n  hasAside,\n  className\n}) {\n  const throttleMs = 100;\n  const actionSectionScrollSpy = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0, import_lodash2.default)(() => {\n      const sections = document.getElementsByClassName(\"notion-h\");\n      let prevBBox = null;\n      let currentSectionId = activeSection;\n      for (const section of sections) {\n        if (!section || !(section instanceof Element)) continue;\n        if (!currentSectionId) {\n          currentSectionId = section.dataset.id;\n        }\n        const bbox = section.getBoundingClientRect();\n        const prevHeight = prevBBox ? bbox.top - prevBBox.bottom : 0;\n        const offset = Math.max(150, prevHeight / 4);\n        if (bbox.top - offset < 0) {\n          currentSectionId = section.dataset.id;\n          prevBBox = bbox;\n          continue;\n        }\n        break;\n      }\n      setActiveSection(currentSectionId);\n    }, throttleMs),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      // explicitly not taking a dependency on activeSection\n      setActiveSection\n    ]\n  );\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!hasToc) {\n      return;\n    }\n    window.addEventListener(\"scroll\", actionSectionScrollSpy);\n    actionSectionScrollSpy();\n    return () => {\n      window.removeEventListener(\"scroll\", actionSectionScrollSpy);\n    };\n  }, [hasToc, actionSectionScrollSpy]);\n  if (!hasAside) {\n    return null;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"aside\", { className: cs(\"notion-aside\", className), children: [\n    hasToc && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { className: \"notion-aside-table-of-contents\", children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-aside-table-of-contents-header\", children: \"Table of Contents\" }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"nav\", { className: \"notion-table-of-contents\", children: toc.map((tocItem) => {\n        const id = (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.uuidToId)(tocItem.id);\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n          \"a\",\n          {\n            href: `#${id}`,\n            className: cs(\n              \"notion-table-of-contents-item\",\n              `notion-table-of-contents-item-indent-level-${tocItem.indentLevel}`,\n              activeSection === id && \"notion-table-of-contents-active-item\"\n            ),\n            children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n              \"span\",\n              {\n                className: \"notion-table-of-contents-item-body\",\n                style: {\n                  display: \"inline-block\",\n                  marginLeft: tocItem.indentLevel * 16\n                },\n                children: tocItem.text\n              }\n            )\n          },\n          id\n        );\n      }) })\n    ] }),\n    pageAside\n  ] });\n}\n\n// src/components/sync-pointer-block.tsx\n\n\nfunction SyncPointerBlock({\n  block,\n  level\n}) {\n  var _a, _b;\n  if (!block) {\n    if (true) {\n      console.warn(\"missing sync pointer block\");\n    }\n    return null;\n  }\n  const syncPointerBlock = block;\n  const referencePointerId = (_b = (_a = syncPointerBlock == null ? void 0 : syncPointerBlock.format) == null ? void 0 : _a.transclusion_reference_pointer) == null ? void 0 : _b.id;\n  if (!referencePointerId) {\n    return null;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n    NotionBlockRenderer,\n    {\n      level,\n      blockId: referencePointerId\n    },\n    referencePointerId\n  );\n}\n\n// src/icons/link-icon.tsx\n\n\nfunction LinkIcon(props) {\n  const { className, ...rest } = props;\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n    \"svg\",\n    {\n      className,\n      ...rest,\n      viewBox: \"0 0 16 16\",\n      width: \"16\",\n      height: \"16\",\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n        \"path\",\n        {\n          fillRule: \"evenodd\",\n          d: \"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"\n        }\n      )\n    }\n  );\n}\n\n// src/block.tsx\n\nvar tocIndentLevelCache = {};\nvar pageCoverStyleCache = {};\nfunction Block(props) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _A, _B, _C, _D, _E, _F, _G, _H, _I, _J, _K, _L, _M, _N, _O, _P, _Q, _R, _S, _T;\n  const ctx2 = useNotionContext();\n  const {\n    components,\n    fullPage,\n    darkMode,\n    recordMap,\n    mapPageUrl,\n    mapImageUrl,\n    showTableOfContents,\n    minTableOfContentsItems,\n    defaultPageIcon,\n    defaultPageCover,\n    defaultPageCoverPosition\n  } = ctx2;\n  const [activeSection, setActiveSection] = react__WEBPACK_IMPORTED_MODULE_0__.useState(null);\n  const {\n    block,\n    children,\n    level,\n    className,\n    bodyClassName,\n    header,\n    footer,\n    pageHeader,\n    pageFooter,\n    pageTitle,\n    pageAside,\n    pageCover,\n    hideBlockId,\n    disableHeader\n  } = props;\n  if (!block) {\n    return null;\n  }\n  if (level === 0 && block.type === \"collection_view\") {\n    ;\n    block.type = \"collection_view_page\";\n  }\n  const blockId = hideBlockId ? \"notion-block\" : `notion-block-${(0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.uuidToId)(block.id)}`;\n  switch (block.type) {\n    case \"collection_view_page\":\n    // fallthrough\n    case \"page\":\n      if (level === 0) {\n        const {\n          page_icon = defaultPageIcon,\n          page_cover = defaultPageCover,\n          page_cover_position = defaultPageCoverPosition,\n          page_full_width,\n          page_small_text\n        } = block.format || {};\n        if (fullPage) {\n          const properties = block.type === \"page\" ? block.properties : {\n            title: (_b = (_a = recordMap.collection[(0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.getBlockCollectionId)(block, recordMap)]) == null ? void 0 : _a.value) == null ? void 0 : _b.name\n          };\n          const coverPosition = (1 - (page_cover_position || 0.5)) * 100;\n          const pageCoverObjectPosition = `center ${coverPosition}%`;\n          let pageCoverStyle = pageCoverStyleCache[pageCoverObjectPosition];\n          if (!pageCoverStyle) {\n            pageCoverStyle = pageCoverStyleCache[pageCoverObjectPosition] = {\n              objectPosition: pageCoverObjectPosition\n            };\n          }\n          const pageIcon = (_c = (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.getBlockIcon)(block, recordMap)) != null ? _c : defaultPageIcon;\n          const isPageIconUrl = pageIcon && (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.isUrl)(pageIcon);\n          const toc = (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.getPageTableOfContents)(\n            block,\n            recordMap\n          );\n          const hasToc = showTableOfContents && toc.length >= minTableOfContentsItems;\n          const hasAside = !!((hasToc || pageAside) && !page_full_width);\n          const hasPageCover = !!(pageCover || page_cover);\n          return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\n            \"div\",\n            {\n              className: cs(\n                \"notion\",\n                \"notion-app\",\n                darkMode ? \"dark-mode\" : \"light-mode\",\n                blockId,\n                className\n              ),\n              children: [\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-viewport\" }),\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { className: \"notion-frame\", children: [\n                  !disableHeader && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(components.Header, { block }),\n                  header,\n                  /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { className: \"notion-page-scroller\", children: [\n                    hasPageCover && (pageCover != null ? pageCover : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-page-cover-wrapper\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n                      LazyImage,\n                      {\n                        src: mapImageUrl(page_cover, block),\n                        alt: (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.getTextContent)(properties == null ? void 0 : properties.title),\n                        priority: true,\n                        className: \"notion-page-cover\",\n                        style: pageCoverStyle\n                      }\n                    ) })),\n                    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\n                      \"main\",\n                      {\n                        className: cs(\n                          \"notion-page\",\n                          hasPageCover ? \"notion-page-has-cover\" : \"notion-page-no-cover\",\n                          page_icon ? \"notion-page-has-icon\" : \"notion-page-no-icon\",\n                          isPageIconUrl ? \"notion-page-has-image-icon\" : \"notion-page-has-text-icon\",\n                          \"notion-full-page\",\n                          page_full_width && \"notion-full-width\",\n                          page_small_text && \"notion-small-text\",\n                          bodyClassName\n                        ),\n                        children: [\n                          page_icon && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n                            PageIcon,\n                            {\n                              block,\n                              defaultIcon: defaultPageIcon,\n                              inline: false\n                            }\n                          ),\n                          pageHeader,\n                          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"h1\", { className: \"notion-title\", children: pageTitle != null ? pageTitle : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Text, { value: properties == null ? void 0 : properties.title, block }) }),\n                          (block.type === \"collection_view_page\" || block.type === \"page\" && block.parent_table === \"collection\") && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(components.Collection, { block, ctx: ctx2 }),\n                          block.type !== \"collection_view_page\" && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\n                            \"div\",\n                            {\n                              className: cs(\n                                \"notion-page-content\",\n                                hasAside && \"notion-page-content-has-aside\",\n                                hasToc && \"notion-page-content-has-toc\"\n                              ),\n                              children: [\n                                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"article\", { className: \"notion-page-content-inner\", children }),\n                                hasAside && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n                                  PageAside,\n                                  {\n                                    toc,\n                                    activeSection,\n                                    setActiveSection,\n                                    hasToc,\n                                    hasAside,\n                                    pageAside\n                                  }\n                                )\n                              ]\n                            }\n                          ),\n                          pageFooter\n                        ]\n                      }\n                    ),\n                    footer\n                  ] })\n                ] })\n              ]\n            }\n          );\n        } else {\n          return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\n            \"main\",\n            {\n              className: cs(\n                \"notion\",\n                darkMode ? \"dark-mode\" : \"light-mode\",\n                \"notion-page\",\n                page_full_width && \"notion-full-width\",\n                page_small_text && \"notion-small-text\",\n                blockId,\n                className,\n                bodyClassName\n              ),\n              children: [\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-viewport\" }),\n                pageHeader,\n                (block.type === \"collection_view_page\" || block.type === \"page\" && block.parent_table === \"collection\") && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(components.Collection, { block, ctx: ctx2 }),\n                block.type !== \"collection_view_page\" && children,\n                pageFooter\n              ]\n            }\n          );\n        }\n      } else {\n        const blockColor = (_d = block.format) == null ? void 0 : _d.block_color;\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n          components.PageLink,\n          {\n            className: cs(\n              \"notion-page-link\",\n              blockColor && `notion-${blockColor}`,\n              blockId\n            ),\n            href: mapPageUrl(block.id),\n            children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(PageTitle, { block })\n          }\n        );\n      }\n    case \"header\":\n    // fallthrough\n    case \"sub_header\":\n    // fallthrough\n    case \"sub_sub_header\": {\n      if (!block.properties) return null;\n      const blockColor = (_e = block.format) == null ? void 0 : _e.block_color;\n      const id = (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.uuidToId)(block.id);\n      const title = (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.getTextContent)(block.properties.title) || `Notion Header ${id}`;\n      let indentLevel = tocIndentLevelCache[block.id];\n      let indentLevelClass;\n      if (indentLevel === void 0) {\n        const page = (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.getBlockParentPage)(block, recordMap);\n        if (page) {\n          const toc = (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.getPageTableOfContents)(page, recordMap);\n          const tocItem = toc.find((tocItem2) => tocItem2.id === block.id);\n          if (tocItem) {\n            indentLevel = tocItem.indentLevel;\n            tocIndentLevelCache[block.id] = indentLevel;\n          }\n        }\n      }\n      if (indentLevel !== void 0) {\n        indentLevelClass = `notion-h-indent-${indentLevel}`;\n      }\n      const isH1 = block.type === \"header\";\n      const isH2 = block.type === \"sub_header\";\n      const isH3 = block.type === \"sub_sub_header\";\n      const classNameStr = cs(\n        isH1 && \"notion-h notion-h1\",\n        isH2 && \"notion-h notion-h2\",\n        isH3 && \"notion-h notion-h3\",\n        blockColor && `notion-${blockColor}`,\n        indentLevelClass,\n        blockId\n      );\n      const innerHeader = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"span\", { children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { id, className: \"notion-header-anchor\" }),\n        !((_f = block.format) == null ? void 0 : _f.toggleable) && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"a\", { className: \"notion-hash-link\", href: `#${id}`, title, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(LinkIcon, {}) }),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"span\", { className: \"notion-h-title\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Text, { value: block.properties.title, block }) })\n      ] });\n      let headerBlock = null;\n      if (isH1) {\n        headerBlock = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"h2\", { className: classNameStr, \"data-id\": id, children: innerHeader });\n      } else if (isH2) {\n        headerBlock = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"h3\", { className: classNameStr, \"data-id\": id, children: innerHeader });\n      } else {\n        headerBlock = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"h4\", { className: classNameStr, \"data-id\": id, children: innerHeader });\n      }\n      if ((_g = block.format) == null ? void 0 : _g.toggleable) {\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"details\", { className: cs(\"notion-toggle\", blockId), children: [\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"summary\", { children: headerBlock }),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { children })\n        ] });\n      } else {\n        return headerBlock;\n      }\n    }\n    case \"divider\":\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"hr\", { className: cs(\"notion-hr\", blockId) });\n    case \"text\": {\n      if (!block.properties && !((_h = block.content) == null ? void 0 : _h.length)) {\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: cs(\"notion-blank\", blockId), children: \"\\xA0\" });\n      }\n      const blockColor = (_i = block.format) == null ? void 0 : _i.block_color;\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\n        \"div\",\n        {\n          className: cs(\n            \"notion-text\",\n            blockColor && `notion-${blockColor}`,\n            blockId\n          ),\n          children: [\n            ((_j = block.properties) == null ? void 0 : _j.title) && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Text, { value: block.properties.title, block }),\n            children && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-text-children\", children })\n          ]\n        }\n      );\n    }\n    case \"bulleted_list\":\n    // fallthrough\n    case \"numbered_list\": {\n      const wrapList = (content, start2) => block.type === \"bulleted_list\" ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"ul\", { className: cs(\"notion-list\", \"notion-list-disc\", blockId), children: content }) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n        \"ol\",\n        {\n          start: start2,\n          className: cs(\"notion-list\", \"notion-list-numbered\", blockId),\n          style: block.type === \"numbered_list\" ? {\n            listStyleType: getListStyle(\n              getListNestingLevel(block.id, recordMap.block)\n            )\n          } : void 0,\n          children: content\n        }\n      );\n      let output = null;\n      const isTopLevel = block.type !== ((_l = (_k = recordMap.block[block.parent_id]) == null ? void 0 : _k.value) == null ? void 0 : _l.type);\n      const start = getListNumber(block.id, recordMap.block);\n      if (block.content) {\n        const listItem = block.properties ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"li\", { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Text, { value: block.properties.title, block }) }) : null;\n        if (block.type === \"bulleted_list\") {\n          output = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, { children: [\n            listItem,\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"ul\", { className: cs(\"notion-list\", \"notion-list-disc\", blockId), children })\n          ] });\n        } else {\n          const nestingLevel = getListNestingLevel(block.id, recordMap.block);\n          output = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, { children: [\n            listItem,\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n              \"ol\",\n              {\n                className: cs(\"notion-list\", \"notion-list-numbered\", blockId),\n                style: {\n                  listStyleType: getListStyle(nestingLevel + 1)\n                },\n                children\n              }\n            )\n          ] });\n        }\n      } else {\n        output = block.properties ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"li\", { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Text, { value: block.properties.title, block }) }) : null;\n      }\n      return isTopLevel ? wrapList(output, start) : output;\n    }\n    case \"embed\":\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(components.Embed, { blockId, block });\n    case \"replit\":\n    // fallthrough\n    case \"tweet\":\n    // fallthrough\n    case \"maps\":\n    // fallthrough\n    case \"pdf\":\n    // fallthrough\n    case \"figma\":\n    // fallthrough\n    case \"typeform\":\n    // fallthrough\n    case \"codepen\":\n    // fallthrough\n    case \"excalidraw\":\n    // fallthrough\n    case \"image\":\n    // fallthrough\n    case \"gist\":\n    // fallthrough\n    case \"video\":\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(AssetWrapper, { blockId, block });\n    case \"drive\": {\n      const properties = (_m = block.format) == null ? void 0 : _m.drive_properties;\n      if (!properties) {\n        if ((_n = block.format) == null ? void 0 : _n.display_source) {\n          return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(AssetWrapper, { blockId, block });\n        }\n      }\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n        GoogleDrive,\n        {\n          block,\n          className: blockId\n        }\n      );\n    }\n    case \"audio\":\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Audio, { block, className: blockId });\n    case \"file\":\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(File, { block, className: blockId });\n    case \"equation\":\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n        components.Equation,\n        {\n          block,\n          inline: false,\n          className: blockId\n        }\n      );\n    case \"code\":\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(components.Code, { block });\n    case \"column_list\":\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: cs(\"notion-row\", blockId), children });\n    case \"column\": {\n      const spacerWidth = `min(32px, 4vw)`;\n      const ratio = ((_o = block.format) == null ? void 0 : _o.column_ratio) || 0.5;\n      const parent = (_p = recordMap.block[block.parent_id]) == null ? void 0 : _p.value;\n      const columns = ((_q = parent == null ? void 0 : parent.content) == null ? void 0 : _q.length) || Math.max(2, Math.ceil(1 / ratio));\n      const width = `calc((100% - (${columns - 1} * ${spacerWidth})) * ${ratio})`;\n      const style = { width };\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment, { children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: cs(\"notion-column\", blockId), style, children }),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-spacer\" })\n      ] });\n    }\n    case \"quote\": {\n      if (!block.properties) return null;\n      const blockColor = (_r = block.format) == null ? void 0 : _r.block_color;\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\n        \"blockquote\",\n        {\n          className: cs(\n            \"notion-quote\",\n            blockColor && `notion-${blockColor}`,\n            blockId\n          ),\n          children: [\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Text, { value: block.properties.title, block }) }),\n            children\n          ]\n        }\n      );\n    }\n    case \"collection_view\":\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(components.Collection, { block, className: blockId, ctx: ctx2 });\n    case \"callout\":\n      if (components.Callout) {\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(components.Callout, { block, className: blockId });\n      } else {\n        return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\n          \"div\",\n          {\n            className: cs(\n              \"notion-callout\",\n              ((_s = block.format) == null ? void 0 : _s.block_color) && `notion-${(_t = block.format) == null ? void 0 : _t.block_color}_co`,\n              blockId\n            ),\n            children: [\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(PageIcon, { block, hideDefaultIcon: true }),\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { className: \"notion-callout-text\", children: [\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Text, { value: (_u = block.properties) == null ? void 0 : _u.title, block }),\n                children\n              ] })\n            ]\n          }\n        );\n      }\n    case \"bookmark\": {\n      if (!block.properties) return null;\n      const link = block.properties.link;\n      if (!link || !((_v = link[0]) == null ? void 0 : _v[0])) return null;\n      let title = (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.getTextContent)(block.properties.title);\n      if (!title) {\n        title = (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.getTextContent)(link);\n      }\n      if (title) {\n        if (title.startsWith(\"http\")) {\n          try {\n            const url = new URL(title);\n            title = url.hostname;\n          } catch (e) {\n          }\n        }\n      }\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-row\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\n        components.Link,\n        {\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          className: cs(\n            \"notion-bookmark\",\n            ((_w = block.format) == null ? void 0 : _w.block_color) && `notion-${block.format.block_color}`,\n            blockId\n          ),\n          href: link[0][0],\n          children: [\n            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { children: [\n              title && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-bookmark-title\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Text, { value: [[title]], block }) }),\n              ((_x = block.properties) == null ? void 0 : _x.description) && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-bookmark-description\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Text, { value: (_y = block.properties) == null ? void 0 : _y.description, block }) }),\n              /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { className: \"notion-bookmark-link\", children: [\n                ((_z = block.format) == null ? void 0 : _z.bookmark_icon) && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-bookmark-link-icon\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n                  LazyImage,\n                  {\n                    src: mapImageUrl((_A = block.format) == null ? void 0 : _A.bookmark_icon, block),\n                    alt: title\n                  }\n                ) }),\n                /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-bookmark-link-text\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Text, { value: link, block }) })\n              ] })\n            ] }),\n            ((_B = block.format) == null ? void 0 : _B.bookmark_cover) && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-bookmark-image\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n              LazyImage,\n              {\n                src: mapImageUrl((_C = block.format) == null ? void 0 : _C.bookmark_cover, block),\n                alt: (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.getTextContent)((_D = block.properties) == null ? void 0 : _D.title),\n                style: {\n                  objectFit: \"cover\"\n                }\n              }\n            ) })\n          ]\n        }\n      ) });\n    }\n    case \"toggle\":\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"details\", { className: cs(\"notion-toggle\", blockId), children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"summary\", { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Text, { value: (_E = block.properties) == null ? void 0 : _E.title, block }) }),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { children })\n      ] });\n    case \"table_of_contents\": {\n      const page = (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.getBlockParentPage)(block, recordMap);\n      if (!page) return null;\n      const toc = (0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.getPageTableOfContents)(page, recordMap);\n      const blockColor = (_F = block.format) == null ? void 0 : _F.block_color;\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n        \"div\",\n        {\n          className: cs(\n            \"notion-table-of-contents\",\n            blockColor && `notion-${blockColor}`,\n            blockId\n          ),\n          children: toc.map((tocItem) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n            \"a\",\n            {\n              href: `#${(0,notion_utils__WEBPACK_IMPORTED_MODULE_4__.uuidToId)(tocItem.id)}`,\n              className: \"notion-table-of-contents-item\",\n              children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n                \"span\",\n                {\n                  className: \"notion-table-of-contents-item-body\",\n                  style: {\n                    display: \"inline-block\",\n                    marginLeft: tocItem.indentLevel * 24\n                  },\n                  children: tocItem.text\n                }\n              )\n            },\n            tocItem.id\n          ))\n        }\n      );\n    }\n    case \"to_do\": {\n      const isChecked = ((_I = (_H = (_G = block.properties) == null ? void 0 : _G.checked) == null ? void 0 : _H[0]) == null ? void 0 : _I[0]) === \"Yes\";\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { className: cs(\"notion-to-do\", blockId), children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(\"div\", { className: \"notion-to-do-item\", children: [\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(components.Checkbox, { blockId, isChecked }),\n          /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n            \"div\",\n            {\n              className: cs(\n                \"notion-to-do-body\",\n                isChecked && `notion-to-do-checked`\n              ),\n              children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Text, { value: (_J = block.properties) == null ? void 0 : _J.title, block })\n            }\n          )\n        ] }),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-to-do-children\", children })\n      ] });\n    }\n    case \"transclusion_container\":\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: cs(\"notion-sync-block\", blockId), children });\n    case \"transclusion_reference\":\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(SyncPointerBlock, { ...props, level: level + 1 });\n    case \"alias\": {\n      const blockPointerId = (_L = (_K = block == null ? void 0 : block.format) == null ? void 0 : _K.alias_pointer) == null ? void 0 : _L.id;\n      const linkedBlock = (_M = recordMap.block[blockPointerId]) == null ? void 0 : _M.value;\n      if (!linkedBlock) {\n        console.log('\"alias\" missing block', blockPointerId);\n        return null;\n      }\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n        components.PageLink,\n        {\n          className: cs(\"notion-page-link\", blockPointerId),\n          href: mapPageUrl(blockPointerId),\n          children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(PageTitle, { block: linkedBlock })\n        }\n      );\n    }\n    case \"table\":\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"table\", { className: cs(\"notion-simple-table\", blockId), children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"tbody\", { children }) });\n    case \"table_row\": {\n      const tableBlock = (_N = recordMap.block[block.parent_id]) == null ? void 0 : _N.value;\n      const order = (_O = tableBlock.format) == null ? void 0 : _O.table_block_column_order;\n      const formatMap = (_P = tableBlock.format) == null ? void 0 : _P.table_block_column_format;\n      const backgroundColor = (_Q = block.format) == null ? void 0 : _Q.block_color;\n      const hasRowHeader = ((_R = tableBlock.format) == null ? void 0 : _R.table_block_column_header) === true;\n      const hasColumnHeader = ((_S = tableBlock.format) == null ? void 0 : _S.table_block_row_header) === true;\n      const isHeaderRow = hasRowHeader && ((_T = tableBlock.content) == null ? void 0 : _T[0]) === block.id;\n      if (!tableBlock || !order) {\n        return null;\n      }\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n        \"tr\",\n        {\n          className: cs(\n            \"notion-simple-table-row\",\n            backgroundColor && `notion-${backgroundColor}`,\n            isHeaderRow && \"notion-simple-table-header-row\",\n            blockId\n          ),\n          children: order.map((column, columnIndex) => {\n            var _a2, _b2, _c2;\n            const color = (_a2 = formatMap == null ? void 0 : formatMap[column]) == null ? void 0 : _a2.color;\n            const isHeaderColumn = hasColumnHeader && columnIndex === 0;\n            return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n              \"td\",\n              {\n                className: cs(\n                  color ? `notion-${color}` : \"\",\n                  isHeaderColumn && \"notion-simple-table-header-cell\"\n                ),\n                style: {\n                  width: ((_b2 = formatMap == null ? void 0 : formatMap[column]) == null ? void 0 : _b2.width) || 120\n                },\n                children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", { className: \"notion-simple-table-cell\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n                  Text,\n                  {\n                    value: ((_c2 = block.properties) == null ? void 0 : _c2[column]) || [[\"\\u3164\"]],\n                    block\n                  }\n                ) })\n              },\n              column\n            );\n          })\n        }\n      );\n    }\n    case \"external_object_instance\":\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(EOI, { block, className: blockId });\n    default:\n      if (true) {\n        console.log(\n          \"Unsupported block type \" + block.type,\n          JSON.stringify(block, null, 2)\n        );\n      }\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\"div\", {});\n  }\n}\n\n// src/renderer.tsx\n\nfunction NotionRenderer({\n  components,\n  recordMap,\n  mapPageUrl,\n  mapImageUrl,\n  searchNotion,\n  isShowingSearch,\n  onHideSearch,\n  fullPage,\n  rootPageId,\n  rootDomain,\n  darkMode,\n  previewImages,\n  forceCustomImages,\n  showCollectionViewDropdown,\n  linkTableTitleProperties,\n  isLinkCollectionToUrlProperty,\n  isImageZoomable = true,\n  showTableOfContents,\n  minTableOfContentsItems,\n  defaultPageIcon,\n  defaultPageCover,\n  defaultPageCoverPosition,\n  ...rest\n}) {\n  const zoom = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => !!globalThis.window && _fisch0920_medium_zoom__WEBPACK_IMPORTED_MODULE_7__({\n      background: \"rgba(0, 0, 0, 0.8)\",\n      minZoomScale: 2,\n      margin: getMediumZoomMargin()\n    }),\n    []\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n    NotionContextProvider,\n    {\n      components,\n      recordMap,\n      mapPageUrl,\n      mapImageUrl,\n      searchNotion,\n      isShowingSearch,\n      onHideSearch,\n      fullPage,\n      rootPageId,\n      rootDomain,\n      darkMode,\n      previewImages,\n      forceCustomImages,\n      showCollectionViewDropdown,\n      linkTableTitleProperties,\n      isLinkCollectionToUrlProperty,\n      showTableOfContents,\n      minTableOfContentsItems,\n      defaultPageIcon,\n      defaultPageCover,\n      defaultPageCoverPosition,\n      zoom: isImageZoomable ? zoom : null,\n      children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(NotionBlockRenderer, { ...rest })\n    }\n  );\n}\nfunction NotionBlockRenderer({\n  level = 0,\n  blockId,\n  ...props\n}) {\n  var _a, _b;\n  const { recordMap } = useNotionContext();\n  const id = blockId || Object.keys(recordMap.block)[0];\n  const block = (_a = recordMap.block[id]) == null ? void 0 : _a.value;\n  if (!block) {\n    if (true) {\n      console.warn(\"missing block\", blockId);\n    }\n    return null;\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Block, { level, block, ...props, children: (_b = block == null ? void 0 : block.content) == null ? void 0 : _b.map((contentBlockId) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(\n    NotionBlockRenderer,\n    {\n      blockId: contentBlockId,\n      level: level + 1,\n      ...props\n    },\n    contentBlockId\n  )) }, id);\n}\nfunction getMediumZoomMargin() {\n  const width = window.innerWidth;\n  if (width < 500) {\n    return 8;\n  } else if (width < 800) {\n    return 20;\n  } else if (width < 1280) {\n    return 30;\n  } else if (width < 1600) {\n    return 40;\n  } else if (width < 1920) {\n    return 48;\n  } else {\n    return 72;\n  }\n}\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uLi8uLi9wYWNrYWdlcy9yZWFjdC1ub3Rpb24teC9idWlsZC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RUFBOEUsNkRBQTZEO0FBQzNJO0FBQ0EsMkRBQTJELGFBQWE7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0RkFBNEY7QUFDekg7QUFDQTtBQUNBO0FBQ0EsbUdBQW1HO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUVBQXlFLDhCQUE4QjtBQUN2RztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QVUsSUFBSTtBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsc0RBQUssVUFBVTtBQUM1QztBQUNBOztBQUVBO0FBQ2lEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxlQUFlLDBDQUFlO0FBQzlCLGlDQUFpQyxtREFBVTtBQUMzQztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHlCQUF5QixzREFBSztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msc0RBQUssd0JBQXdCLFNBQVM7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxVQUFVLFlBQVk7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsUUFBUSxJQUFJO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsc0RBQUssVUFBVSw4SUFBOEksc0RBQUs7QUFDM0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQXdCRTtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGt1ZHJ5XFxEb2N1bWVudHNcXFJlYWN0UHJvamVjdHNcXHJlYWN0LW5vdGlvbi14XFxwYWNrYWdlc1xccmVhY3Qtbm90aW9uLXhcXGJ1aWxkXFxpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19jcmVhdGUgPSBPYmplY3QuY3JlYXRlO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2dldE93blByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xudmFyIF9fZ2V0UHJvdG9PZiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fY29tbW9uSlMgPSAoY2IsIG1vZCkgPT4gZnVuY3Rpb24gX19yZXF1aXJlKCkge1xuICByZXR1cm4gbW9kIHx8ICgwLCBjYltfX2dldE93blByb3BOYW1lcyhjYilbMF1dKSgobW9kID0geyBleHBvcnRzOiB7fSB9KS5leHBvcnRzLCBtb2QpLCBtb2QuZXhwb3J0cztcbn07XG52YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4ge1xuICBpZiAoZnJvbSAmJiB0eXBlb2YgZnJvbSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZnJvbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgZm9yIChsZXQga2V5IG9mIF9fZ2V0T3duUHJvcE5hbWVzKGZyb20pKVxuICAgICAgaWYgKCFfX2hhc093blByb3AuY2FsbCh0bywga2V5KSAmJiBrZXkgIT09IGV4Y2VwdClcbiAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pO1xuICB9XG4gIHJldHVybiB0bztcbn07XG52YXIgX190b0VTTSA9IChtb2QsIGlzTm9kZU1vZGUsIHRhcmdldCkgPT4gKHRhcmdldCA9IG1vZCAhPSBudWxsID8gX19jcmVhdGUoX19nZXRQcm90b09mKG1vZCkpIDoge30sIF9fY29weVByb3BzKFxuICAvLyBJZiB0aGUgaW1wb3J0ZXIgaXMgaW4gbm9kZSBjb21wYXRpYmlsaXR5IG1vZGUgb3IgdGhpcyBpcyBub3QgYW4gRVNNXG4gIC8vIGZpbGUgdGhhdCBoYXMgYmVlbiBjb252ZXJ0ZWQgdG8gYSBDb21tb25KUyBmaWxlIHVzaW5nIGEgQmFiZWwtXG4gIC8vIGNvbXBhdGlibGUgdHJhbnNmb3JtIChpLmUuIFwiX19lc01vZHVsZVwiIGhhcyBub3QgYmVlbiBzZXQpLCB0aGVuIHNldFxuICAvLyBcImRlZmF1bHRcIiB0byB0aGUgQ29tbW9uSlMgXCJtb2R1bGUuZXhwb3J0c1wiIGZvciBub2RlIGNvbXBhdGliaWxpdHkuXG4gIGlzTm9kZU1vZGUgfHwgIW1vZCB8fCAhbW9kLl9fZXNNb2R1bGUgPyBfX2RlZlByb3AodGFyZ2V0LCBcImRlZmF1bHRcIiwgeyB2YWx1ZTogbW9kLCBlbnVtZXJhYmxlOiB0cnVlIH0pIDogdGFyZ2V0LFxuICBtb2RcbikpO1xudmFyIF9fcHVibGljRmllbGQgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBfX2RlZk5vcm1hbFByb3Aob2JqLCB0eXBlb2Yga2V5ICE9PSBcInN5bWJvbFwiID8ga2V5ICsgXCJcIiA6IGtleSwgdmFsdWUpO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vbG9kYXNoLnRocm90dGxlQDQuMS4xL25vZGVfbW9kdWxlcy9sb2Rhc2gudGhyb3R0bGUvaW5kZXguanNcbnZhciByZXF1aXJlX2xvZGFzaCA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9sb2Rhc2gudGhyb3R0bGVANC4xLjEvbm9kZV9tb2R1bGVzL2xvZGFzaC50aHJvdHRsZS9pbmRleC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIHZhciBGVU5DX0VSUk9SX1RFWFQgPSBcIkV4cGVjdGVkIGEgZnVuY3Rpb25cIjtcbiAgICB2YXIgTkFOID0gMCAvIDA7XG4gICAgdmFyIHN5bWJvbFRhZyA9IFwiW29iamVjdCBTeW1ib2xdXCI7XG4gICAgdmFyIHJlVHJpbSA9IC9eXFxzK3xcXHMrJC9nO1xuICAgIHZhciByZUlzQmFkSGV4ID0gL15bLStdMHhbMC05YS1mXSskL2k7XG4gICAgdmFyIHJlSXNCaW5hcnkgPSAvXjBiWzAxXSskL2k7XG4gICAgdmFyIHJlSXNPY3RhbCA9IC9eMG9bMC03XSskL2k7XG4gICAgdmFyIGZyZWVQYXJzZUludCA9IHBhcnNlSW50O1xuICAgIHZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSBcIm9iamVjdFwiICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsO1xuICAgIHZhciBmcmVlU2VsZiA9IHR5cGVvZiBzZWxmID09IFwib2JqZWN0XCIgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7XG4gICAgdmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcbiAgICB2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuICAgIHZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuICAgIHZhciBuYXRpdmVNYXggPSBNYXRoLm1heDtcbiAgICB2YXIgbmF0aXZlTWluID0gTWF0aC5taW47XG4gICAgdmFyIG5vdyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHJvb3QuRGF0ZS5ub3coKTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBsYXN0QXJncywgbGFzdFRoaXMsIG1heFdhaXQsIHJlc3VsdCwgdGltZXJJZCwgbGFzdENhbGxUaW1lLCBsYXN0SW52b2tlVGltZSA9IDAsIGxlYWRpbmcgPSBmYWxzZSwgbWF4aW5nID0gZmFsc2UsIHRyYWlsaW5nID0gdHJ1ZTtcbiAgICAgIGlmICh0eXBlb2YgZnVuYyAhPSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICAgICAgfVxuICAgICAgd2FpdCA9IHRvTnVtYmVyKHdhaXQpIHx8IDA7XG4gICAgICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICAgICAgbGVhZGluZyA9ICEhb3B0aW9ucy5sZWFkaW5nO1xuICAgICAgICBtYXhpbmcgPSBcIm1heFdhaXRcIiBpbiBvcHRpb25zO1xuICAgICAgICBtYXhXYWl0ID0gbWF4aW5nID8gbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCwgd2FpdCkgOiBtYXhXYWl0O1xuICAgICAgICB0cmFpbGluZyA9IFwidHJhaWxpbmdcIiBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBpbnZva2VGdW5jKHRpbWUpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBsYXN0QXJncywgdGhpc0FyZyA9IGxhc3RUaGlzO1xuICAgICAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdm9pZCAwO1xuICAgICAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBsZWFkaW5nRWRnZSh0aW1lKSB7XG4gICAgICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAgICAgcmV0dXJuIGxlYWRpbmcgPyBpbnZva2VGdW5jKHRpbWUpIDogcmVzdWx0O1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gcmVtYWluaW5nV2FpdCh0aW1lKSB7XG4gICAgICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWUsIHJlc3VsdDIgPSB3YWl0IC0gdGltZVNpbmNlTGFzdENhbGw7XG4gICAgICAgIHJldHVybiBtYXhpbmcgPyBuYXRpdmVNaW4ocmVzdWx0MiwgbWF4V2FpdCAtIHRpbWVTaW5jZUxhc3RJbnZva2UpIDogcmVzdWx0MjtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIHNob3VsZEludm9rZSh0aW1lKSB7XG4gICAgICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG4gICAgICAgIHJldHVybiBsYXN0Q2FsbFRpbWUgPT09IHZvaWQgMCB8fCB0aW1lU2luY2VMYXN0Q2FsbCA+PSB3YWl0IHx8IHRpbWVTaW5jZUxhc3RDYWxsIDwgMCB8fCBtYXhpbmcgJiYgdGltZVNpbmNlTGFzdEludm9rZSA+PSBtYXhXYWl0O1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuICAgICAgICB2YXIgdGltZSA9IG5vdygpO1xuICAgICAgICBpZiAoc2hvdWxkSW52b2tlKHRpbWUpKSB7XG4gICAgICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcbiAgICAgICAgfVxuICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHJlbWFpbmluZ1dhaXQodGltZSkpO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gdHJhaWxpbmdFZGdlKHRpbWUpIHtcbiAgICAgICAgdGltZXJJZCA9IHZvaWQgMDtcbiAgICAgICAgaWYgKHRyYWlsaW5nICYmIGxhc3RBcmdzKSB7XG4gICAgICAgICAgcmV0dXJuIGludm9rZUZ1bmModGltZSk7XG4gICAgICAgIH1cbiAgICAgICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHZvaWQgMDtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICAgICAgaWYgKHRpbWVySWQgIT09IHZvaWQgMCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcklkKTtcbiAgICAgICAgfVxuICAgICAgICBsYXN0SW52b2tlVGltZSA9IDA7XG4gICAgICAgIGxhc3RBcmdzID0gbGFzdENhbGxUaW1lID0gbGFzdFRoaXMgPSB0aW1lcklkID0gdm9pZCAwO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgICAgIHJldHVybiB0aW1lcklkID09PSB2b2lkIDAgPyByZXN1bHQgOiB0cmFpbGluZ0VkZ2Uobm93KCkpO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gZGVib3VuY2VkKCkge1xuICAgICAgICB2YXIgdGltZSA9IG5vdygpLCBpc0ludm9raW5nID0gc2hvdWxkSW52b2tlKHRpbWUpO1xuICAgICAgICBsYXN0QXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgbGFzdFRoaXMgPSB0aGlzO1xuICAgICAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lO1xuICAgICAgICBpZiAoaXNJbnZva2luZykge1xuICAgICAgICAgIGlmICh0aW1lcklkID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHJldHVybiBsZWFkaW5nRWRnZShsYXN0Q2FsbFRpbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobWF4aW5nKSB7XG4gICAgICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgICAgICAgICAgcmV0dXJuIGludm9rZUZ1bmMobGFzdENhbGxUaW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpbWVySWQgPT09IHZvaWQgMCkge1xuICAgICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG4gICAgICBkZWJvdW5jZWQuZmx1c2ggPSBmbHVzaDtcbiAgICAgIHJldHVybiBkZWJvdW5jZWQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRocm90dGxlMyhmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gICAgICB2YXIgbGVhZGluZyA9IHRydWUsIHRyYWlsaW5nID0gdHJ1ZTtcbiAgICAgIGlmICh0eXBlb2YgZnVuYyAhPSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICAgICAgfVxuICAgICAgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgICAgIGxlYWRpbmcgPSBcImxlYWRpbmdcIiBpbiBvcHRpb25zID8gISFvcHRpb25zLmxlYWRpbmcgOiBsZWFkaW5nO1xuICAgICAgICB0cmFpbGluZyA9IFwidHJhaWxpbmdcIiBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGVib3VuY2UoZnVuYywgd2FpdCwge1xuICAgICAgICBcImxlYWRpbmdcIjogbGVhZGluZyxcbiAgICAgICAgXCJtYXhXYWl0XCI6IHdhaXQsXG4gICAgICAgIFwidHJhaWxpbmdcIjogdHJhaWxpbmdcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gICAgICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSBcIm9iamVjdFwiIHx8IHR5cGUgPT0gXCJmdW5jdGlvblwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gXCJvYmplY3RcIjtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gXCJzeW1ib2xcIiB8fCBpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN5bWJvbFRhZztcbiAgICB9XG4gICAgZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gXCJudW1iZXJcIikge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBOQU47XG4gICAgICB9XG4gICAgICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgIHZhciBvdGhlciA9IHR5cGVvZiB2YWx1ZS52YWx1ZU9mID09IFwiZnVuY3Rpb25cIiA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xuICAgICAgICB2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKSA/IG90aGVyICsgXCJcIiA6IG90aGVyO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuICAgICAgfVxuICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKHJlVHJpbSwgXCJcIik7XG4gICAgICB2YXIgaXNCaW5hcnkgPSByZUlzQmluYXJ5LnRlc3QodmFsdWUpO1xuICAgICAgcmV0dXJuIGlzQmluYXJ5IHx8IHJlSXNPY3RhbC50ZXN0KHZhbHVlKSA/IGZyZWVQYXJzZUludCh2YWx1ZS5zbGljZSgyKSwgaXNCaW5hcnkgPyAyIDogOCkgOiByZUlzQmFkSGV4LnRlc3QodmFsdWUpID8gTkFOIDogK3ZhbHVlO1xuICAgIH1cbiAgICBtb2R1bGUuZXhwb3J0cyA9IHRocm90dGxlMztcbiAgfVxufSk7XG5cbi8vIHNyYy9jb21wb25lbnRzL2hlYWRlci50c3hcbmltcG9ydCB7IGdldFBhZ2VCcmVhZGNydW1icyB9IGZyb20gXCJub3Rpb24tdXRpbHNcIjtcbmltcG9ydCBSZWFjdDE1IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlSG90a2V5cyB9IGZyb20gXCJyZWFjdC1ob3RrZXlzLWhvb2tcIjtcblxuLy8gc3JjL2NvbnRleHQudHN4XG5pbXBvcnQgXCJub3Rpb24tdHlwZXNcIjtcbmltcG9ydCB7IGRlZmF1bHRNYXBJbWFnZVVybCwgZGVmYXVsdE1hcFBhZ2VVcmwgfSBmcm9tIFwibm90aW9uLXV0aWxzXCI7XG5pbXBvcnQgUmVhY3QxMCBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL2NvbXBvbmVudHMvYXNzZXQtd3JhcHBlci50c3hcbmltcG9ydCBcIm5vdGlvbi10eXBlc1wiO1xuaW1wb3J0IHsgcGFyc2VQYWdlSWQgYXMgcGFyc2VQYWdlSWQyIH0gZnJvbSBcIm5vdGlvbi11dGlsc1wiO1xuXG4vLyBzcmMvdXRpbHMudHNcbmltcG9ydCBcIm5vdGlvbi10eXBlc1wiO1xuaW1wb3J0IHsgZm9ybWF0RGF0ZSwgZm9ybWF0Tm90aW9uRGF0ZVRpbWUsIGlzVXJsIH0gZnJvbSBcIm5vdGlvbi11dGlsc1wiO1xudmFyIGNzID0gKC4uLmNsYXNzZXMpID0+IGNsYXNzZXMuZmlsdGVyKChhKSA9PiAhIWEpLmpvaW4oXCIgXCIpO1xudmFyIGdyb3VwQmxvY2tDb250ZW50ID0gKGJsb2NrTWFwKSA9PiB7XG4gIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgY29uc3Qgb3V0cHV0ID0gW107XG4gIGxldCBsYXN0VHlwZTtcbiAgbGV0IGluZGV4ID0gLTE7XG4gIGZvciAoY29uc3QgaWQgb2YgT2JqZWN0LmtleXMoYmxvY2tNYXApKSB7XG4gICAgY29uc3QgYmxvY2tWYWx1ZSA9IChfYSA9IGJsb2NrTWFwW2lkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnZhbHVlO1xuICAgIGlmIChibG9ja1ZhbHVlKSB7XG4gICAgICBpZiAoYmxvY2tWYWx1ZS5jb250ZW50KVxuICAgICAgICBmb3IgKGNvbnN0IGJsb2NrSWQgb2YgYmxvY2tWYWx1ZS5jb250ZW50KSB7XG4gICAgICAgICAgY29uc3QgYmxvY2tUeXBlID0gKF9jID0gKF9iID0gYmxvY2tNYXBbYmxvY2tJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYi52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnR5cGU7XG4gICAgICAgICAgaWYgKGJsb2NrVHlwZSAmJiBibG9ja1R5cGUgIT09IGxhc3RUeXBlKSB7XG4gICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgbGFzdFR5cGUgPSBibG9ja1R5cGU7XG4gICAgICAgICAgICBvdXRwdXRbaW5kZXhdID0gW107XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAoX2QgPSBvdXRwdXRbaW5kZXhdKSA9PSBudWxsID8gdm9pZCAwIDogX2QucHVzaChibG9ja0lkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGFzdFR5cGUgPSB2b2lkIDA7XG4gIH1cbiAgcmV0dXJuIG91dHB1dDtcbn07XG52YXIgZ2V0TGlzdE51bWJlciA9IChibG9ja0lkLCBibG9ja01hcCkgPT4ge1xuICBjb25zdCBncm91cHMgPSBncm91cEJsb2NrQ29udGVudChibG9ja01hcCk7XG4gIGNvbnN0IGdyb3VwID0gZ3JvdXBzLmZpbmQoKGcpID0+IGcuaW5jbHVkZXMoYmxvY2tJZCkpO1xuICBpZiAoIWdyb3VwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHJldHVybiBncm91cC5pbmRleE9mKGJsb2NrSWQpICsgMTtcbn07XG52YXIgZ2V0TGlzdE5lc3RpbmdMZXZlbCA9IChibG9ja0lkLCBibG9ja01hcCkgPT4ge1xuICB2YXIgX2EsIF9iLCBfYztcbiAgbGV0IGxldmVsID0gMDtcbiAgbGV0IGN1cnJlbnRCbG9ja0lkID0gYmxvY2tJZDtcbiAgd2hpbGUgKHRydWUpIHtcbiAgICBjb25zdCBwYXJlbnRJZCA9IChfYiA9IChfYSA9IGJsb2NrTWFwW2N1cnJlbnRCbG9ja0lkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2IucGFyZW50X2lkO1xuICAgIGlmICghcGFyZW50SWQpIGJyZWFrO1xuICAgIGNvbnN0IHBhcmVudEJsb2NrID0gKF9jID0gYmxvY2tNYXBbcGFyZW50SWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2MudmFsdWU7XG4gICAgaWYgKCFwYXJlbnRCbG9jaykgYnJlYWs7XG4gICAgaWYgKHBhcmVudEJsb2NrLnR5cGUgPT09IFwibnVtYmVyZWRfbGlzdFwiKSB7XG4gICAgICBsZXZlbCsrO1xuICAgICAgY3VycmVudEJsb2NrSWQgPSBwYXJlbnRJZDtcbiAgICB9IGVsc2Uge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiBsZXZlbDtcbn07XG52YXIgZ2V0TGlzdFN0eWxlID0gKGxldmVsKSA9PiB7XG4gIGNvbnN0IHN0eWxlcyA9IFtcImRlY2ltYWxcIiwgXCJsb3dlci1hbHBoYVwiLCBcImxvd2VyLXJvbWFuXCJdO1xuICBjb25zdCBpbmRleCA9IChsZXZlbCAlIHN0eWxlcy5sZW5ndGggKyBzdHlsZXMubGVuZ3RoKSAlIHN0eWxlcy5sZW5ndGg7XG4gIHJldHVybiBzdHlsZXNbaW5kZXhdO1xufTtcbnZhciBnZXRIYXNoRnJhZ21lbnRWYWx1ZSA9ICh1cmwpID0+IHtcbiAgcmV0dXJuIHVybC5pbmNsdWRlcyhcIiNcIikgPyB1cmwucmVwbGFjZSgvXi4rKCMuKykkLywgXCIkMVwiKSA6IFwiXCI7XG59O1xudmFyIGlzQnJvd3NlciA9ICEhZ2xvYmFsVGhpcy53aW5kb3c7XG52YXIgeW91dHViZURvbWFpbnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbXG4gIFwieW91dHUuYmVcIixcbiAgXCJ5b3V0dWJlLmNvbVwiLFxuICBcInd3dy55b3V0dWJlLmNvbVwiLFxuICBcInlvdXR1YmUtbm9jb29raWUuY29tXCIsXG4gIFwid3d3LnlvdXR1YmUtbm9jb29raWUuY29tXCJcbl0pO1xudmFyIGdldFlvdXR1YmVJZCA9ICh1cmwpID0+IHtcbiAgdmFyIF9hO1xuICB0cnkge1xuICAgIGNvbnN0IHsgaG9zdG5hbWUgfSA9IG5ldyBVUkwodXJsKTtcbiAgICBpZiAoIXlvdXR1YmVEb21haW5zLmhhcyhob3N0bmFtZSkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCByZWdFeHAgPSAvXi4qKHlvdXR1XFwuYmVcXC98dlxcL3x1XFwvXFx3XFwvfGVtYmVkXFwvfHdhdGNoXFw/dj18JnY9KShbXiMmP10qKS4qL2k7XG4gICAgY29uc3QgbWF0Y2ggPSB1cmwubWF0Y2gocmVnRXhwKTtcbiAgICBpZiAobWF0Y2ggJiYgKChfYSA9IG1hdGNoWzJdKSA9PSBudWxsID8gdm9pZCAwIDogX2EubGVuZ3RoKSA9PT0gMTEpIHtcbiAgICAgIHJldHVybiBtYXRjaFsyXTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG52YXIgZ2V0VXJsUGFyYW1zID0gKHVybCkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHVybCk7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2Ygc2VhcmNoUGFyYW1zLmVudHJpZXMoKSkge1xuICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSBjYXRjaCAoZSkge1xuICB9XG4gIHJldHVybjtcbn07XG5cbi8vIHNyYy9jb21wb25lbnRzL2Fzc2V0LnRzeFxuaW1wb3J0IFwibm90aW9uLXR5cGVzXCI7XG5pbXBvcnQgeyBnZXRUZXh0Q29udGVudCB9IGZyb20gXCJub3Rpb24tdXRpbHNcIjtcblxuLy8gc3JjL2NvbXBvbmVudHMvbGF6eS1pbWFnZS50c3hcbmltcG9ydCB7IG5vcm1hbGl6ZVVybCB9IGZyb20gXCJub3Rpb24tdXRpbHNcIjtcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEltYWdlU3RhdGUsIExhenlJbWFnZUZ1bGwgfSBmcm9tIFwicmVhY3QtbGF6eS1pbWFnZXNcIjtcbmltcG9ydCB7IGpzeCwganN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuZnVuY3Rpb24gTGF6eUltYWdlKHtcbiAgc3JjLFxuICBhbHQsXG4gIGNsYXNzTmFtZSxcbiAgc3R5bGUsXG4gIHpvb21hYmxlID0gZmFsc2UsXG4gIHByaW9yaXR5ID0gZmFsc2UsXG4gIGhlaWdodCxcbiAgLi4ucmVzdFxufSkge1xuICB2YXIgX2EsIF9iLCBfYztcbiAgY29uc3QgeyByZWNvcmRNYXAsIHpvb20sIHByZXZpZXdJbWFnZXMsIGZvcmNlQ3VzdG9tSW1hZ2VzLCBjb21wb25lbnRzIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGNvbnN0IHpvb21SZWYgPSBSZWFjdC51c2VSZWYoem9vbSA/IHpvb20uY2xvbmUoKSA6IG51bGwpO1xuICBjb25zdCBwcmV2aWV3SW1hZ2UgPSBwcmV2aWV3SW1hZ2VzID8gKF9jID0gKF9hID0gcmVjb3JkTWFwID09IG51bGwgPyB2b2lkIDAgOiByZWNvcmRNYXAucHJldmlld19pbWFnZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYVtzcmNdKSAhPSBudWxsID8gX2MgOiAoX2IgPSByZWNvcmRNYXAgPT0gbnVsbCA/IHZvaWQgMCA6IHJlY29yZE1hcC5wcmV2aWV3X2ltYWdlcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9iW25vcm1hbGl6ZVVybChzcmMpXSA6IG51bGw7XG4gIGNvbnN0IG9uTG9hZCA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgIChlKSA9PiB7XG4gICAgICBpZiAoem9vbWFibGUgJiYgKGUudGFyZ2V0LnNyYyB8fCBlLnRhcmdldC5zcmNzZXQpKSB7XG4gICAgICAgIGlmICh6b29tUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICA7XG4gICAgICAgICAgem9vbVJlZi5jdXJyZW50LmF0dGFjaChlLnRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIFt6b29tUmVmLCB6b29tYWJsZV1cbiAgKTtcbiAgY29uc3QgYXR0YWNoWm9vbSA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgIChpbWFnZSkgPT4ge1xuICAgICAgaWYgKHpvb21SZWYuY3VycmVudCAmJiBpbWFnZSkge1xuICAgICAgICA7XG4gICAgICAgIHpvb21SZWYuY3VycmVudC5hdHRhY2goaW1hZ2UpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW3pvb21SZWZdXG4gICk7XG4gIGNvbnN0IGF0dGFjaFpvb21SZWYgPSBSZWFjdC51c2VNZW1vKFxuICAgICgpID0+IHpvb21hYmxlID8gYXR0YWNoWm9vbSA6IHZvaWQgMCxcbiAgICBbem9vbWFibGUsIGF0dGFjaFpvb21dXG4gICk7XG4gIGlmIChwcmV2aWV3SW1hZ2UpIHtcbiAgICBjb25zdCBhc3BlY3RSYXRpbyA9IHByZXZpZXdJbWFnZS5vcmlnaW5hbEhlaWdodCAvIHByZXZpZXdJbWFnZS5vcmlnaW5hbFdpZHRoO1xuICAgIGlmIChjb21wb25lbnRzLkltYWdlKSB7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgICAgY29tcG9uZW50cy5JbWFnZSxcbiAgICAgICAge1xuICAgICAgICAgIHNyYyxcbiAgICAgICAgICBhbHQsXG4gICAgICAgICAgc3R5bGUsXG4gICAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgICAgIHdpZHRoOiBwcmV2aWV3SW1hZ2Uub3JpZ2luYWxXaWR0aCxcbiAgICAgICAgICBoZWlnaHQ6IHByZXZpZXdJbWFnZS5vcmlnaW5hbEhlaWdodCxcbiAgICAgICAgICBibHVyRGF0YVVSTDogcHJldmlld0ltYWdlLmRhdGFVUklCYXNlNjQsXG4gICAgICAgICAgcGxhY2Vob2xkZXI6IFwiYmx1clwiLFxuICAgICAgICAgIHByaW9yaXR5LFxuICAgICAgICAgIG9uTG9hZFxuICAgICAgICB9XG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBMYXp5SW1hZ2UgdHlwZXMgYXJlIG91dC1vZi1kYXRlLlxuICAgICAgLyogQF9fUFVSRV9fICovIGpzeChMYXp5SW1hZ2VGdWxsLCB7IHNyYywgLi4ucmVzdCwgZXhwZXJpbWVudGFsRGVjb2RlOiB0cnVlLCBjaGlsZHJlbjogKHsgaW1hZ2VTdGF0ZSwgcmVmIH0pID0+IHtcbiAgICAgICAgY29uc3QgaXNMb2FkZWQgPSBpbWFnZVN0YXRlID09PSBJbWFnZVN0YXRlLkxvYWRTdWNjZXNzO1xuICAgICAgICBjb25zdCB3cmFwcGVyU3R5bGUgPSB7XG4gICAgICAgICAgd2lkdGg6IFwiMTAwJVwiXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGltZ1N0eWxlID0ge307XG4gICAgICAgIGlmIChoZWlnaHQpIHtcbiAgICAgICAgICB3cmFwcGVyU3R5bGUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGltZ1N0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgICAgIHdyYXBwZXJTdHlsZS5wYWRkaW5nQm90dG9tID0gYCR7YXNwZWN0UmF0aW8gKiAxMDB9JWA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzKFxuICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiBjcyhcbiAgICAgICAgICAgICAgXCJsYXp5LWltYWdlLXdyYXBwZXJcIixcbiAgICAgICAgICAgICAgaXNMb2FkZWQgJiYgXCJsYXp5LWltYWdlLWxvYWRlZFwiLFxuICAgICAgICAgICAgICBjbGFzc05hbWVcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBzdHlsZTogd3JhcHBlclN0eWxlLFxuICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgICAgICAgICAgICBcImltZ1wiLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJsYXp5LWltYWdlLXByZXZpZXdcIixcbiAgICAgICAgICAgICAgICAgIHNyYzogcHJldmlld0ltYWdlLmRhdGFVUklCYXNlNjQsXG4gICAgICAgICAgICAgICAgICBhbHQsXG4gICAgICAgICAgICAgICAgICByZWYsXG4gICAgICAgICAgICAgICAgICBzdHlsZSxcbiAgICAgICAgICAgICAgICAgIGRlY29kaW5nOiBcImFzeW5jXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goXG4gICAgICAgICAgICAgICAgXCJpbWdcIixcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwibGF6eS1pbWFnZS1yZWFsXCIsXG4gICAgICAgICAgICAgICAgICBzcmMsXG4gICAgICAgICAgICAgICAgICBhbHQsXG4gICAgICAgICAgICAgICAgICByZWY6IGF0dGFjaFpvb21SZWYsXG4gICAgICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICAuLi5zdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgLi4uaW1nU3R5bGVcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB3aWR0aDogcHJldmlld0ltYWdlLm9yaWdpbmFsV2lkdGgsXG4gICAgICAgICAgICAgICAgICBoZWlnaHQ6IHByZXZpZXdJbWFnZS5vcmlnaW5hbEhlaWdodCxcbiAgICAgICAgICAgICAgICAgIGRlY29kaW5nOiBcImFzeW5jXCIsXG4gICAgICAgICAgICAgICAgICBsb2FkaW5nOiBcImxhenlcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgXVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH0gfSlcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIGlmIChjb21wb25lbnRzLkltYWdlICYmIGZvcmNlQ3VzdG9tSW1hZ2VzKSB7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChcbiAgICAgICAgY29tcG9uZW50cy5JbWFnZSxcbiAgICAgICAge1xuICAgICAgICAgIHNyYyxcbiAgICAgICAgICBhbHQsXG4gICAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgICAgIHN0eWxlLFxuICAgICAgICAgIHdpZHRoOiBudWxsLFxuICAgICAgICAgIGhlaWdodDogaGVpZ2h0IHx8IG51bGwsXG4gICAgICAgICAgcHJpb3JpdHksXG4gICAgICAgICAgb25Mb2FkXG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgICAgXCJpbWdcIixcbiAgICAgIHtcbiAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgICBzdHlsZSxcbiAgICAgICAgc3JjLFxuICAgICAgICBhbHQsXG4gICAgICAgIHJlZjogYXR0YWNoWm9vbVJlZixcbiAgICAgICAgbG9hZGluZzogXCJsYXp5XCIsXG4gICAgICAgIGRlY29kaW5nOiBcImFzeW5jXCIsXG4gICAgICAgIC4uLnJlc3RcbiAgICAgIH1cbiAgICApO1xuICB9XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL2xpdGUteW91dHViZS1lbWJlZC50c3hcbmltcG9ydCBSZWFjdDIgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBGcmFnbWVudCwganN4IGFzIGpzeDIsIGpzeHMgYXMganN4czIgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBxcyA9IChwYXJhbXMpID0+IHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKHBhcmFtcykubWFwKFxuICAgIChrZXkpID0+IGAke2VuY29kZVVSSUNvbXBvbmVudChrZXkpfT0ke2VuY29kZVVSSUNvbXBvbmVudChwYXJhbXNba2V5XSl9YFxuICApLmpvaW4oXCImXCIpO1xufTtcbnZhciByZXNvbHV0aW9ucyA9IFsxMjAsIDMyMCwgNDgwLCA2NDAsIDEyODBdO1xudmFyIHJlc29sdXRpb25NYXAgPSB7XG4gIDEyMDogXCJkZWZhdWx0XCIsXG4gIDMyMDogXCJtcWRlZmF1bHRcIixcbiAgNDgwOiBcImhxZGVmYXVsdFwiLFxuICA2NDA6IFwic2RkZWZhdWx0XCIsXG4gIDEyODA6IFwibWF4cmVzZGVmYXVsdFwiXG4gIC8vIDJrLCA0aywgOGsgaW1hZ2VzIGRvbid0IHNlZW0gdG8gYmUgYXZhaWxhYmxlXG4gIC8vIFNvdXJjZTogaHR0cHM6Ly9sb25nemVyby5jb20vYXJ0aWNsZXMveW91dHViZS10aHVtYm5haWwtc2l6ZXMtdXJsL1xufTtcbnZhciByZXNvbHV0aW9uU2l6ZXMgPSByZXNvbHV0aW9ucy5tYXAoKHJlc29sdXRpb24pID0+IGAobWF4LXdpZHRoOiAke3Jlc29sdXRpb259cHgpICR7cmVzb2x1dGlvbn1weGApLmpvaW4oXCIsIFwiKTtcbmZ1bmN0aW9uIGdldFBvc3RlclVybChpZCwgcmVzb2x1dGlvbiA9IDQ4MCwgdHlwZSA9IFwianBnXCIpIHtcbiAgaWYgKHR5cGUgPT09IFwid2VicFwiKSB7XG4gICAgcmV0dXJuIGBodHRwczovL2kueXRpbWcuY29tL3ZpX3dlYnAvJHtpZH0vJHtyZXNvbHV0aW9uTWFwW3Jlc29sdXRpb25dfS53ZWJwYDtcbiAgfVxuICByZXR1cm4gYGh0dHBzOi8vaS55dGltZy5jb20vdmkvJHtpZH0vJHtyZXNvbHV0aW9uTWFwW3Jlc29sdXRpb25dfS5qcGdgO1xufVxuZnVuY3Rpb24gZ2VuZXJhdGVTcmNTZXQoaWQsIHR5cGUgPSBcImpwZ1wiKSB7XG4gIHJldHVybiByZXNvbHV0aW9ucy5tYXAoKHJlc29sdXRpb24pID0+IGAke2dldFBvc3RlclVybChpZCwgcmVzb2x1dGlvbiwgdHlwZSl9ICR7cmVzb2x1dGlvbn13YCkuam9pbihcIiwgXCIpO1xufVxuZnVuY3Rpb24gTGl0ZVlvdVR1YmVFbWJlZCh7XG4gIGlkLFxuICBkZWZhdWx0UGxheSA9IGZhbHNlLFxuICBtdXRlID0gZmFsc2UsXG4gIGxhenlJbWFnZSA9IGZhbHNlLFxuICBpZnJhbWVUaXRsZSA9IFwiWW91VHViZSB2aWRlb1wiLFxuICBhbHQgPSBcIlZpZGVvIHByZXZpZXdcIixcbiAgcGFyYW1zID0ge30sXG4gIGFkTGlua3NQcmVjb25uZWN0ID0gdHJ1ZSxcbiAgc3R5bGUsXG4gIGNsYXNzTmFtZVxufSkge1xuICBjb25zdCBtdXRlUGFyYW0gPSBtdXRlIHx8IGRlZmF1bHRQbGF5ID8gXCIxXCIgOiBcIjBcIjtcbiAgY29uc3QgcXVlcnlTdHJpbmcgPSBSZWFjdDIudXNlTWVtbyhcbiAgICAoKSA9PiBxcyh7IGF1dG9wbGF5OiBcIjFcIiwgbXV0ZTogbXV0ZVBhcmFtLCAuLi5wYXJhbXMgfSksXG4gICAgW211dGVQYXJhbSwgcGFyYW1zXVxuICApO1xuICBjb25zdCB5dFVybCA9IFwiaHR0cHM6Ly93d3cueW91dHViZS1ub2Nvb2tpZS5jb21cIjtcbiAgY29uc3QgaWZyYW1lU3JjID0gYCR7eXRVcmx9L2VtYmVkLyR7aWR9PyR7cXVlcnlTdHJpbmd9YDtcbiAgY29uc3QgW2lzUHJlY29ubmVjdGVkLCBzZXRJc1ByZWNvbm5lY3RlZF0gPSBSZWFjdDIudXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaWZyYW1lSW5pdGlhbGl6ZWQsIHNldElmcmFtZUluaXRpYWxpemVkXSA9IFJlYWN0Mi51c2VTdGF0ZShkZWZhdWx0UGxheSk7XG4gIGNvbnN0IFtpc0lmcmFtZUxvYWRlZCwgc2V0SXNJZnJhbWVMb2FkZWRdID0gUmVhY3QyLnVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3Qgd2FybUNvbm5lY3Rpb25zID0gUmVhY3QyLnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoaXNQcmVjb25uZWN0ZWQpIHJldHVybjtcbiAgICBzZXRJc1ByZWNvbm5lY3RlZCh0cnVlKTtcbiAgfSwgW2lzUHJlY29ubmVjdGVkXSk7XG4gIGNvbnN0IG9uTG9hZElmcmFtZSA9IFJlYWN0Mi51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKGlmcmFtZUluaXRpYWxpemVkKSByZXR1cm47XG4gICAgc2V0SWZyYW1lSW5pdGlhbGl6ZWQodHJ1ZSk7XG4gIH0sIFtpZnJhbWVJbml0aWFsaXplZF0pO1xuICBjb25zdCBvbklmcmFtZUxvYWRlZCA9IFJlYWN0Mi51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0SXNJZnJhbWVMb2FkZWQodHJ1ZSk7XG4gIH0sIFtdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzMihGcmFnbWVudCwgeyBjaGlsZHJlbjogW1xuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gyKFxuICAgICAgXCJsaW5rXCIsXG4gICAgICB7XG4gICAgICAgIHJlbDogXCJwcmVsb2FkXCIsXG4gICAgICAgIGFzOiBcImltYWdlXCIsXG4gICAgICAgIGhyZWY6IGdldFBvc3RlclVybChpZCksXG4gICAgICAgIGltYWdlU3JjU2V0OiBnZW5lcmF0ZVNyY1NldChpZCwgXCJ3ZWJwXCIpLFxuICAgICAgICBpbWFnZVNpemVzOiByZXNvbHV0aW9uU2l6ZXNcbiAgICAgIH1cbiAgICApLFxuICAgIGlzUHJlY29ubmVjdGVkICYmIC8qIEBfX1BVUkVfXyAqLyBqc3hzMihGcmFnbWVudCwgeyBjaGlsZHJlbjogW1xuICAgICAgLyogQF9fUFVSRV9fICovIGpzeDIoXCJsaW5rXCIsIHsgcmVsOiBcInByZWNvbm5lY3RcIiwgaHJlZjogeXRVcmwgfSksXG4gICAgICAvKiBAX19QVVJFX18gKi8ganN4MihcImxpbmtcIiwgeyByZWw6IFwicHJlY29ubmVjdFwiLCBocmVmOiBcImh0dHBzOi8vd3d3Lmdvb2dsZS5jb21cIiB9KVxuICAgIF0gfSksXG4gICAgaXNQcmVjb25uZWN0ZWQgJiYgYWRMaW5rc1ByZWNvbm5lY3QgJiYgLyogQF9fUFVSRV9fICovIGpzeHMyKEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbXG4gICAgICAvKiBAX19QVVJFX18gKi8ganN4MihcImxpbmtcIiwgeyByZWw6IFwicHJlY29ubmVjdFwiLCBocmVmOiBcImh0dHBzOi8vc3RhdGljLmRvdWJsZWNsaWNrLm5ldFwiIH0pLFxuICAgICAgLyogQF9fUFVSRV9fICovIGpzeDIoXCJsaW5rXCIsIHsgcmVsOiBcInByZWNvbm5lY3RcIiwgaHJlZjogXCJodHRwczovL2dvb2dsZWFkcy5nLmRvdWJsZWNsaWNrLm5ldFwiIH0pXG4gICAgXSB9KSxcbiAgICAvKiBAX19QVVJFX18gKi8ganN4czIoXG4gICAgICBcImRpdlwiLFxuICAgICAge1xuICAgICAgICBvbkNsaWNrOiBvbkxvYWRJZnJhbWUsXG4gICAgICAgIG9uUG9pbnRlck92ZXI6IHdhcm1Db25uZWN0aW9ucyxcbiAgICAgICAgY2xhc3NOYW1lOiBjcyhcbiAgICAgICAgICBcIm5vdGlvbi15dC1saXRlXCIsXG4gICAgICAgICAgaXNJZnJhbWVMb2FkZWQgJiYgXCJub3Rpb24teXQtbG9hZGVkXCIsXG4gICAgICAgICAgaWZyYW1lSW5pdGlhbGl6ZWQgJiYgXCJub3Rpb24teXQtaW5pdGlhbGl6ZWRcIixcbiAgICAgICAgICBjbGFzc05hbWVcbiAgICAgICAgKSxcbiAgICAgICAgc3R5bGUsXG4gICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeHMyKFwicGljdHVyZVwiLCB7IGNoaWxkcmVuOiBbXG4gICAgICAgICAgICByZXNvbHV0aW9ucy5tYXAoKHJlc29sdXRpb24pID0+IC8qIEBfX1BVUkVfXyAqLyBqc3gyKFxuICAgICAgICAgICAgICBcInNvdXJjZVwiLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc3JjU2V0OiBgJHtnZXRQb3N0ZXJVcmwoaWQsIHJlc29sdXRpb24sIFwid2VicFwiKX0gJHtyZXNvbHV0aW9ufXdgLFxuICAgICAgICAgICAgICAgIG1lZGlhOiBgKG1heC13aWR0aDogJHtyZXNvbHV0aW9ufXB4KWAsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJpbWFnZS93ZWJwXCJcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgcmVzb2x1dGlvblxuICAgICAgICAgICAgKSksXG4gICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MihcbiAgICAgICAgICAgICAgXCJpbWdcIixcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNyYzogZ2V0UG9zdGVyVXJsKGlkKSxcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLXl0LXRodW1ibmFpbFwiLFxuICAgICAgICAgICAgICAgIGxvYWRpbmc6IGxhenlJbWFnZSA/IFwibGF6eVwiIDogdm9pZCAwLFxuICAgICAgICAgICAgICAgIGFsdFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICAgXSB9KSxcbiAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MihcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJub3Rpb24teXQtcGxheWJ0blwiIH0pLFxuICAgICAgICAgIGlmcmFtZUluaXRpYWxpemVkICYmIC8qIEBfX1BVUkVfXyAqLyBqc3gyKFxuICAgICAgICAgICAgXCJpZnJhbWVcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgd2lkdGg6IFwiNTYwXCIsXG4gICAgICAgICAgICAgIGhlaWdodDogXCIzMTVcIixcbiAgICAgICAgICAgICAgZnJhbWVCb3JkZXI6IFwiMFwiLFxuICAgICAgICAgICAgICBhbGxvdzogXCJhY2NlbGVyb21ldGVyOyBhdXRvcGxheTsgZW5jcnlwdGVkLW1lZGlhOyBneXJvc2NvcGU7IHBpY3R1cmUtaW4tcGljdHVyZVwiLFxuICAgICAgICAgICAgICBhbGxvd0Z1bGxTY3JlZW46IHRydWUsXG4gICAgICAgICAgICAgIHRpdGxlOiBpZnJhbWVUaXRsZSxcbiAgICAgICAgICAgICAgc3JjOiBpZnJhbWVTcmMsXG4gICAgICAgICAgICAgIG9uTG9hZDogb25JZnJhbWVMb2FkZWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApXG4gICAgICAgIF1cbiAgICAgIH1cbiAgICApXG4gIF0gfSk7XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL2Fzc2V0LnRzeFxuaW1wb3J0IHsgRnJhZ21lbnQgYXMgRnJhZ21lbnQyLCBqc3ggYXMganN4MywganN4cyBhcyBqc3hzMyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIGlzU2VydmVyID0gIWdsb2JhbFRoaXMud2luZG93O1xudmFyIHN1cHBvcnRlZEFzc2V0VHlwZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbXG4gIFwicmVwbGl0XCIsXG4gIFwidmlkZW9cIixcbiAgXCJpbWFnZVwiLFxuICBcImVtYmVkXCIsXG4gIFwiZmlnbWFcIixcbiAgXCJ0eXBlZm9ybVwiLFxuICBcImV4Y2FsaWRyYXdcIixcbiAgXCJtYXBzXCIsXG4gIFwidHdlZXRcIixcbiAgXCJwZGZcIixcbiAgXCJnaXN0XCIsXG4gIFwiY29kZXBlblwiLFxuICBcImRyaXZlXCJcbl0pO1xuZnVuY3Rpb24gQXNzZXQoe1xuICBibG9jayxcbiAgem9vbWFibGUgPSB0cnVlLFxuICBjaGlsZHJlblxufSkge1xuICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaSwgX2osIF9rLCBfbDtcbiAgY29uc3QgeyByZWNvcmRNYXAsIG1hcEltYWdlVXJsLCBjb21wb25lbnRzIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGlmICghYmxvY2sgfHwgIXN1cHBvcnRlZEFzc2V0VHlwZXMuaGFzKGJsb2NrLnR5cGUpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3Qgc3R5bGUgPSB7XG4gICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICBkaXNwbGF5OiBcImZsZXhcIixcbiAgICBqdXN0aWZ5Q29udGVudDogXCJjZW50ZXJcIixcbiAgICBhbGlnblNlbGY6IFwiY2VudGVyXCIsXG4gICAgd2lkdGg6IFwiMTAwJVwiLFxuICAgIG1heFdpZHRoOiBcIjEwMCVcIixcbiAgICBmbGV4RGlyZWN0aW9uOiBcImNvbHVtblwiXG4gIH07XG4gIGNvbnN0IGFzc2V0U3R5bGUgPSB7fTtcbiAgaWYgKGJsb2NrLmZvcm1hdCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGJsb2NrX2FzcGVjdF9yYXRpbyxcbiAgICAgIGJsb2NrX2hlaWdodCxcbiAgICAgIGJsb2NrX3dpZHRoLFxuICAgICAgYmxvY2tfZnVsbF93aWR0aCxcbiAgICAgIGJsb2NrX3BhZ2Vfd2lkdGgsXG4gICAgICBibG9ja19wcmVzZXJ2ZV9zY2FsZVxuICAgIH0gPSBibG9jay5mb3JtYXQ7XG4gICAgaWYgKGJsb2NrX2Z1bGxfd2lkdGggfHwgYmxvY2tfcGFnZV93aWR0aCkge1xuICAgICAgaWYgKGJsb2NrX2Z1bGxfd2lkdGgpIHtcbiAgICAgICAgc3R5bGUud2lkdGggPSBcIjEwMHZ3XCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuICAgICAgfVxuICAgICAgaWYgKGJsb2NrLnR5cGUgPT09IFwidmlkZW9cIikge1xuICAgICAgICBpZiAoYmxvY2tfaGVpZ2h0KSB7XG4gICAgICAgICAgc3R5bGUuaGVpZ2h0ID0gYmxvY2tfaGVpZ2h0O1xuICAgICAgICB9IGVsc2UgaWYgKGJsb2NrX2FzcGVjdF9yYXRpbykge1xuICAgICAgICAgIHN0eWxlLnBhZGRpbmdCb3R0b20gPSBgJHtibG9ja19hc3BlY3RfcmF0aW8gKiAxMDB9JWA7XG4gICAgICAgIH0gZWxzZSBpZiAoYmxvY2tfcHJlc2VydmVfc2NhbGUpIHtcbiAgICAgICAgICBzdHlsZS5vYmplY3RGaXQgPSBcImNvbnRhaW5cIjtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChibG9ja19hc3BlY3RfcmF0aW8gJiYgYmxvY2sudHlwZSAhPT0gXCJpbWFnZVwiKSB7XG4gICAgICAgIHN0eWxlLnBhZGRpbmdCb3R0b20gPSBgJHtibG9ja19hc3BlY3RfcmF0aW8gKiAxMDB9JWA7XG4gICAgICB9IGVsc2UgaWYgKGJsb2NrX2hlaWdodCkge1xuICAgICAgICBzdHlsZS5oZWlnaHQgPSBibG9ja19oZWlnaHQ7XG4gICAgICB9IGVsc2UgaWYgKGJsb2NrX3ByZXNlcnZlX3NjYWxlKSB7XG4gICAgICAgIGlmIChibG9jay50eXBlID09PSBcImltYWdlXCIpIHtcbiAgICAgICAgICBzdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHlsZS5wYWRkaW5nQm90dG9tID0gXCI3NSVcIjtcbiAgICAgICAgICBzdHlsZS5taW5IZWlnaHQgPSAxMDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3dpdGNoICgoX2EgPSBibG9jay5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5ibG9ja19hbGlnbm1lbnQpIHtcbiAgICAgICAgY2FzZSBcImNlbnRlclwiOlxuICAgICAgICAgIHN0eWxlLmFsaWduU2VsZiA9IFwiY2VudGVyXCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJsZWZ0XCI6XG4gICAgICAgICAgc3R5bGUuYWxpZ25TZWxmID0gXCJzdGFydFwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwicmlnaHRcIjpcbiAgICAgICAgICBzdHlsZS5hbGlnblNlbGYgPSBcImVuZFwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKGJsb2NrX3dpZHRoKSB7XG4gICAgICAgIHN0eWxlLndpZHRoID0gYmxvY2tfd2lkdGg7XG4gICAgICB9XG4gICAgICBpZiAoYmxvY2tfcHJlc2VydmVfc2NhbGUgJiYgYmxvY2sudHlwZSAhPT0gXCJpbWFnZVwiKSB7XG4gICAgICAgIHN0eWxlLnBhZGRpbmdCb3R0b20gPSBcIjUwJVwiO1xuICAgICAgICBzdHlsZS5taW5IZWlnaHQgPSAxMDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoYmxvY2tfaGVpZ2h0ICYmIGJsb2NrLnR5cGUgIT09IFwiaW1hZ2VcIikge1xuICAgICAgICAgIHN0eWxlLmhlaWdodCA9IGJsb2NrX2hlaWdodDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJpbWFnZVwiKSB7XG4gICAgICBhc3NldFN0eWxlLm9iamVjdEZpdCA9IFwiY292ZXJcIjtcbiAgICB9IGVsc2UgaWYgKGJsb2NrX3ByZXNlcnZlX3NjYWxlKSB7XG4gICAgICBhc3NldFN0eWxlLm9iamVjdEZpdCA9IFwiY29udGFpblwiO1xuICAgIH1cbiAgfVxuICBsZXQgc291cmNlID0gKChfYiA9IHJlY29yZE1hcC5zaWduZWRfdXJscykgPT0gbnVsbCA/IHZvaWQgMCA6IF9iW2Jsb2NrLmlkXSkgfHwgKChfZSA9IChfZCA9IChfYyA9IGJsb2NrLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYy5zb3VyY2UpID09IG51bGwgPyB2b2lkIDAgOiBfZFswXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lWzBdKTtcbiAgaWYgKCFzb3VyY2UpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAoYmxvY2suc3BhY2VfaWQpIHtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHNvdXJjZSk7XG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJzcGFjZUlkXCIsIGJsb2NrLnNwYWNlX2lkKTtcbiAgICBzb3VyY2UgPSB1cmwudG9TdHJpbmcoKTtcbiAgfVxuICBsZXQgY29udGVudCA9IG51bGw7XG4gIGlmIChibG9jay50eXBlID09PSBcInR3ZWV0XCIpIHtcbiAgICBjb25zdCBzcmMgPSBzb3VyY2U7XG4gICAgaWYgKCFzcmMpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGlkID0gKF9nID0gKF9mID0gc3JjLnNwbGl0KFwiP1wiKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9mWzBdKSA9PSBudWxsID8gdm9pZCAwIDogX2cuc3BsaXQoXCIvXCIpLnBvcCgpO1xuICAgIGlmICghaWQpIHJldHVybiBudWxsO1xuICAgIGNvbnRlbnQgPSAvKiBAX19QVVJFX18gKi8ganN4MyhcbiAgICAgIFwiZGl2XCIsXG4gICAgICB7XG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgLi4uYXNzZXRTdHlsZSxcbiAgICAgICAgICBtYXhXaWR0aDogNDIwLFxuICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIixcbiAgICAgICAgICBtYXJnaW5MZWZ0OiBcImF1dG9cIixcbiAgICAgICAgICBtYXJnaW5SaWdodDogXCJhdXRvXCJcbiAgICAgICAgfSxcbiAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gzKGNvbXBvbmVudHMuVHdlZXQsIHsgaWQgfSlcbiAgICAgIH1cbiAgICApO1xuICB9IGVsc2UgaWYgKGJsb2NrLnR5cGUgPT09IFwicGRmXCIpIHtcbiAgICBzdHlsZS5vdmVyZmxvdyA9IFwiYXV0b1wiO1xuICAgIHN0eWxlLmJhY2tncm91bmQgPSBcInJnYigyMjYsIDIyNiwgMjI2KVwiO1xuICAgIHN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgaWYgKCFzdHlsZS5wYWRkaW5nKSB7XG4gICAgICBzdHlsZS5wYWRkaW5nID0gXCI4cHggMTZweFwiO1xuICAgIH1cbiAgICBpZiAoIWlzU2VydmVyKSB7XG4gICAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIGpzeDMoY29tcG9uZW50cy5QZGYsIHsgZmlsZTogc291cmNlIH0pO1xuICAgIH1cbiAgfSBlbHNlIGlmIChibG9jay50eXBlID09PSBcImVtYmVkXCIgfHwgYmxvY2sudHlwZSA9PT0gXCJ2aWRlb1wiIHx8IGJsb2NrLnR5cGUgPT09IFwiZmlnbWFcIiB8fCBibG9jay50eXBlID09PSBcInR5cGVmb3JtXCIgfHwgYmxvY2sudHlwZSA9PT0gXCJnaXN0XCIgfHwgYmxvY2sudHlwZSA9PT0gXCJtYXBzXCIgfHwgYmxvY2sudHlwZSA9PT0gXCJleGNhbGlkcmF3XCIgfHwgYmxvY2sudHlwZSA9PT0gXCJjb2RlcGVuXCIgfHwgYmxvY2sudHlwZSA9PT0gXCJkcml2ZVwiIHx8IGJsb2NrLnR5cGUgPT09IFwicmVwbGl0XCIpIHtcbiAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJ2aWRlb1wiICYmIHNvdXJjZSAmJiAhc291cmNlLmluY2x1ZGVzKFwieW91dHViZVwiKSAmJiAhc291cmNlLmluY2x1ZGVzKFwieW91dHUuYmVcIikgJiYgIXNvdXJjZS5pbmNsdWRlcyhcInZpbWVvXCIpICYmICFzb3VyY2UuaW5jbHVkZXMoXCJ3aXN0aWFcIikgJiYgIXNvdXJjZS5pbmNsdWRlcyhcImxvb21cIikgJiYgIXNvdXJjZS5pbmNsdWRlcyhcInZpZGVvYXNrXCIpICYmICFzb3VyY2UuaW5jbHVkZXMoXCJnZXRjbG91ZGFwcFwiKSAmJiAhc291cmNlLmluY2x1ZGVzKFwidGVsbGFcIikpIHtcbiAgICAgIHN0eWxlLnBhZGRpbmdCb3R0b20gPSB2b2lkIDA7XG4gICAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIGpzeDMoXG4gICAgICAgIFwidmlkZW9cIixcbiAgICAgICAge1xuICAgICAgICAgIHBsYXlzSW5saW5lOiB0cnVlLFxuICAgICAgICAgIGNvbnRyb2xzOiB0cnVlLFxuICAgICAgICAgIHByZWxvYWQ6IFwibWV0YWRhdGFcIixcbiAgICAgICAgICBzdHlsZTogYXNzZXRTdHlsZSxcbiAgICAgICAgICBzcmM6IHNvdXJjZSxcbiAgICAgICAgICB0aXRsZTogYmxvY2sudHlwZVxuICAgICAgICB9XG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgc3JjID0gKChfaCA9IGJsb2NrLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9oLmRpc3BsYXlfc291cmNlKSB8fCBzb3VyY2U7XG4gICAgICBpZiAoc3JjKSB7XG4gICAgICAgIGNvbnN0IHlvdXR1YmVWaWRlb0lkID0gYmxvY2sudHlwZSA9PT0gXCJ2aWRlb1wiID8gZ2V0WW91dHViZUlkKHNyYykgOiBudWxsO1xuICAgICAgICBpZiAoeW91dHViZVZpZGVvSWQpIHtcbiAgICAgICAgICBjb25zdCBwYXJhbXMgPSBnZXRVcmxQYXJhbXMoc3JjKTtcbiAgICAgICAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIGpzeDMoXG4gICAgICAgICAgICBMaXRlWW91VHViZUVtYmVkLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZDogeW91dHViZVZpZGVvSWQsXG4gICAgICAgICAgICAgIHN0eWxlOiBhc3NldFN0eWxlLFxuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLWFzc2V0LW9iamVjdC1maXRcIixcbiAgICAgICAgICAgICAgcGFyYW1zXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChibG9jay50eXBlID09PSBcImdpc3RcIikge1xuICAgICAgICAgIGlmICghc3JjLmVuZHNXaXRoKFwiLnBpYmJcIikpIHtcbiAgICAgICAgICAgIHNyYyA9IGAke3NyY30ucGliYmA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGFzc2V0U3R5bGUud2lkdGggPSBcIjEwMCVcIjtcbiAgICAgICAgICBzdHlsZS5wYWRkaW5nQm90dG9tID0gXCI1MCVcIjtcbiAgICAgICAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIGpzeDMoXG4gICAgICAgICAgICBcImlmcmFtZVwiLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzdHlsZTogYXNzZXRTdHlsZSxcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1hc3NldC1vYmplY3QtZml0XCIsXG4gICAgICAgICAgICAgIHNyYyxcbiAgICAgICAgICAgICAgdGl0bGU6IFwiR2l0SHViIEdpc3RcIixcbiAgICAgICAgICAgICAgZnJhbWVCb3JkZXI6IFwiMFwiLFxuICAgICAgICAgICAgICBsb2FkaW5nOiBcImxhenlcIixcbiAgICAgICAgICAgICAgc2Nyb2xsaW5nOiBcImF1dG9cIlxuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3JjICs9IGJsb2NrLnR5cGUgPT09IFwidHlwZWZvcm1cIiA/IFwiJmRpc2FibGUtYXV0by1mb2N1cz10cnVlXCIgOiBcIlwiO1xuICAgICAgICAgIGNvbnRlbnQgPSAvKiBAX19QVVJFX18gKi8ganN4MyhcbiAgICAgICAgICAgIFwiaWZyYW1lXCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tYXNzZXQtb2JqZWN0LWZpdFwiLFxuICAgICAgICAgICAgICBzdHlsZTogYXNzZXRTdHlsZSxcbiAgICAgICAgICAgICAgc3JjLFxuICAgICAgICAgICAgICB0aXRsZTogYGlmcmFtZSAke2Jsb2NrLnR5cGV9YCxcbiAgICAgICAgICAgICAgZnJhbWVCb3JkZXI6IFwiMFwiLFxuICAgICAgICAgICAgICBhbGxvd0Z1bGxTY3JlZW46IHRydWUsXG4gICAgICAgICAgICAgIGxvYWRpbmc6IFwibGF6eVwiLFxuICAgICAgICAgICAgICBzY3JvbGxpbmc6IFwiYXV0b1wiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChibG9jay50eXBlID09PSBcImltYWdlXCIpIHtcbiAgICBpZiAoc291cmNlLmluY2x1ZGVzKFwiZmlsZS5ub3Rpb24uc29cIikpIHtcbiAgICAgIHNvdXJjZSA9IChfayA9IChfaiA9IChfaSA9IGJsb2NrLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfaS5zb3VyY2UpID09IG51bGwgPyB2b2lkIDAgOiBfalswXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9rWzBdO1xuICAgIH1cbiAgICBjb25zdCBzcmMgPSBtYXBJbWFnZVVybChzb3VyY2UsIGJsb2NrKTtcbiAgICBjb25zdCBjYXB0aW9uID0gZ2V0VGV4dENvbnRlbnQoKF9sID0gYmxvY2sucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9sLmNhcHRpb24pO1xuICAgIGNvbnN0IGFsdCA9IGNhcHRpb24gfHwgXCJub3Rpb24gaW1hZ2VcIjtcbiAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIGpzeDMoXG4gICAgICBMYXp5SW1hZ2UsXG4gICAgICB7XG4gICAgICAgIHNyYyxcbiAgICAgICAgYWx0LFxuICAgICAgICB6b29tYWJsZSxcbiAgICAgICAgaGVpZ2h0OiBzdHlsZS5oZWlnaHQsXG4gICAgICAgIHN0eWxlOiBhc3NldFN0eWxlXG4gICAgICB9XG4gICAgKTtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeHMzKEZyYWdtZW50MiwgeyBjaGlsZHJlbjogW1xuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hzMyhcImRpdlwiLCB7IHN0eWxlLCBjaGlsZHJlbjogW1xuICAgICAgY29udGVudCxcbiAgICAgIGJsb2NrLnR5cGUgPT09IFwiaW1hZ2VcIiAmJiBjaGlsZHJlblxuICAgIF0gfSksXG4gICAgYmxvY2sudHlwZSAhPT0gXCJpbWFnZVwiICYmIGNoaWxkcmVuXG4gIF0gfSk7XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL3RleHQudHN4XG5pbXBvcnQgXCJub3Rpb24tdHlwZXNcIjtcbmltcG9ydCB7IHBhcnNlUGFnZUlkIH0gZnJvbSBcIm5vdGlvbi11dGlsc1wiO1xuaW1wb3J0IFJlYWN0OCBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL2NvbXBvbmVudHMvZW9pLnRzeFxuaW1wb3J0IFwibm90aW9uLXR5cGVzXCI7XG5cbi8vIHNyYy9pY29ucy90eXBlLWdpdGh1Yi50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3g0IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5mdW5jdGlvbiBTdmdUeXBlR2l0SHViKHByb3BzKSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4NChcInN2Z1wiLCB7IHZpZXdCb3g6IFwiMCAwIDI2MCAyNjBcIiwgLi4ucHJvcHMsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4NChcImdcIiwgeyBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDQoXG4gICAgXCJwYXRoXCIsXG4gICAge1xuICAgICAgZDogXCJNMTI4LjAwMTA2LDAgQzU3LjMxNzI5MjYsMCAwLDU3LjMwNjY5NDIgMCwxMjguMDAxMDYgQzAsMTg0LjU1NTI4MSAzNi42NzYxOTk3LDIzMi41MzU1NDIgODcuNTM0OTM3LDI0OS40NjA4OTkgQzkzLjkzMjAyMjMsMjUwLjY0NTc3OSA5Ni4yODA1ODgsMjQ2LjY4NDE2NSA5Ni4yODA1ODgsMjQzLjMwMzMzMyBDOTYuMjgwNTg4LDI0MC4yNTEwNDUgOTYuMTYxODg3OCwyMzAuMTY3ODk5IDk2LjEwNjc3NywyMTkuNDcyMTc2IEM2MC40OTY3NTg1LDIyNy4yMTUyMzUgNTIuOTgyNjIwNywyMDQuMzY5NzEyIDUyLjk4MjYyMDcsMjA0LjM2OTcxMiBDNDcuMTU5OTU4NCwxODkuNTc0NTk4IDM4Ljc3MDQwOCwxODUuNjQwNTM4IDM4Ljc3MDQwOCwxODUuNjQwNTM4IEMyNy4xNTY4Nzg1LDE3Ny42OTYxMTMgMzkuNjQ1ODIwNiwxNzcuODU5MzI1IDM5LjY0NTgyMDYsMTc3Ljg1OTMyNSBDNTIuNDk5MzQxOSwxNzguNzYyMjkzIDU5LjI2NzM2NSwxOTEuMDQ5ODcgNTkuMjY3MzY1LDE5MS4wNDk4NyBDNzAuNjgzNzY3NSwyMTAuNjE4NDIzIDg5LjIxMTU3NTMsMjA0Ljk2MTA5MyA5Ni41MTU4Njg1LDIwMS42OTA0ODIgQzk3LjY2NDcxNTUsMTkzLjQxNzUxMiAxMDAuOTgxOTU5LDE4Ny43NzA3OCAxMDQuNjQyNTgzLDE4NC41NzQzNTcgQzc2LjIxMTc5OSwxODEuMzM3NjYgNDYuMzI0ODE5LDE3MC4zNjIxNDQgNDYuMzI0ODE5LDEyMS4zMTU3MDIgQzQ2LjMyNDgxOSwxMDcuMzQwODg5IDUxLjMyNTA1ODgsOTUuOTIyMzY4MiA1OS41MTMyNDM3LDg2Ljk1ODM5MzcgQzU4LjE4NDIyNjgsODMuNzM0NDE1MiA1My44MDI5MjI5LDcwLjcxNTU2MiA2MC43NTMyMzU0LDUzLjA4NDM2MzYgQzYwLjc1MzIzNTQsNTMuMDg0MzYzNiA3MS41MDE5NTAxLDQ5LjY0NDE4MTMgOTUuOTYyNjQxMiw2Ni4yMDQ5NTk1IEMxMDYuMTcyOTY3LDYzLjM2ODg3NiAxMTcuMTIzMDQ3LDYxLjk0NjU5NDkgMTI4LjAwMTA2LDYxLjg5Nzg0MzIgQzEzOC44NzkwNzMsNjEuOTQ2NTk0OSAxNDkuODM3NjMyLDYzLjM2ODg3NiAxNjAuMDY3MDMzLDY2LjIwNDk1OTUgQzE4NC40OTgwNSw0OS42NDQxODEzIDE5NS4yMzE5MjYsNTMuMDg0MzYzNiAxOTUuMjMxOTI2LDUzLjA4NDM2MzYgQzIwMi4xOTkxOTcsNzAuNzE1NTYyIDE5Ny44MTU3NzMsODMuNzM0NDE1MiAxOTYuNDg2NzU2LDg2Ljk1ODM5MzcgQzIwNC42OTQwMTgsOTUuOTIyMzY4MiAyMDkuNjYwMzQzLDEwNy4zNDA4ODkgMjA5LjY2MDM0MywxMjEuMzE1NzAyIEMyMDkuNjYwMzQzLDE3MC40Nzg3MjUgMTc5LjcxNjEzMywxODEuMzAzNzQ3IDE1MS4yMTMyODEsMTg0LjQ3MjYxNCBDMTU1LjgwNDQzLDE4OC40NDQ4MjggMTU5Ljg5NTM0MiwxOTYuMjM0NTE4IDE1OS44OTUzNDIsMjA4LjE3NjU5MyBDMTU5Ljg5NTM0MiwyMjUuMzAzMzE3IDE1OS43NDY5NjgsMjM5LjA4NzM2MSAxNTkuNzQ2OTY4LDI0My4zMDMzMzMgQzE1OS43NDY5NjgsMjQ2LjcwOTYwMSAxNjIuMDUxMDIsMjUwLjcwMDg5IDE2OC41MzkyNSwyNDkuNDQzOTQxIEMyMTkuMzcwNDMyLDIzMi40OTk1MDcgMjU2LDE4NC41MzYyMDQgMjU2LDEyOC4wMDEwNiBDMjU2LDU3LjMwNjY5NDIgMTk4LjY5MTE4NywwIDEyOC4wMDEwNiwwIFogTTQ3Ljk0MDU1OTMsMTgyLjM0MDIxMiBDNDcuNjU4NjQ2NSwxODIuOTc2MTA1IDQ2LjY1ODE3NDUsMTgzLjE2Njg3MyA0NS43NDY3Mjc3LDE4Mi43MzAyMjcgQzQ0LjgxODMyMzUsMTgyLjMxMjY1NiA0NC4yOTY4OTE0LDE4MS40NDU3MjIgNDQuNTk3ODgwOCwxODAuODA3NzEgQzQ0Ljg3MzQzNDQsMTgwLjE1MjczOSA0NS44NzYwMjYsMTc5Ljk3MDQ1IDQ2LjgwMjMxMDMsMTgwLjQwOTIxNiBDNDcuNzMyODM0MiwxODAuODI2Nzg2IDQ4LjI2Mjc0NTEsMTgxLjcwMjE5OSA0Ny45NDA1NTkzLDE4Mi4zNDAyMTIgWiBNNTQuMjM2Nzg5MiwxODcuOTU4MjU0IEM1My42MjYzMzE4LDE4OC41MjQxOTkgNTIuNDMyOTcyMywxODguMjYxMzYzIDUxLjYyMzI2ODIsMTg3LjM2Njg3NCBDNTAuNzg2MDA4OCwxODYuNDc0NTA0IDUwLjYyOTE1NTMsMTg1LjI4MTE0NCA1MS4yNDgwOTEyLDE4NC43MDY3MiBDNTEuODc3NjI1NCwxODQuMTQwNzc1IDUzLjAzNDk1MTIsMTg0LjQwNTczMSA1My44NzQzMzAyLDE4NS4yOTgxMDEgQzU0LjcxMTU4OTIsMTg2LjIwMTA2OSA1NC44NzQ4MDE5LDE4Ny4zODU5NSA1NC4yMzY3ODkyLDE4Ny45NTgyNTQgWiBNNTguNTU2MjQxMywxOTUuMTQ2MzQ3IEM1Ny43NzE5NzMyLDE5NS42OTEwOTYgNTYuNDg5NTg4NiwxOTUuMTgwMjYxIDU1LjY5Njg0MTcsMTk0LjA0MjAxMyBDNTQuOTEyNTczMywxOTIuOTAzNzY0IDU0LjkxMjU3MzMsMTkxLjUzODcxMyA1NS43MTM3OTksMTkwLjk5MTg0NSBDNTYuNTA4NjY1MSwxOTAuNDQ0OTc3IDU3Ljc3MTk3MzIsMTkwLjkzNjczNSA1OC41NzUzMTgxLDE5Mi4wNjY1MDUgQzU5LjM1NzQ2NjksMTkzLjIyMzgzIDU5LjM1NzQ2NjksMTk0LjU4ODg4IDU4LjU1NjI0MTMsMTk1LjE0NjM0NyBaIE02NS44NjEzNTkyLDIwMy40NzExNzQgQzY1LjE1OTc1NzEsMjA0LjI0NDg0NiA2My42NjU0MDgzLDIwNC4wMzcxMiA2Mi41NzE2NzE3LDIwMi45ODE1MzggQzYxLjQ1MjQ5OTksMjAxLjk0OTI3IDYxLjE0MDkxMjIsMjAwLjQ4NDU5NiA2MS44NDQ2MzQxLDE5OS43MTA5MjYgQzYyLjU1NDcxNDYsMTk4LjkzNTEzNyA2NC4wNTc1NDIyLDE5OS4xNTM0NiA2NS4xNTk3NTcxLDIwMC4yMDA1NjQgQzY2LjI3MDQ1MDYsMjAxLjIzMDcxMiA2Ni42MDk1OTM2LDIwMi43MDU5ODQgNjUuODYxMzU5MiwyMDMuNDcxMTc0IFogTTc1LjMwMjUxNTEsMjA2LjI4MTU0MiBDNzQuOTkzMDQ3NCwyMDcuMjg0MTM0IDczLjU1MzgwOSwyMDcuNzM5ODU3IDcyLjEwMzk3MjQsMjA3LjMxMzgwOSBDNzAuNjU2MjU1NiwyMDYuODc1MDQzIDY5LjcwODc3NDgsMjA1LjcwMDc2MSA3MC4wMDEyODU3LDIwNC42ODc1NzEgQzcwLjMwMjI3NSwyMDMuNjc4NjIxIDcxLjc0Nzg3MjEsMjAzLjIwMzgyIDczLjIwODMwNjksMjAzLjY1OTU0MyBDNzQuNjUzOTA0MSwyMDQuMDk2MTkgNzUuNjAzNTA0OCwyMDUuMjYxOTk0IDc1LjMwMjUxNTEsMjA2LjI4MTU0MiBaIE04Ni4wNDY5NDcsMjA3LjQ3MzYyNyBDODYuMDgyOTgwNiwyMDguNTI5MjA5IDg0Ljg1MzU4NzEsMjA5LjQwNDYyMiA4My4zMzE2ODI5LDIwOS40MjM3IEM4MS44MDEzLDIwOS40NTc2MTQgODAuNTYzNDI4LDIwOC42MDMzOTggODAuNTQ2NDcwOCwyMDcuNTY0NzcyIEM4MC41NDY0NzA4LDIwNi40OTg1OTEgODEuNzQ4MzA4OCwyMDUuNjMxNjU3IDgzLjI3ODY5MTcsMjA1LjYwNjIyMSBDODQuODAwNTk2MiwyMDUuNTc2NTQ2IDg2LjA0Njk0NywyMDYuNDI0NDAzIDg2LjA0Njk0NywyMDcuNDczNjI3IFogTTk2LjYwMjE0NzEsMjA3LjA2OTAyMyBDOTYuNzg0NDM2NiwyMDguMDk5MTcxIDk1LjcyNjczNDEsMjA5LjE1Njg3MiA5NC4yMTU0MjgsMjA5LjQzODc4NSBDOTIuNzI5NTU3NywyMDkuNzEwMDk5IDkxLjM1MzkwODYsMjA5LjA3NDIwNiA5MS4xNjUyNjAzLDIwOC4wNTI1MzggQzkwLjk4MDg1MTUsMjA2Ljk5Njk1NSA5Mi4wNTc2MzA2LDIwNS45MzkyNTMgOTMuNTQxMzgxMywyMDUuNjY1ODIgQzk1LjA1NDgwNywyMDUuNDAyOTg0IDk2LjQwOTI1OTYsMjA2LjAyMTkxOSA5Ni42MDIxNDcxLDIwNy4wNjkwMjMgWlwiLFxuICAgICAgZmlsbDogXCIjMTYxNjE0XCJcbiAgICB9XG4gICkgfSkgfSk7XG59XG52YXIgdHlwZV9naXRodWJfZGVmYXVsdCA9IFN2Z1R5cGVHaXRIdWI7XG5cbi8vIHNyYy9jb21wb25lbnRzL21lbnRpb24tcHJldmlldy1jYXJkLnRzeFxuaW1wb3J0IHsganN4IGFzIGpzeDUsIGpzeHMgYXMganN4czQgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmZ1bmN0aW9uIGNhcGl0YWxpemVGaXJzdExldHRlcihzdHIpIHtcbiAgaWYgKCFzdHIpIHJldHVybiBcIlwiO1xuICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpO1xufVxuZnVuY3Rpb24gTWVudGlvblByZXZpZXdDYXJkKHtcbiAgb3duZXIsXG4gIGxhc3RVcGRhdGVkLFxuICBleHRlcm5hbEltYWdlLFxuICB0aXRsZSxcbiAgZG9tYWluXG59KSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4czQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLWV4dGVybmFsLXN1YnRpdGxlXCIsIGNoaWxkcmVuOiBbXG4gICAgZXh0ZXJuYWxJbWFnZSAmJiAvKiBAX19QVVJFX18gKi8ganN4czQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLXByZXZpZXctY2FyZC1kb21haW4td2FycFwiLCBjaGlsZHJlbjogW1xuICAgICAgLyogQF9fUFVSRV9fICovIGpzeDUoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLXByZXZpZXctY2FyZC1sb2dvXCIsIGNoaWxkcmVuOiBleHRlcm5hbEltYWdlIH0pLFxuICAgICAgLyogQF9fUFVSRV9fICovIGpzeDUoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLXByZXZpZXctY2FyZC1kb21haW5cIiwgY2hpbGRyZW46IGNhcGl0YWxpemVGaXJzdExldHRlcihkb21haW4uc3BsaXQoXCIuXCIpWzBdKSB9KVxuICAgIF0gfSksXG4gICAgLyogQF9fUFVSRV9fICovIGpzeDUoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLXByZXZpZXctY2FyZC10aXRsZVwiLCBjaGlsZHJlbjogdGl0bGUgfSksXG4gICAgb3duZXIgJiYgLyogQF9fUFVSRV9fICovIGpzeHM0KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcIm5vdGlvbi1leHRlcm5hbC1zdWJ0aXRsZS1pdGVtXCIsIGNoaWxkcmVuOiBbXG4gICAgICAvKiBAX19QVVJFX18gKi8ganN4NShcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJub3Rpb24tZXh0ZXJuYWwtc3VidGl0bGUtaXRlbS1uYW1lXCIsIGNoaWxkcmVuOiBcIk93bmVyXCIgfSksXG4gICAgICAvKiBAX19QVVJFX18gKi8ganN4NShcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLWV4dGVybmFsLXN1YnRpdGxlLWl0ZW0tZGVzY1wiLCBjaGlsZHJlbjogb3duZXIgfSlcbiAgICBdIH0pLFxuICAgIGxhc3RVcGRhdGVkICYmIC8qIEBfX1BVUkVfXyAqLyBqc3hzNChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJub3Rpb24tZXh0ZXJuYWwtc3VidGl0bGUtaXRlbVwiLCBjaGlsZHJlbjogW1xuICAgICAgLyogQF9fUFVSRV9fICovIGpzeDUoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLWV4dGVybmFsLXN1YnRpdGxlLWl0ZW0tbmFtZVwiLCBjaGlsZHJlbjogXCJVcGRhdGVkXCIgfSksXG4gICAgICAvKiBAX19QVVJFX18gKi8ganN4NShcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLWV4dGVybmFsLXN1YnRpdGxlLWl0ZW0tZGVzY1wiLCBjaGlsZHJlbjogbGFzdFVwZGF0ZWQgfSlcbiAgICBdIH0pLFxuICAgIGRvbWFpbiA9PT0gXCJnaXRodWIuY29tXCIgJiYgLyogQF9fUFVSRV9fICovIGpzeHM0KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcIm5vdGlvbi1wcmV2aWV3LWNhcmQtZ2l0aHViLXNoaWVsZHNcIiwgY2hpbGRyZW46IFtcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3g1KFxuICAgICAgICBcImltZ1wiLFxuICAgICAgICB7XG4gICAgICAgICAgc3JjOiBgaHR0cHM6Ly9pbWcuc2hpZWxkcy5pby9naXRodWIvc3RhcnMvJHtvd25lcn0vJHt0aXRsZX0/bG9nbz1naXRodWJgLFxuICAgICAgICAgIGFsdDogXCJcIlxuICAgICAgICB9XG4gICAgICApLFxuICAgICAgLyogQF9fUFVSRV9fICovIGpzeDUoXG4gICAgICAgIFwiaW1nXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBzcmM6IGBodHRwczovL2ltZy5zaGllbGRzLmlvL2dpdGh1Yi9sYXN0LWNvbW1pdC8ke293bmVyfS8ke3RpdGxlfWAsXG4gICAgICAgICAgYWx0OiBcIlwiXG4gICAgICAgIH1cbiAgICAgIClcbiAgICBdIH0pXG4gIF0gfSk7XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL2VvaS50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3g2LCBqc3hzIGFzIGpzeHM1IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5mdW5jdGlvbiBFT0koe1xuICBibG9jayxcbiAgaW5saW5lLFxuICBjbGFzc05hbWVcbn0pIHtcbiAgdmFyIF9hLCBfYiwgX2M7XG4gIGNvbnN0IHsgY29tcG9uZW50cyB9ID0gdXNlTm90aW9uQ29udGV4dCgpO1xuICBjb25zdCB7IG9yaWdpbmFsX3VybCwgYXR0cmlidXRlcywgZG9tYWluIH0gPSAoYmxvY2sgPT0gbnVsbCA/IHZvaWQgMCA6IGJsb2NrLmZvcm1hdCkgfHwge307XG4gIGlmICghb3JpZ2luYWxfdXJsIHx8ICFhdHRyaWJ1dGVzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgdGl0bGUgPSAoX2EgPSBhdHRyaWJ1dGVzLmZpbmQoKGF0dHIpID0+IGF0dHIuaWQgPT09IFwidGl0bGVcIikpID09IG51bGwgPyB2b2lkIDAgOiBfYS52YWx1ZXNbMF07XG4gIGxldCBvd25lciA9IChfYiA9IGF0dHJpYnV0ZXMuZmluZCgoYXR0cikgPT4gYXR0ci5pZCA9PT0gXCJvd25lclwiKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnZhbHVlc1swXTtcbiAgY29uc3QgbGFzdFVwZGF0ZWRBdCA9IChfYyA9IGF0dHJpYnV0ZXMuZmluZCgoYXR0cikgPT4gYXR0ci5pZCA9PT0gXCJ1cGRhdGVkX2F0XCIpKSA9PSBudWxsID8gdm9pZCAwIDogX2MudmFsdWVzWzBdO1xuICBjb25zdCBsYXN0VXBkYXRlZCA9IGxhc3RVcGRhdGVkQXQgPyBmb3JtYXROb3Rpb25EYXRlVGltZShsYXN0VXBkYXRlZEF0KSA6IG51bGw7XG4gIGxldCBleHRlcm5hbEltYWdlO1xuICBzd2l0Y2ggKGRvbWFpbikge1xuICAgIGNhc2UgXCJnaXRodWIuY29tXCI6XG4gICAgICBleHRlcm5hbEltYWdlID0gLyogQF9fUFVSRV9fICovIGpzeDYodHlwZV9naXRodWJfZGVmYXVsdCwge30pO1xuICAgICAgaWYgKG93bmVyKSB7XG4gICAgICAgIGNvbnN0IHBhcnRzID0gb3duZXIuc3BsaXQoXCIvXCIpO1xuICAgICAgICBvd25lciA9IHBhcnRzLmF0KC0xKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBpZiAodHJ1ZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBgVW5zdXBwb3J0ZWQgZXh0ZXJuYWxfb2JqZWN0X2luc3RhbmNlIGRvbWFpbiBcIiR7ZG9tYWlufVwiYCxcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeShibG9jaywgbnVsbCwgMilcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4czUoXG4gICAgY29tcG9uZW50cy5MaW5rLFxuICAgIHtcbiAgICAgIHRhcmdldDogXCJfYmxhbmtcIixcbiAgICAgIHJlbDogXCJub29wZW5lciBub3JlZmVycmVyXCIsXG4gICAgICBocmVmOiBvcmlnaW5hbF91cmwsXG4gICAgICBjbGFzc05hbWU6IGNzKFxuICAgICAgICBcIm5vdGlvbi1leHRlcm5hbFwiLFxuICAgICAgICBpbmxpbmUgPyBcIm5vdGlvbi1leHRlcm5hbC1tZW50aW9uXCIgOiBcIm5vdGlvbi1leHRlcm5hbC1ibG9jayBub3Rpb24tcm93XCIsXG4gICAgICAgIGNsYXNzTmFtZVxuICAgICAgKSxcbiAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgIGV4dGVybmFsSW1hZ2UgJiYgLyogQF9fUFVSRV9fICovIGpzeDYoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLWV4dGVybmFsLWltYWdlXCIsIGNoaWxkcmVuOiBleHRlcm5hbEltYWdlIH0pLFxuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4czUoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLWV4dGVybmFsLWRlc2NyaXB0aW9uXCIsIGNoaWxkcmVuOiBbXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDYoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLWV4dGVybmFsLXRpdGxlXCIsIGNoaWxkcmVuOiB0aXRsZSB9KSxcbiAgICAgICAgICAhaW5saW5lICYmIG93bmVyID8gLyogQF9fUFVSRV9fICovIGpzeHM1KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcIm5vdGlvbi1leHRlcm5hbC1ibG9jay1kZXNjXCIsIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICBvd25lcixcbiAgICAgICAgICAgIGxhc3RVcGRhdGVkICYmIC8qIEBfX1BVUkVfXyAqLyBqc3g2KFwic3BhblwiLCB7IGNoaWxkcmVuOiBcIiBcXHUyMDIyIFwiIH0pLFxuICAgICAgICAgICAgbGFzdFVwZGF0ZWQgJiYgYFVwZGF0ZWQgJHtsYXN0VXBkYXRlZH1gXG4gICAgICAgICAgXSB9KSA6IG51bGwsXG4gICAgICAgICAgaW5saW5lICYmIChvd25lciB8fCBsYXN0VXBkYXRlZCkgJiYgLyogQF9fUFVSRV9fICovIGpzeDYoXG4gICAgICAgICAgICBNZW50aW9uUHJldmlld0NhcmQsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICAgICBvd25lcixcbiAgICAgICAgICAgICAgbGFzdFVwZGF0ZWQsXG4gICAgICAgICAgICAgIGRvbWFpbixcbiAgICAgICAgICAgICAgZXh0ZXJuYWxJbWFnZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIClcbiAgICAgICAgXSB9KVxuICAgICAgXVxuICAgIH1cbiAgKTtcbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvZ3JhY2VmdWwtaW1hZ2UudHN4XG5pbXBvcnQgXCJyZWFjdFwiO1xuaW1wb3J0IHsgSW1nIH0gZnJvbSBcInJlYWN0LWltYWdlXCI7XG5pbXBvcnQgeyBqc3ggYXMganN4NyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuZnVuY3Rpb24gR3JhY2VmdWxJbWFnZShwcm9wcykge1xuICBpZiAoaXNCcm93c2VyKSB7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3g3KEltZywgeyAuLi5wcm9wcyB9KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDcoXCJpbWdcIiwgeyAuLi5wcm9wcyB9KTtcbiAgfVxufVxuXG4vLyBzcmMvY29tcG9uZW50cy9saW5rLW1lbnRpb24udHN4XG5pbXBvcnQgXCJyZWFjdFwiO1xuaW1wb3J0IHsganN4IGFzIGpzeDgsIGpzeHMgYXMganN4czYgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmZ1bmN0aW9uIExpbmtNZW50aW9uKHsgbWV0YWRhdGEgfSkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeHM2KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJub3Rpb24tbGluay1tZW50aW9uXCIsIGNoaWxkcmVuOiBbXG4gICAgLyogQF9fUFVSRV9fICovIGpzeDgoTGlua01lbnRpb25JbmxpbmUsIHsgbWV0YWRhdGEgfSksXG4gICAgLyogQF9fUFVSRV9fICovIGpzeDgoTGlua01lbnRpb25QcmV2aWV3LCB7IG1ldGFkYXRhIH0pXG4gIF0gfSk7XG59XG5mdW5jdGlvbiBMaW5rTWVudGlvbklubGluZSh7IG1ldGFkYXRhIH0pIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzNihcbiAgICBcImFcIixcbiAgICB7XG4gICAgICBocmVmOiBtZXRhZGF0YS5ocmVmLFxuICAgICAgdGFyZ2V0OiBcIl9ibGFua1wiLFxuICAgICAgcmVsOiBcIm5vb3BlbmVyIG5vcmVmZXJyZXJcIixcbiAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tbGluay1tZW50aW9uLWxpbmtcIixcbiAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3g4KFxuICAgICAgICAgIFwiaW1nXCIsXG4gICAgICAgICAge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1saW5rLW1lbnRpb24taWNvblwiLFxuICAgICAgICAgICAgc3JjOiBtZXRhZGF0YS5pY29uX3VybCxcbiAgICAgICAgICAgIGFsdDogbWV0YWRhdGEubGlua19wcm92aWRlclxuICAgICAgICAgIH1cbiAgICAgICAgKSxcbiAgICAgICAgbWV0YWRhdGEubGlua19wcm92aWRlciAmJiAvKiBAX19QVVJFX18gKi8ganN4OChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLWxpbmstbWVudGlvbi1wcm92aWRlclwiLCBjaGlsZHJlbjogbWV0YWRhdGEubGlua19wcm92aWRlciB9KSxcbiAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDgoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcIm5vdGlvbi1saW5rLW1lbnRpb24tdGl0bGVcIiwgY2hpbGRyZW46IG1ldGFkYXRhLnRpdGxlIH0pXG4gICAgICBdXG4gICAgfVxuICApO1xufVxuZnVuY3Rpb24gTGlua01lbnRpb25QcmV2aWV3KHsgbWV0YWRhdGEgfSkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDgoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLWxpbmstbWVudGlvbi1wcmV2aWV3XCIsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4czYoXCJhcnRpY2xlXCIsIHsgY2xhc3NOYW1lOiBcIm5vdGlvbi1saW5rLW1lbnRpb24tY2FyZFwiLCBjaGlsZHJlbjogW1xuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3g4KFxuICAgICAgXCJpbWdcIixcbiAgICAgIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1saW5rLW1lbnRpb24tcHJldmlldy10aHVtYm5haWxcIixcbiAgICAgICAgc3JjOiBtZXRhZGF0YS50aHVtYm5haWxfdXJsLFxuICAgICAgICBhbHQ6IG1ldGFkYXRhLnRpdGxlLFxuICAgICAgICByZWZlcnJlclBvbGljeTogXCJzYW1lLW9yaWdpblwiXG4gICAgICB9XG4gICAgKSxcbiAgICAvKiBAX19QVVJFX18gKi8ganN4czYoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLWxpbmstbWVudGlvbi1wcmV2aWV3LWNvbnRlbnRcIiwgY2hpbGRyZW46IFtcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3g4KFwicFwiLCB7IGNsYXNzTmFtZTogXCJub3Rpb24tbGluay1tZW50aW9uLXByZXZpZXctdGl0bGVcIiwgY2hpbGRyZW46IG1ldGFkYXRhLnRpdGxlIH0pLFxuICAgICAgLyogQF9fUFVSRV9fICovIGpzeDgoXCJwXCIsIHsgY2xhc3NOYW1lOiBcIm5vdGlvbi1saW5rLW1lbnRpb24tcHJldmlldy1kZXNjcmlwdGlvblwiLCBjaGlsZHJlbjogbWV0YWRhdGEuZGVzY3JpcHRpb24gfSksXG4gICAgICAvKiBAX19QVVJFX18gKi8ganN4czYoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLWxpbmstbWVudGlvbi1wcmV2aWV3LWZvb3RlclwiLCBjaGlsZHJlbjogW1xuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4OChcbiAgICAgICAgICBcImltZ1wiLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tbGluay1tZW50aW9uLXByZXZpZXctaWNvblwiLFxuICAgICAgICAgICAgc3JjOiBtZXRhZGF0YS5pY29uX3VybCxcbiAgICAgICAgICAgIGFsdDogbWV0YWRhdGEubGlua19wcm92aWRlcixcbiAgICAgICAgICAgIHJlZmVycmVyUG9saWN5OiBcInNhbWUtb3JpZ2luXCJcbiAgICAgICAgICB9XG4gICAgICAgICksXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3g4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJub3Rpb24tbGluay1tZW50aW9uLXByZXZpZXctcHJvdmlkZXJcIiwgY2hpbGRyZW46IG1ldGFkYXRhLmxpbmtfcHJvdmlkZXIgfSlcbiAgICAgIF0gfSlcbiAgICBdIH0pXG4gIF0gfSkgfSk7XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL3BhZ2UtdGl0bGUudHN4XG5pbXBvcnQgXCJub3Rpb24tdHlwZXNcIjtcbmltcG9ydCB7IGdldEJsb2NrVGl0bGUgYXMgZ2V0QmxvY2tUaXRsZTIgfSBmcm9tIFwibm90aW9uLXV0aWxzXCI7XG5pbXBvcnQgUmVhY3Q3IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvY29tcG9uZW50cy9wYWdlLWljb24udHN4XG5pbXBvcnQgXCJub3Rpb24tdHlwZXNcIjtcbmltcG9ydCB7IGdldEJsb2NrSWNvbiwgZ2V0QmxvY2tUaXRsZSB9IGZyb20gXCJub3Rpb24tdXRpbHNcIjtcbmltcG9ydCBSZWFjdDYgZnJvbSBcInJlYWN0XCI7XG5cbi8vIHNyYy9pY29ucy9kZWZhdWx0LXBhZ2UtaWNvbi50c3hcbmltcG9ydCBcInJlYWN0XCI7XG5pbXBvcnQgeyBqc3ggYXMganN4OSB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuZnVuY3Rpb24gRGVmYXVsdFBhZ2VJY29uKHByb3BzKSB7XG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5yZXN0IH0gPSBwcm9wcztcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3g5KFwic3ZnXCIsIHsgY2xhc3NOYW1lLCAuLi5yZXN0LCB2aWV3Qm94OiBcIjAgMCAzMCAzMFwiLCB3aWR0aDogXCIxNlwiLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDkoXCJwYXRoXCIsIHsgZDogXCJNMTYsMUg0djI4aDIyVjExTDE2LDF6IE0xNiwzLjgyOEwyMy4xNzIsMTFIMTZWMy44Mjh6IE0yNCwyN0g2VjNoOHYxMGgxMFYyN3ogTTgsMTdoMTR2LTJIOFYxN3ogTTgsMjFoMTR2LTJIOFYyMXogTTgsMjVoMTR2LTJIOFYyNXpcIiB9KSB9KTtcbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvcGFnZS1pY29uLnRzeFxuaW1wb3J0IHsganN4IGFzIGpzeDEwIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgaXNJY29uQmxvY2sgPSAodmFsdWUpID0+IHtcbiAgcmV0dXJuIHZhbHVlLnR5cGUgPT09IFwicGFnZVwiIHx8IHZhbHVlLnR5cGUgPT09IFwiY2FsbG91dFwiIHx8IHZhbHVlLnR5cGUgPT09IFwiY29sbGVjdGlvbl92aWV3XCIgfHwgdmFsdWUudHlwZSA9PT0gXCJjb2xsZWN0aW9uX3ZpZXdfcGFnZVwiO1xufTtcbmZ1bmN0aW9uIFBhZ2VJY29uSW1wbCh7XG4gIGJsb2NrLFxuICBjbGFzc05hbWUsXG4gIGlubGluZSA9IHRydWUsXG4gIGhpZGVEZWZhdWx0SWNvbiA9IGZhbHNlLFxuICBkZWZhdWx0SWNvblxufSkge1xuICB2YXIgX2E7XG4gIGNvbnN0IHsgbWFwSW1hZ2VVcmwsIHJlY29yZE1hcCwgZGFya01vZGUgfSA9IHVzZU5vdGlvbkNvbnRleHQoKTtcbiAgbGV0IGlzSW1hZ2UgPSBmYWxzZTtcbiAgbGV0IGNvbnRlbnQgPSBudWxsO1xuICBpZiAoaXNJY29uQmxvY2soYmxvY2spKSB7XG4gICAgY29uc3QgaWNvbiA9ICgoX2EgPSBnZXRCbG9ja0ljb24oYmxvY2ssIHJlY29yZE1hcCkpID09IG51bGwgPyB2b2lkIDAgOiBfYS50cmltKCkpIHx8IGRlZmF1bHRJY29uO1xuICAgIGNvbnN0IHRpdGxlID0gZ2V0QmxvY2tUaXRsZShibG9jaywgcmVjb3JkTWFwKTtcbiAgICBpZiAoaWNvbiAmJiBpc1VybChpY29uKSkge1xuICAgICAgY29uc3QgdXJsID0gbWFwSW1hZ2VVcmwoaWNvbiwgYmxvY2spO1xuICAgICAgaXNJbWFnZSA9IHRydWU7XG4gICAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIGpzeDEwKFxuICAgICAgICBMYXp5SW1hZ2UsXG4gICAgICAgIHtcbiAgICAgICAgICBzcmM6IHVybCxcbiAgICAgICAgICBhbHQ6IHRpdGxlIHx8IFwicGFnZSBpY29uXCIsXG4gICAgICAgICAgY2xhc3NOYW1lOiBjcyhjbGFzc05hbWUsIFwibm90aW9uLXBhZ2UtaWNvblwiKVxuICAgICAgICB9XG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAoaWNvbiAmJiBpY29uLnN0YXJ0c1dpdGgoXCIvaWNvbnMvXCIpKSB7XG4gICAgICBjb25zdCB1cmwgPSBcImh0dHBzOi8vd3d3Lm5vdGlvbi5zb1wiICsgaWNvbiArIFwiP21vZGU9XCIgKyAoZGFya01vZGUgPyBcImRhcmtcIiA6IFwibGlnaHRcIik7XG4gICAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIGpzeDEwKFxuICAgICAgICBMYXp5SW1hZ2UsXG4gICAgICAgIHtcbiAgICAgICAgICBzcmM6IHVybCxcbiAgICAgICAgICBhbHQ6IHRpdGxlIHx8IFwicGFnZSBpY29uXCIsXG4gICAgICAgICAgY2xhc3NOYW1lOiBjcyhjbGFzc05hbWUsIFwibm90aW9uLXBhZ2UtaWNvblwiKVxuICAgICAgICB9XG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAoIWljb24pIHtcbiAgICAgIGlmICghaGlkZURlZmF1bHRJY29uKSB7XG4gICAgICAgIGlzSW1hZ2UgPSB0cnVlO1xuICAgICAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIGpzeDEwKFxuICAgICAgICAgIERlZmF1bHRQYWdlSWNvbixcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjbGFzc05hbWU6IGNzKGNsYXNzTmFtZSwgXCJub3Rpb24tcGFnZS1pY29uXCIpLFxuICAgICAgICAgICAgYWx0OiB0aXRsZSB8fCBcInBhZ2UgaWNvblwiXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpc0ltYWdlID0gZmFsc2U7XG4gICAgICBjb250ZW50ID0gLyogQF9fUFVSRV9fICovIGpzeDEwKFxuICAgICAgICBcInNwYW5cIixcbiAgICAgICAge1xuICAgICAgICAgIGNsYXNzTmFtZTogY3MoY2xhc3NOYW1lLCBcIm5vdGlvbi1wYWdlLWljb25cIiksXG4gICAgICAgICAgcm9sZTogXCJpbWdcIixcbiAgICAgICAgICBcImFyaWEtbGFiZWxcIjogaWNvbixcbiAgICAgICAgICBjaGlsZHJlbjogaWNvblxuICAgICAgICB9XG4gICAgICApO1xuICAgIH1cbiAgfVxuICBpZiAoIWNvbnRlbnQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDEwKFxuICAgIFwiZGl2XCIsXG4gICAge1xuICAgICAgY2xhc3NOYW1lOiBjcyhcbiAgICAgICAgaW5saW5lID8gXCJub3Rpb24tcGFnZS1pY29uLWlubGluZVwiIDogXCJub3Rpb24tcGFnZS1pY29uLWhlcm9cIixcbiAgICAgICAgaXNJbWFnZSA/IFwibm90aW9uLXBhZ2UtaWNvbi1pbWFnZVwiIDogXCJub3Rpb24tcGFnZS1pY29uLXNwYW5cIlxuICAgICAgKSxcbiAgICAgIGNoaWxkcmVuOiBjb250ZW50XG4gICAgfVxuICApO1xufVxudmFyIFBhZ2VJY29uID0gUmVhY3Q2Lm1lbW8oUGFnZUljb25JbXBsKTtcblxuLy8gc3JjL2NvbXBvbmVudHMvcGFnZS10aXRsZS50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3gxMSwganN4cyBhcyBqc3hzNyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuZnVuY3Rpb24gUGFnZVRpdGxlSW1wbCh7XG4gIGJsb2NrLFxuICBjbGFzc05hbWUsXG4gIGRlZmF1bHRJY29uLFxuICAuLi5yZXN0XG59KSB7XG4gIHZhciBfYSwgX2I7XG4gIGNvbnN0IHsgcmVjb3JkTWFwIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGlmICghYmxvY2spIHJldHVybiBudWxsO1xuICBpZiAoYmxvY2sudHlwZSA9PT0gXCJjb2xsZWN0aW9uX3ZpZXdfcGFnZVwiIHx8IGJsb2NrLnR5cGUgPT09IFwiY29sbGVjdGlvbl92aWV3XCIpIHtcbiAgICBjb25zdCB0aXRsZSA9IGdldEJsb2NrVGl0bGUyKGJsb2NrLCByZWNvcmRNYXApO1xuICAgIGlmICghdGl0bGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB0aXRsZURlY29yYXRpb24gPSBbW3RpdGxlXV07XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzNyhcInNwYW5cIiwgeyBjbGFzc05hbWU6IGNzKFwibm90aW9uLXBhZ2UtdGl0bGVcIiwgY2xhc3NOYW1lKSwgLi4ucmVzdCwgY2hpbGRyZW46IFtcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gxMShcbiAgICAgICAgUGFnZUljb24sXG4gICAgICAgIHtcbiAgICAgICAgICBibG9jayxcbiAgICAgICAgICBkZWZhdWx0SWNvbixcbiAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLXBhZ2UtdGl0bGUtaWNvblwiXG4gICAgICAgIH1cbiAgICAgICksXG4gICAgICAvKiBAX19QVVJFX18gKi8ganN4MTEoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcIm5vdGlvbi1wYWdlLXRpdGxlLXRleHRcIiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxMShUZXh0LCB7IHZhbHVlOiB0aXRsZURlY29yYXRpb24sIGJsb2NrIH0pIH0pXG4gICAgXSB9KTtcbiAgfVxuICBpZiAoISgoX2EgPSBibG9jay5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX2EudGl0bGUpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzNyhcInNwYW5cIiwgeyBjbGFzc05hbWU6IGNzKFwibm90aW9uLXBhZ2UtdGl0bGVcIiwgY2xhc3NOYW1lKSwgLi4ucmVzdCwgY2hpbGRyZW46IFtcbiAgICAvKiBAX19QVVJFX18gKi8ganN4MTEoXG4gICAgICBQYWdlSWNvbixcbiAgICAgIHtcbiAgICAgICAgYmxvY2ssXG4gICAgICAgIGRlZmF1bHRJY29uLFxuICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLXBhZ2UtdGl0bGUtaWNvblwiXG4gICAgICB9XG4gICAgKSxcbiAgICAvKiBAX19QVVJFX18gKi8ganN4MTEoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcIm5vdGlvbi1wYWdlLXRpdGxlLXRleHRcIiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxMShUZXh0LCB7IHZhbHVlOiAoX2IgPSBibG9jay5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX2IudGl0bGUsIGJsb2NrIH0pIH0pXG4gIF0gfSk7XG59XG52YXIgUGFnZVRpdGxlID0gUmVhY3Q3Lm1lbW8oUGFnZVRpdGxlSW1wbCk7XG5cbi8vIHNyYy9jb21wb25lbnRzL3RleHQudHN4XG5pbXBvcnQgeyBGcmFnbWVudCBhcyBGcmFnbWVudDMsIGpzeCBhcyBqc3gxMiB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuZnVuY3Rpb24gVGV4dCh7XG4gIHZhbHVlLFxuICBibG9jayxcbiAgbGlua1Byb3BzLFxuICBsaW5rUHJvdG9jb2xcbn0pIHtcbiAgY29uc3QgeyBjb21wb25lbnRzLCByZWNvcmRNYXAsIG1hcFBhZ2VVcmwsIG1hcEltYWdlVXJsLCByb290RG9tYWluIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTIoUmVhY3Q4LkZyYWdtZW50LCB7IGNoaWxkcmVuOiB2YWx1ZSA9PSBudWxsID8gdm9pZCAwIDogdmFsdWUubWFwKChbdGV4dCwgZGVjb3JhdGlvbnNdLCBpbmRleCkgPT4ge1xuICAgIGlmICghZGVjb3JhdGlvbnMpIHtcbiAgICAgIGlmICh0ZXh0ID09PSBcIixcIikge1xuICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDEyKFwic3BhblwiLCB7IHN0eWxlOiB7IHBhZGRpbmc6IFwiMC41ZW1cIiB9IH0sIGluZGV4KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTIoUmVhY3Q4LkZyYWdtZW50LCB7IGNoaWxkcmVuOiB0ZXh0IH0sIGluZGV4KTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgZm9ybWF0dGVkID0gZGVjb3JhdGlvbnMucmVkdWNlKFxuICAgICAgKGVsZW1lbnQsIGRlY29yYXRvcikgPT4ge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lO1xuICAgICAgICBzd2l0Y2ggKGRlY29yYXRvclswXSkge1xuICAgICAgICAgIGNhc2UgXCJwXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IGJsb2NrSWQgPSBkZWNvcmF0b3JbMV07XG4gICAgICAgICAgICBjb25zdCBsaW5rZWRCbG9jayA9IChfYSA9IHJlY29yZE1hcC5ibG9ja1tibG9ja0lkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnZhbHVlO1xuICAgICAgICAgICAgaWYgKCFsaW5rZWRCbG9jaykge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXCJwXCIgbWlzc2luZyBibG9jaycsIGJsb2NrSWQpO1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTIoXG4gICAgICAgICAgICAgIGNvbXBvbmVudHMuUGFnZUxpbmssXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLWxpbmtcIixcbiAgICAgICAgICAgICAgICBocmVmOiBtYXBQYWdlVXJsKGJsb2NrSWQpLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MTIoUGFnZVRpdGxlLCB7IGJsb2NrOiBsaW5rZWRCbG9jayB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwiXFx1MjAyM1wiOiB7XG4gICAgICAgICAgICBjb25zdCBsaW5rVHlwZSA9IGRlY29yYXRvclsxXVswXTtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gZGVjb3JhdG9yWzFdWzFdO1xuICAgICAgICAgICAgc3dpdGNoIChsaW5rVHlwZSkge1xuICAgICAgICAgICAgICBjYXNlIFwidVwiOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlciA9IChfYiA9IHJlY29yZE1hcC5ub3Rpb25fdXNlcltpZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYi52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcIlxcdTIwMjNcIiBtaXNzaW5nIHVzZXInLCBpZCk7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgc3JjID0gbWFwSW1hZ2VVcmwodXNlci5wcm9maWxlX3Bob3RvLCBibG9jayk7XG4gICAgICAgICAgICAgICAgaWYgKCFzcmMpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBbdXNlci5naXZlbl9uYW1lLCB1c2VyLmZhbWlseV9uYW1lXS5maWx0ZXIoQm9vbGVhbikuam9pbihcIiBcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxMihcbiAgICAgICAgICAgICAgICAgIEdyYWNlZnVsSW1hZ2UsXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tdXNlclwiLFxuICAgICAgICAgICAgICAgICAgICBzcmMsXG4gICAgICAgICAgICAgICAgICAgIGFsdDogbmFtZVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtlZEJsb2NrID0gKF9jID0gcmVjb3JkTWFwLmJsb2NrW2lkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICghbGlua2VkQmxvY2spIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcIlxcdTIwMjNcIiBtaXNzaW5nIGJsb2NrJywgbGlua1R5cGUsIGlkKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDEyKFxuICAgICAgICAgICAgICAgICAgY29tcG9uZW50cy5QYWdlTGluayxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1saW5rXCIsXG4gICAgICAgICAgICAgICAgICAgIGhyZWY6IG1hcFBhZ2VVcmwoaWQpLFxuICAgICAgICAgICAgICAgICAgICAuLi5saW5rUHJvcHMsXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCJfYmxhbmtcIixcbiAgICAgICAgICAgICAgICAgICAgcmVsOiBcIm5vb3BlbmVyIG5vcmVmZXJyZXJcIixcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxMihQYWdlVGl0bGUsIHsgYmxvY2s6IGxpbmtlZEJsb2NrIH0pXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwiaFwiOlxuICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxMihcInNwYW5cIiwgeyBjbGFzc05hbWU6IGBub3Rpb24tJHtkZWNvcmF0b3JbMV19YCwgY2hpbGRyZW46IGVsZW1lbnQgfSk7XG4gICAgICAgICAgY2FzZSBcImNcIjpcbiAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTIoXCJjb2RlXCIsIHsgY2xhc3NOYW1lOiBcIm5vdGlvbi1pbmxpbmUtY29kZVwiLCBjaGlsZHJlbjogZWxlbWVudCB9KTtcbiAgICAgICAgICBjYXNlIFwiYlwiOlxuICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxMihcImJcIiwgeyBjaGlsZHJlbjogZWxlbWVudCB9KTtcbiAgICAgICAgICBjYXNlIFwiaVwiOlxuICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxMihcImVtXCIsIHsgY2hpbGRyZW46IGVsZW1lbnQgfSk7XG4gICAgICAgICAgY2FzZSBcInNcIjpcbiAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTIoXCJzXCIsIHsgY2hpbGRyZW46IGVsZW1lbnQgfSk7XG4gICAgICAgICAgY2FzZSBcIl9cIjpcbiAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTIoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcIm5vdGlvbi1pbmxpbmUtdW5kZXJzY29yZVwiLCBjaGlsZHJlbjogZWxlbWVudCB9KTtcbiAgICAgICAgICBjYXNlIFwiZVwiOlxuICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxMihjb21wb25lbnRzLkVxdWF0aW9uLCB7IG1hdGg6IGRlY29yYXRvclsxXSwgaW5saW5lOiB0cnVlIH0pO1xuICAgICAgICAgIGNhc2UgXCJtXCI6XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgICAgICAvL3N0aWxsIG5lZWQgdG8gcmV0dXJuIHRoZSBiYXNlIGVsZW1lbnRcbiAgICAgICAgICBjYXNlIFwiYVwiOiB7XG4gICAgICAgICAgICBjb25zdCB2ID0gZGVjb3JhdG9yWzFdO1xuICAgICAgICAgICAgY29uc3QgcGF0aG5hbWUgPSB2LnNsaWNlKDEpO1xuICAgICAgICAgICAgY29uc3QgaWQgPSBwYXJzZVBhZ2VJZChwYXRobmFtZSwgeyB1dWlkOiB0cnVlIH0pO1xuICAgICAgICAgICAgaWYgKHJvb3REb21haW4gJiYgdi5pbmNsdWRlcyhyb290RG9tYWluKSB8fCBpZCAmJiB2WzBdID09PSBcIi9cIikge1xuICAgICAgICAgICAgICBjb25zdCBocmVmID0gcm9vdERvbWFpbiAmJiB2LmluY2x1ZGVzKHJvb3REb21haW4pID8gdiA6IGAke21hcFBhZ2VVcmwoaWQpfSR7Z2V0SGFzaEZyYWdtZW50VmFsdWUodil9YDtcbiAgICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxMihcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzLlBhZ2VMaW5rLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tbGlua1wiLFxuICAgICAgICAgICAgICAgICAgaHJlZixcbiAgICAgICAgICAgICAgICAgIC4uLmxpbmtQcm9wcyxcbiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBlbGVtZW50XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxMihcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzLkxpbmssXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1saW5rXCIsXG4gICAgICAgICAgICAgICAgICBocmVmOiBsaW5rUHJvdG9jb2wgPyBgJHtsaW5rUHJvdG9jb2x9OiR7ZGVjb3JhdG9yWzFdfWAgOiBkZWNvcmF0b3JbMV0sXG4gICAgICAgICAgICAgICAgICAuLi5saW5rUHJvcHMsXG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogZWxlbWVudFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcImRcIjoge1xuICAgICAgICAgICAgY29uc3QgdiA9IGRlY29yYXRvclsxXTtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSB2ID09IG51bGwgPyB2b2lkIDAgOiB2LnR5cGU7XG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gXCJkYXRlXCIpIHtcbiAgICAgICAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gdi5zdGFydF9kYXRlO1xuICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0RGF0ZShzdGFydERhdGUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBcImRhdGV0aW1lXCIpIHtcbiAgICAgICAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gdi5zdGFydF9kYXRlO1xuICAgICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSB2LnN0YXJ0X3RpbWU7XG4gICAgICAgICAgICAgIHJldHVybiBgJHtmb3JtYXREYXRlKHN0YXJ0RGF0ZSl9ICR7c3RhcnRUaW1lfWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwiZGF0ZXJhbmdlXCIpIHtcbiAgICAgICAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gdi5zdGFydF9kYXRlO1xuICAgICAgICAgICAgICBjb25zdCBlbmREYXRlID0gdi5lbmRfZGF0ZTtcbiAgICAgICAgICAgICAgcmV0dXJuIGAke2Zvcm1hdERhdGUoc3RhcnREYXRlKX0gXFx1MjE5MiAke2Zvcm1hdERhdGUoZW5kRGF0ZSl9YDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwidVwiOiB7XG4gICAgICAgICAgICBjb25zdCB1c2VySWQgPSBkZWNvcmF0b3JbMV07XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gKF9kID0gcmVjb3JkTWFwLm5vdGlvbl91c2VyW3VzZXJJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfZC52YWx1ZTtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm1pc3NpbmcgdXNlclwiLCB1c2VySWQpO1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNyYyA9IG1hcEltYWdlVXJsKHVzZXIucHJvZmlsZV9waG90bywgYmxvY2spO1xuICAgICAgICAgICAgaWYgKCFzcmMpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IFt1c2VyLmdpdmVuX25hbWUsIHVzZXIuZmFtaWx5X25hbWVdLmZpbHRlcihCb29sZWFuKS5qb2luKFwiIFwiKTtcbiAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTIoR3JhY2VmdWxJbWFnZSwgeyBjbGFzc05hbWU6IFwibm90aW9uLXVzZXJcIiwgc3JjLCBhbHQ6IG5hbWUgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJsbVwiOiB7XG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGRlY29yYXRvclsxXTtcbiAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTIoTGlua01lbnRpb24sIHsgbWV0YWRhdGEgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJlb2lcIjoge1xuICAgICAgICAgICAgY29uc3QgYmxvY2tJZCA9IGRlY29yYXRvclsxXTtcbiAgICAgICAgICAgIGNvbnN0IGV4dGVybmFsT2JqZWN0SW5zdGFuY2UgPSAoX2UgPSByZWNvcmRNYXAuYmxvY2tbYmxvY2tJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfZS52YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTIoRU9JLCB7IGJsb2NrOiBleHRlcm5hbE9iamVjdEluc3RhbmNlLCBpbmxpbmU6IHRydWUgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJzaVwiOlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGlmICh0cnVlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidW5zdXBwb3J0ZWQgdGV4dCBmb3JtYXRcIiwgZGVjb3JhdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLyogQF9fUFVSRV9fICovIGpzeDEyKEZyYWdtZW50MywgeyBjaGlsZHJlbjogdGV4dCB9KVxuICAgICk7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxMihSZWFjdDguRnJhZ21lbnQsIHsgY2hpbGRyZW46IGZvcm1hdHRlZCB9LCBpbmRleCk7XG4gIH0pIH0pO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9hc3NldC13cmFwcGVyLnRzeFxuaW1wb3J0IHsganN4IGFzIGpzeDEzIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgdXJsU3R5bGUgPSB7IHdpZHRoOiBcIjEwMCVcIiB9O1xuZnVuY3Rpb24gQXNzZXRXcmFwcGVyKHtcbiAgYmxvY2tJZCxcbiAgYmxvY2tcbn0pIHtcbiAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaDtcbiAgY29uc3QgdmFsdWUgPSBibG9jaztcbiAgY29uc3QgeyBjb21wb25lbnRzLCBtYXBQYWdlVXJsLCByb290RG9tYWluLCB6b29tIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGxldCBpc1VSTCA9IGZhbHNlO1xuICBpZiAoYmxvY2sudHlwZSA9PT0gXCJpbWFnZVwiKSB7XG4gICAgY29uc3QgY2FwdGlvbiA9IChfYyA9IChfYiA9IChfYSA9IHZhbHVlID09IG51bGwgPyB2b2lkIDAgOiB2YWx1ZS5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FwdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9iWzBdKSA9PSBudWxsID8gdm9pZCAwIDogX2NbMF07XG4gICAgaWYgKGNhcHRpb24pIHtcbiAgICAgIGNvbnN0IGlkID0gcGFyc2VQYWdlSWQyKGNhcHRpb24sIHsgdXVpZDogdHJ1ZSB9KTtcbiAgICAgIGNvbnN0IGlzUGFnZSA9IGNhcHRpb24uY2hhckF0KDApID09PSBcIi9cIiAmJiBpZDtcbiAgICAgIGlmIChpc1BhZ2UgfHwgaXNWYWxpZFVSTChjYXB0aW9uKSkge1xuICAgICAgICBpc1VSTCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGNvbnN0IGZpZ3VyZSA9IC8qIEBfX1BVUkVfXyAqLyBqc3gxMyhcbiAgICBcImZpZ3VyZVwiLFxuICAgIHtcbiAgICAgIGNsYXNzTmFtZTogY3MoXG4gICAgICAgIFwibm90aW9uLWFzc2V0LXdyYXBwZXJcIixcbiAgICAgICAgYG5vdGlvbi1hc3NldC13cmFwcGVyLSR7YmxvY2sudHlwZX1gLFxuICAgICAgICAoKF9kID0gdmFsdWUuZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX2QuYmxvY2tfZnVsbF93aWR0aCkgJiYgXCJub3Rpb24tYXNzZXQtd3JhcHBlci1mdWxsXCIsXG4gICAgICAgIGJsb2NrSWRcbiAgICAgICksXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDEzKEFzc2V0LCB7IGJsb2NrOiB2YWx1ZSwgem9vbWFibGU6IHpvb20gJiYgIWlzVVJMLCBjaGlsZHJlbjogKChfZSA9IHZhbHVlID09IG51bGwgPyB2b2lkIDAgOiB2YWx1ZS5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX2UuY2FwdGlvbikgJiYgIWlzVVJMICYmIC8qIEBfX1BVUkVfXyAqLyBqc3gxMyhcImZpZ2NhcHRpb25cIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLWFzc2V0LWNhcHRpb25cIiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxMyhUZXh0LCB7IHZhbHVlOiB2YWx1ZS5wcm9wZXJ0aWVzLmNhcHRpb24sIGJsb2NrIH0pIH0pIH0pXG4gICAgfVxuICApO1xuICBpZiAoaXNVUkwpIHtcbiAgICBjb25zdCBjYXB0aW9uID0gKF9oID0gKF9nID0gKF9mID0gdmFsdWUgPT0gbnVsbCA/IHZvaWQgMCA6IHZhbHVlLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfZi5jYXB0aW9uKSA9PSBudWxsID8gdm9pZCAwIDogX2dbMF0pID09IG51bGwgPyB2b2lkIDAgOiBfaFswXTtcbiAgICBjb25zdCBpZCA9IHBhcnNlUGFnZUlkMihjYXB0aW9uLCB7IHV1aWQ6IHRydWUgfSk7XG4gICAgY29uc3QgaXNQYWdlID0gKGNhcHRpb24gPT0gbnVsbCA/IHZvaWQgMCA6IGNhcHRpb24uY2hhckF0KDApKSA9PT0gXCIvXCIgJiYgaWQ7XG4gICAgY29uc3QgY2FwdGlvbkhvc3RuYW1lID0gZXh0cmFjdEhvc3RuYW1lKGNhcHRpb24pO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTMoXG4gICAgICBjb21wb25lbnRzLlBhZ2VMaW5rLFxuICAgICAge1xuICAgICAgICBzdHlsZTogdXJsU3R5bGUsXG4gICAgICAgIGhyZWY6IGlzUGFnZSA/IG1hcFBhZ2VVcmwoaWQpIDogY2FwdGlvbixcbiAgICAgICAgdGFyZ2V0OiBjYXB0aW9uSG9zdG5hbWUgJiYgY2FwdGlvbkhvc3RuYW1lICE9PSByb290RG9tYWluICYmICEoY2FwdGlvbiA9PSBudWxsID8gdm9pZCAwIDogY2FwdGlvbi5zdGFydHNXaXRoKFwiL1wiKSkgPyBcImJsYW5rX1wiIDogbnVsbCxcbiAgICAgICAgY2hpbGRyZW46IGZpZ3VyZVxuICAgICAgfVxuICAgICk7XG4gIH1cbiAgcmV0dXJuIGZpZ3VyZTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRVUkwoc3RyKSB7XG4gIGNvbnN0IHBhdHRlcm4gPSBuZXcgUmVnRXhwKFxuICAgIFwiXihodHRwcz86XFxcXC9cXFxcLyk/KCgoW2EtelxcXFxkXShbYS16XFxcXGQtXSpbYS16XFxcXGRdKSopXFxcXC4pK1thLXpdezIsfXwoKFxcXFxkezEsM31cXFxcLil7M31cXFxcZHsxLDN9KSkoXFxcXDpcXFxcZCspPyhcXFxcL1stYS16XFxcXGQlXy5+K10qKSooXFxcXD9bOyZhLXpcXFxcZCVfLn4rPS1dKik/KFxcXFwjWy1hLXpcXFxcZF9dKik/JFwiLFxuICAgIFwiaVwiXG4gICk7XG4gIHJldHVybiAhIXBhdHRlcm4udGVzdChzdHIpO1xufVxuZnVuY3Rpb24gZXh0cmFjdEhvc3RuYW1lKHVybCkge1xuICB0cnkge1xuICAgIGNvbnN0IGhvc3RuYW1lID0gbmV3IFVSTCh1cmwpLmhvc3RuYW1lO1xuICAgIHJldHVybiBob3N0bmFtZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBcIlwiO1xuICB9XG59XG5cbi8vIHNyYy9pY29ucy9jaGVjay50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3gxNCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuZnVuY3Rpb24gU3ZnQ2hlY2socHJvcHMpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxNChcInN2Z1wiLCB7IHZpZXdCb3g6IFwiMCAwIDE0IDE0XCIsIC4uLnByb3BzLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDE0KFwicGF0aFwiLCB7IGQ6IFwiTTUuNSAxMkwxNCAzLjUgMTIuNSAybC03IDctNC00LjAwM0wwIDYuNDk5elwiIH0pIH0pO1xufVxudmFyIGNoZWNrX2RlZmF1bHQgPSBTdmdDaGVjaztcblxuLy8gc3JjL2NvbXBvbmVudHMvY2hlY2tib3gudHN4XG5pbXBvcnQgeyBqc3ggYXMganN4MTUgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmZ1bmN0aW9uIENoZWNrYm94KHtcbiAgaXNDaGVja2VkXG59KSB7XG4gIGxldCBjb250ZW50ID0gbnVsbDtcbiAgaWYgKGlzQ2hlY2tlZCkge1xuICAgIGNvbnRlbnQgPSAvKiBAX19QVVJFX18gKi8ganN4MTUoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLXByb3BlcnR5LWNoZWNrYm94LWNoZWNrZWRcIiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxNShjaGVja19kZWZhdWx0LCB7fSkgfSk7XG4gIH0gZWxzZSB7XG4gICAgY29udGVudCA9IC8qIEBfX1BVUkVfXyAqLyBqc3gxNShcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJub3Rpb24tcHJvcGVydHktY2hlY2tib3gtdW5jaGVja2VkXCIgfSk7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxNShcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLXByb3BlcnR5IG5vdGlvbi1wcm9wZXJ0eS1jaGVja2JveFwiLCBjaGlsZHJlbjogY29udGVudCB9KTtcbn1cblxuLy8gc3JjL25leHQudHN4XG5pbXBvcnQgUmVhY3Q5IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IGlzRXF1YWwgZnJvbSBcInJlYWN0LWZhc3QtY29tcGFyZVwiO1xuaW1wb3J0IHsganN4IGFzIGpzeDE2IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgd3JhcE5leHRJbWFnZSA9IChOZXh0SW1hZ2UpID0+IHtcbiAgcmV0dXJuIFJlYWN0OS5tZW1vKGZ1bmN0aW9uIFJlYWN0Tm90aW9uWE5leHRJbWFnZSh7XG4gICAgc3JjLFxuICAgIGFsdCxcbiAgICB3aWR0aCxcbiAgICBoZWlnaHQsXG4gICAgY2xhc3NOYW1lLFxuICAgIGZpbGwsXG4gICAgLi4ucmVzdFxuICB9KSB7XG4gICAgaWYgKGZpbGwgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGZpbGwgPSAhKHdpZHRoICYmIGhlaWdodCk7XG4gICAgfVxuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTYoXG4gICAgICBOZXh0SW1hZ2UsXG4gICAgICB7XG4gICAgICAgIGNsYXNzTmFtZSxcbiAgICAgICAgc3JjLFxuICAgICAgICBhbHQsXG4gICAgICAgIHdpZHRoOiAhZmlsbCAmJiB3aWR0aCAmJiBoZWlnaHQgPyB3aWR0aCA6IHZvaWQgMCxcbiAgICAgICAgaGVpZ2h0OiAhZmlsbCAmJiB3aWR0aCAmJiBoZWlnaHQgPyBoZWlnaHQgOiB2b2lkIDAsXG4gICAgICAgIGZpbGwsXG4gICAgICAgIC4uLnJlc3RcbiAgICAgIH1cbiAgICApO1xuICB9LCBpc0VxdWFsKTtcbn07XG52YXIgd3JhcE5leHRMZWdhY3lJbWFnZSA9IChOZXh0TGVnYWN5SW1hZ2UpID0+IHtcbiAgcmV0dXJuIFJlYWN0OS5tZW1vKGZ1bmN0aW9uIFJlYWN0Tm90aW9uWE5leHRMZWdhY3lJbWFnZSh7XG4gICAgc3JjLFxuICAgIGFsdCxcbiAgICB3aWR0aCxcbiAgICBoZWlnaHQsXG4gICAgY2xhc3NOYW1lLFxuICAgIHN0eWxlLFxuICAgIGxheW91dCxcbiAgICAuLi5yZXN0XG4gIH0pIHtcbiAgICBpZiAoIWxheW91dCkge1xuICAgICAgbGF5b3V0ID0gd2lkdGggJiYgaGVpZ2h0ID8gXCJpbnRyaW5zaWNcIiA6IFwiZmlsbFwiO1xuICAgIH1cbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDE2KFxuICAgICAgTmV4dExlZ2FjeUltYWdlLFxuICAgICAge1xuICAgICAgICBjbGFzc05hbWUsXG4gICAgICAgIHNyYyxcbiAgICAgICAgYWx0LFxuICAgICAgICB3aWR0aDogbGF5b3V0ID09PSBcImludHJpbnNpY1wiICYmIHdpZHRoLFxuICAgICAgICBoZWlnaHQ6IGxheW91dCA9PT0gXCJpbnRyaW5zaWNcIiAmJiBoZWlnaHQsXG4gICAgICAgIG9iamVjdEZpdDogc3R5bGUgPT0gbnVsbCA/IHZvaWQgMCA6IHN0eWxlLm9iamVjdEZpdCxcbiAgICAgICAgb2JqZWN0UG9zaXRpb246IHN0eWxlID09IG51bGwgPyB2b2lkIDAgOiBzdHlsZS5vYmplY3RQb3NpdGlvbixcbiAgICAgICAgbGF5b3V0LFxuICAgICAgICAuLi5yZXN0XG4gICAgICB9XG4gICAgKTtcbiAgfSwgaXNFcXVhbCk7XG59O1xuZnVuY3Rpb24gd3JhcE5leHRMaW5rKE5leHRMaW5rKSB7XG4gIHJldHVybiAoe1xuICAgIGhyZWYsXG4gICAgYXMsXG4gICAgcGFzc0hyZWYsXG4gICAgcHJlZmV0Y2gsXG4gICAgcmVwbGFjZSxcbiAgICBzY3JvbGwsXG4gICAgc2hhbGxvdyxcbiAgICBsb2NhbGUsXG4gICAgLi4ubGlua1Byb3BzXG4gIH0pID0+IHtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDE2KFxuICAgICAgTmV4dExpbmssXG4gICAgICB7XG4gICAgICAgIGhyZWYsXG4gICAgICAgIGFzLFxuICAgICAgICBwYXNzSHJlZixcbiAgICAgICAgcHJlZmV0Y2gsXG4gICAgICAgIHJlcGxhY2UsXG4gICAgICAgIHNjcm9sbCxcbiAgICAgICAgc2hhbGxvdyxcbiAgICAgICAgbG9jYWxlLFxuICAgICAgICBsZWdhY3lCZWhhdmlvcjogdHJ1ZSxcbiAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gxNihcImFcIiwgeyAuLi5saW5rUHJvcHMgfSlcbiAgICAgIH1cbiAgICApO1xuICB9O1xufVxuXG4vLyBzcmMvY29udGV4dC50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3gxNyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuZnVuY3Rpb24gRGVmYXVsdExpbmsocHJvcHMpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxNyhcImFcIiwgeyB0YXJnZXQ6IFwiX2JsYW5rXCIsIHJlbDogXCJub29wZW5lciBub3JlZmVycmVyXCIsIC4uLnByb3BzIH0pO1xufVxudmFyIERlZmF1bHRMaW5rTWVtbyA9IFJlYWN0MTAubWVtbyhEZWZhdWx0TGluayk7XG5mdW5jdGlvbiBEZWZhdWx0UGFnZUxpbmsocHJvcHMpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxNyhcImFcIiwgeyAuLi5wcm9wcyB9KTtcbn1cbnZhciBEZWZhdWx0UGFnZUxpbmtNZW1vID0gUmVhY3QxMC5tZW1vKERlZmF1bHRQYWdlTGluayk7XG5mdW5jdGlvbiBEZWZhdWx0RW1iZWQocHJvcHMpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gxNyhBc3NldFdyYXBwZXIsIHsgLi4ucHJvcHMgfSk7XG59XG52YXIgRGVmYXVsdEhlYWRlciA9IEhlYWRlcjtcbmZ1bmN0aW9uIGR1bW15TGluayh7IGhyZWYsIHJlbCwgdGFyZ2V0LCB0aXRsZSwgLi4ucmVzdCB9KSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MTcoXCJzcGFuXCIsIHsgLi4ucmVzdCB9KTtcbn1cbnZhciBkdW1teUNvbXBvbmVudCA9IChuYW1lKSA9PiAoKSA9PiB7XG4gIGNvbnNvbGUud2FybihcbiAgICBgV2FybmluZzogdXNpbmcgZW1wdHkgY29tcG9uZW50IFwiJHtuYW1lfVwiICh5b3Ugc2hvdWxkIG92ZXJyaWRlIHRoaXMgaW4gTm90aW9uUmVuZGVyZXIuY29tcG9uZW50cylgXG4gICk7XG4gIHJldHVybiBudWxsO1xufTtcbnZhciBkdW1teU92ZXJyaWRlRm4gPSAoXywgZGVmYXVsdFZhbHVlRm4pID0+IGRlZmF1bHRWYWx1ZUZuKCk7XG52YXIgZGVmYXVsdENvbXBvbmVudHMgPSB7XG4gIEltYWdlOiBudWxsLFxuICAvLyBkaXNhYmxlIGN1c3RvbSBpbWFnZXMgYnkgZGVmYXVsdFxuICBMaW5rOiBEZWZhdWx0TGlua01lbW8sXG4gIFBhZ2VMaW5rOiBEZWZhdWx0UGFnZUxpbmtNZW1vLFxuICBDaGVja2JveCxcbiAgQ2FsbG91dDogdm9pZCAwLFxuICAvLyB1c2UgdGhlIGJ1aWx0LWluIGNhbGxvdXQgcmVuZGVyaW5nIGJ5IGRlZmF1bHRcbiAgQ29kZTogZHVtbXlDb21wb25lbnQoXCJDb2RlXCIpLFxuICBFcXVhdGlvbjogZHVtbXlDb21wb25lbnQoXCJFcXVhdGlvblwiKSxcbiAgQ29sbGVjdGlvbjogZHVtbXlDb21wb25lbnQoXCJDb2xsZWN0aW9uXCIpLFxuICBQcm9wZXJ0eTogdm9pZCAwLFxuICAvLyB1c2UgdGhlIGJ1aWx0LWluIHByb3BlcnR5IHJlbmRlcmluZyBieSBkZWZhdWx0XG4gIHByb3BlcnR5VGV4dFZhbHVlOiBkdW1teU92ZXJyaWRlRm4sXG4gIHByb3BlcnR5U2VsZWN0VmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlSZWxhdGlvblZhbHVlOiBkdW1teU92ZXJyaWRlRm4sXG4gIHByb3BlcnR5Rm9ybXVsYVZhbHVlOiBkdW1teU92ZXJyaWRlRm4sXG4gIHByb3BlcnR5VGl0bGVWYWx1ZTogZHVtbXlPdmVycmlkZUZuLFxuICBwcm9wZXJ0eVBlcnNvblZhbHVlOiBkdW1teU92ZXJyaWRlRm4sXG4gIHByb3BlcnR5RmlsZVZhbHVlOiBkdW1teU92ZXJyaWRlRm4sXG4gIHByb3BlcnR5Q2hlY2tib3hWYWx1ZTogZHVtbXlPdmVycmlkZUZuLFxuICBwcm9wZXJ0eVVybFZhbHVlOiBkdW1teU92ZXJyaWRlRm4sXG4gIHByb3BlcnR5RW1haWxWYWx1ZTogZHVtbXlPdmVycmlkZUZuLFxuICBwcm9wZXJ0eVBob25lTnVtYmVyVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlOdW1iZXJWYWx1ZTogZHVtbXlPdmVycmlkZUZuLFxuICBwcm9wZXJ0eUxhc3RFZGl0ZWRUaW1lVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgcHJvcGVydHlDcmVhdGVkVGltZVZhbHVlOiBkdW1teU92ZXJyaWRlRm4sXG4gIHByb3BlcnR5RGF0ZVZhbHVlOiBkdW1teU92ZXJyaWRlRm4sXG4gIHByb3BlcnR5QXV0b0luY3JlbWVudElkVmFsdWU6IGR1bW15T3ZlcnJpZGVGbixcbiAgUGRmOiBkdW1teUNvbXBvbmVudChcIlBkZlwiKSxcbiAgVHdlZXQ6IGR1bW15Q29tcG9uZW50KFwiVHdlZXRcIiksXG4gIE1vZGFsOiBkdW1teUNvbXBvbmVudChcIk1vZGFsXCIpLFxuICBIZWFkZXI6IERlZmF1bHRIZWFkZXIsXG4gIEVtYmVkOiBEZWZhdWx0RW1iZWRcbn07XG52YXIgZGVmYXVsdE5vdGlvbkNvbnRleHQgPSB7XG4gIHJlY29yZE1hcDoge1xuICAgIGJsb2NrOiB7fSxcbiAgICBjb2xsZWN0aW9uOiB7fSxcbiAgICBjb2xsZWN0aW9uX3ZpZXc6IHt9LFxuICAgIGNvbGxlY3Rpb25fcXVlcnk6IHt9LFxuICAgIG5vdGlvbl91c2VyOiB7fSxcbiAgICBzaWduZWRfdXJsczoge31cbiAgfSxcbiAgY29tcG9uZW50czogZGVmYXVsdENvbXBvbmVudHMsXG4gIG1hcFBhZ2VVcmw6IGRlZmF1bHRNYXBQYWdlVXJsKCksXG4gIG1hcEltYWdlVXJsOiBkZWZhdWx0TWFwSW1hZ2VVcmwsXG4gIHNlYXJjaE5vdGlvbjogdm9pZCAwLFxuICBpc1Nob3dpbmdTZWFyY2g6IGZhbHNlLFxuICBvbkhpZGVTZWFyY2g6IHZvaWQgMCxcbiAgZnVsbFBhZ2U6IGZhbHNlLFxuICBkYXJrTW9kZTogZmFsc2UsXG4gIHByZXZpZXdJbWFnZXM6IGZhbHNlLFxuICBmb3JjZUN1c3RvbUltYWdlczogZmFsc2UsXG4gIHNob3dDb2xsZWN0aW9uVmlld0Ryb3Bkb3duOiB0cnVlLFxuICBsaW5rVGFibGVUaXRsZVByb3BlcnRpZXM6IHRydWUsXG4gIGlzTGlua0NvbGxlY3Rpb25Ub1VybFByb3BlcnR5OiBmYWxzZSxcbiAgc2hvd1RhYmxlT2ZDb250ZW50czogZmFsc2UsXG4gIG1pblRhYmxlT2ZDb250ZW50c0l0ZW1zOiAzLFxuICBkZWZhdWx0UGFnZUljb246IG51bGwsXG4gIGRlZmF1bHRQYWdlQ292ZXI6IG51bGwsXG4gIGRlZmF1bHRQYWdlQ292ZXJQb3NpdGlvbjogMC41LFxuICB6b29tOiBudWxsXG59O1xudmFyIGN0eCA9IFJlYWN0MTAuY3JlYXRlQ29udGV4dChkZWZhdWx0Tm90aW9uQ29udGV4dCk7XG5mdW5jdGlvbiBOb3Rpb25Db250ZXh0UHJvdmlkZXIoe1xuICBjb21wb25lbnRzOiB0aGVtZUNvbXBvbmVudHMgPSB7fSxcbiAgY2hpbGRyZW4sXG4gIG1hcFBhZ2VVcmwsXG4gIG1hcEltYWdlVXJsLFxuICByb290UGFnZUlkLFxuICAuLi5yZXN0XG59KSB7XG4gIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHJlc3QpKSB7XG4gICAgaWYgKHJlc3Rba2V5XSA9PT0gdm9pZCAwKSB7XG4gICAgICBkZWxldGUgcmVzdFtrZXldO1xuICAgIH1cbiAgfVxuICBjb25zdCB3cmFwcGVkVGhlbWVDb21wb25lbnRzID0gUmVhY3QxMC51c2VNZW1vKFxuICAgICgpID0+ICh7XG4gICAgICAuLi50aGVtZUNvbXBvbmVudHNcbiAgICB9KSxcbiAgICBbdGhlbWVDb21wb25lbnRzXVxuICApO1xuICBpZiAod3JhcHBlZFRoZW1lQ29tcG9uZW50cy5uZXh0SW1hZ2UgJiYgd3JhcHBlZFRoZW1lQ29tcG9uZW50cy5uZXh0TGVnYWN5SW1hZ2UpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIllvdSBzaG91bGQgbm90IHBhc3MgYm90aCBuZXh0SW1hZ2UgYW5kIG5leHRMZWdhY3lJbWFnZS4gT25seSBuZXh0SW1hZ2UgY29tcG9uZW50IHdpbGwgYmUgdXNlZC5cIlxuICAgICk7XG4gICAgd3JhcHBlZFRoZW1lQ29tcG9uZW50cy5JbWFnZSA9IHdyYXBOZXh0SW1hZ2UodGhlbWVDb21wb25lbnRzLm5leHRJbWFnZSk7XG4gIH0gZWxzZSBpZiAod3JhcHBlZFRoZW1lQ29tcG9uZW50cy5uZXh0SW1hZ2UpIHtcbiAgICB3cmFwcGVkVGhlbWVDb21wb25lbnRzLkltYWdlID0gd3JhcE5leHRJbWFnZSh0aGVtZUNvbXBvbmVudHMubmV4dEltYWdlKTtcbiAgfSBlbHNlIGlmICh3cmFwcGVkVGhlbWVDb21wb25lbnRzLm5leHRMZWdhY3lJbWFnZSkge1xuICAgIHdyYXBwZWRUaGVtZUNvbXBvbmVudHMuSW1hZ2UgPSB3cmFwTmV4dExlZ2FjeUltYWdlKFxuICAgICAgdGhlbWVDb21wb25lbnRzLm5leHRMZWdhY3lJbWFnZVxuICAgICk7XG4gIH1cbiAgaWYgKHdyYXBwZWRUaGVtZUNvbXBvbmVudHMubmV4dExpbmspIHtcbiAgICB3cmFwcGVkVGhlbWVDb21wb25lbnRzLm5leHRMaW5rID0gd3JhcE5leHRMaW5rKHRoZW1lQ29tcG9uZW50cy5uZXh0TGluayk7XG4gIH1cbiAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMod3JhcHBlZFRoZW1lQ29tcG9uZW50cykpIHtcbiAgICBpZiAoIXdyYXBwZWRUaGVtZUNvbXBvbmVudHNba2V5XSkge1xuICAgICAgZGVsZXRlIHdyYXBwZWRUaGVtZUNvbXBvbmVudHNba2V5XTtcbiAgICB9XG4gIH1cbiAgY29uc3QgdmFsdWUgPSBSZWFjdDEwLnVzZU1lbW8oXG4gICAgKCkgPT4gKHtcbiAgICAgIC4uLmRlZmF1bHROb3Rpb25Db250ZXh0LFxuICAgICAgLi4ucmVzdCxcbiAgICAgIHJvb3RQYWdlSWQsXG4gICAgICBtYXBQYWdlVXJsOiBtYXBQYWdlVXJsICE9IG51bGwgPyBtYXBQYWdlVXJsIDogZGVmYXVsdE1hcFBhZ2VVcmwocm9vdFBhZ2VJZCksXG4gICAgICBtYXBJbWFnZVVybDogbWFwSW1hZ2VVcmwgIT0gbnVsbCA/IG1hcEltYWdlVXJsIDogZGVmYXVsdE1hcEltYWdlVXJsLFxuICAgICAgY29tcG9uZW50czogeyAuLi5kZWZhdWx0Q29tcG9uZW50cywgLi4ud3JhcHBlZFRoZW1lQ29tcG9uZW50cyB9XG4gICAgfSksXG4gICAgW21hcEltYWdlVXJsLCBtYXBQYWdlVXJsLCB3cmFwcGVkVGhlbWVDb21wb25lbnRzLCByb290UGFnZUlkLCByZXN0XVxuICApO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDE3KGN0eC5Qcm92aWRlciwgeyB2YWx1ZSwgY2hpbGRyZW4gfSk7XG59XG52YXIgTm90aW9uQ29udGV4dENvbnN1bWVyID0gY3R4LkNvbnN1bWVyO1xudmFyIHVzZU5vdGlvbkNvbnRleHQgPSAoKSA9PiB7XG4gIHJldHVybiBSZWFjdDEwLnVzZUNvbnRleHQoY3R4KTtcbn07XG5cbi8vIHNyYy9pY29ucy9zZWFyY2gtaWNvbi50c3hcbmltcG9ydCBcInJlYWN0XCI7XG5pbXBvcnQgeyBqc3ggYXMganN4MTggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmZ1bmN0aW9uIFNlYXJjaEljb24ocHJvcHMpIHtcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLnJlc3QgfSA9IHByb3BzO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDE4KFwic3ZnXCIsIHsgY2xhc3NOYW1lOiBjcyhcIm5vdGlvbi1pY29uXCIsIGNsYXNzTmFtZSksIHZpZXdCb3g6IFwiMCAwIDE3IDE3XCIsIC4uLnJlc3QsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MTgoXCJwYXRoXCIsIHsgZDogXCJNNi43ODAyNyAxMy42NzI5QzguMjQ4MDUgMTMuNjcyOSA5LjYwMTU2IDEzLjE5ODIgMTAuNzA5IDEyLjQwNzJMMTQuODc1IDE2LjU3MzJDMTUuMDY4NCAxNi43NjY2IDE1LjMyMzIgMTYuODYzMyAxNS41OTU3IDE2Ljg2MzNDMTYuMTY3IDE2Ljg2MzMgMTYuNTcxMyAxNi40MjM4IDE2LjU3MTMgMTUuODYxM0MxNi41NzEzIDE1LjU5NzcgMTYuNDgzNCAxNS4zNTE2IDE2LjI5IDE1LjE1ODJMMTIuMTUwNCAxMS4wMDk4QzEzLjAyMDUgOS44NjcxOSAxMy41MzkxIDguNDUyMTUgMTMuNTM5MSA2LjkxNDA2QzEzLjUzOTEgMy4xOTYyOSAxMC40OTggMC4xNTUyNzMgNi43ODAyNyAwLjE1NTI3M0MzLjA2MjUgMC4xNTUyNzMgMC4wMjE0ODQ0IDMuMTk2MjkgMC4wMjE0ODQ0IDYuOTE0MDZDMC4wMjE0ODQ0IDEwLjYzMTggMy4wNjI1IDEzLjY3MjkgNi43ODAyNyAxMy42NzI5Wk02Ljc4MDI3IDEyLjIxMzlDMy44Nzk4OCAxMi4yMTM5IDEuNDgwNDcgOS44MTQ0NSAxLjQ4MDQ3IDYuOTE0MDZDMS40ODA0NyA0LjAxMzY3IDMuODc5ODggMS42MTQyNiA2Ljc4MDI3IDEuNjE0MjZDOS42ODA2NiAxLjYxNDI2IDEyLjA4MDEgNC4wMTM2NyAxMi4wODAxIDYuOTE0MDZDMTIuMDgwMSA5LjgxNDQ1IDkuNjgwNjYgMTIuMjEzOSA2Ljc4MDI3IDEyLjIxMzlaXCIgfSkgfSk7XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL3NlYXJjaC1kaWFsb2cudHN4XG52YXIgaW1wb3J0X2xvZGFzaCA9IF9fdG9FU00ocmVxdWlyZV9sb2Rhc2goKSwgMSk7XG5pbXBvcnQgeyBnZXRCbG9ja1BhcmVudFBhZ2UsIGdldEJsb2NrVGl0bGUgYXMgZ2V0QmxvY2tUaXRsZTMgfSBmcm9tIFwibm90aW9uLXV0aWxzXCI7XG5pbXBvcnQgUmVhY3QxNCBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL2ljb25zL2NsZWFyLWljb24udHN4XG5pbXBvcnQgXCJyZWFjdFwiO1xuaW1wb3J0IHsganN4IGFzIGpzeDE5IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5mdW5jdGlvbiBDbGVhckljb24ocHJvcHMpIHtcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLnJlc3QgfSA9IHByb3BzO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDE5KFwic3ZnXCIsIHsgY2xhc3NOYW1lOiBjcyhcIm5vdGlvbi1pY29uXCIsIGNsYXNzTmFtZSksIC4uLnJlc3QsIHZpZXdCb3g6IFwiMCAwIDMwIDMwXCIsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MTkoXCJwYXRoXCIsIHsgZDogXCJNMTUsMEM2LjcxNiwwLDAsNi43MTYsMCwxNXM2LjcxNiwxNSwxNSwxNXMxNS02LjcxNiwxNS0xNVMyMy4yODQsMCwxNSwweiBNMjIsMjAuNkwyMC42LDIyTDE1LDE2LjRMOS40LDIyTDgsMjAuNmw1LjYtNS42IEw4LDkuNEw5LjQsOGw1LjYsNS42TDIwLjYsOEwyMiw5LjRMMTYuNCwxNUwyMiwyMC42elwiIH0pIH0pO1xufVxuXG4vLyBzcmMvaWNvbnMvbG9hZGluZy1pY29uLnRzeFxuaW1wb3J0IFwicmVhY3RcIjtcbmltcG9ydCB7IGpzeCBhcyBqc3gyMCwganN4cyBhcyBqc3hzOCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuZnVuY3Rpb24gTG9hZGluZ0ljb24ocHJvcHMpIHtcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLnJlc3QgfSA9IHByb3BzO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeHM4KFwic3ZnXCIsIHsgY2xhc3NOYW1lOiBjcyhcIm5vdGlvbi1pY29uXCIsIGNsYXNzTmFtZSksIC4uLnJlc3QsIHZpZXdCb3g6IFwiMCAwIDI0IDI0XCIsIGNoaWxkcmVuOiBbXG4gICAgLyogQF9fUFVSRV9fICovIGpzeDIwKFwiZGVmc1wiLCB7IGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4czgoXG4gICAgICBcImxpbmVhckdyYWRpZW50XCIsXG4gICAgICB7XG4gICAgICAgIHgxOiBcIjI4LjE1NDI5NjklXCIsXG4gICAgICAgIHkxOiBcIjYzLjc0MDIzNDQlXCIsXG4gICAgICAgIHgyOiBcIjc0LjYyODkwNjIlXCIsXG4gICAgICAgIHkyOiBcIjE3Ljc4MzIwMzElXCIsXG4gICAgICAgIGlkOiBcImxpbmVhckdyYWRpZW50LTFcIixcbiAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MjAoXCJzdG9wXCIsIHsgc3RvcENvbG9yOiBcInJnYmEoMTY0LCAxNjQsIDE2NCwgMSlcIiwgb2Zmc2V0OiBcIjAlXCIgfSksXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDIwKFxuICAgICAgICAgICAgXCJzdG9wXCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHN0b3BDb2xvcjogXCJyZ2JhKDE2NCwgMTY0LCAxNjQsIDApXCIsXG4gICAgICAgICAgICAgIHN0b3BPcGFjaXR5OiBcIjBcIixcbiAgICAgICAgICAgICAgb2Zmc2V0OiBcIjEwMCVcIlxuICAgICAgICAgICAgfVxuICAgICAgICAgIClcbiAgICAgICAgXVxuICAgICAgfVxuICAgICkgfSksXG4gICAgLyogQF9fUFVSRV9fICovIGpzeDIwKFwiZ1wiLCB7IGlkOiBcIlBhZ2UtMVwiLCBzdHJva2U6IFwibm9uZVwiLCBzdHJva2VXaWR0aDogXCIxXCIsIGZpbGw6IFwibm9uZVwiLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDIwKFwiZ1wiLCB7IHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUoLTIzNi4wMDAwMDAsIC0yODYuMDAwMDAwKVwiLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeHM4KFwiZ1wiLCB7IHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUoMjM4LjAwMDAwMCwgMjg2LjAwMDAwMClcIiwgY2hpbGRyZW46IFtcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gyMChcbiAgICAgICAgXCJjaXJjbGVcIixcbiAgICAgICAge1xuICAgICAgICAgIGlkOiBcIk92YWwtMlwiLFxuICAgICAgICAgIHN0cm9rZTogXCJ1cmwoI2xpbmVhckdyYWRpZW50LTEpXCIsXG4gICAgICAgICAgc3Ryb2tlV2lkdGg6IFwiNFwiLFxuICAgICAgICAgIGN4OiBcIjEwXCIsXG4gICAgICAgICAgY3k6IFwiMTJcIixcbiAgICAgICAgICByOiBcIjEwXCJcbiAgICAgICAgfVxuICAgICAgKSxcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gyMChcbiAgICAgICAgXCJwYXRoXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBkOiBcIk0xMCwyIEM0LjQ3NzE1MjUsMiAwLDYuNDc3MTUyNSAwLDEyXCIsXG4gICAgICAgICAgaWQ6IFwiT3ZhbC0yXCIsXG4gICAgICAgICAgc3Ryb2tlOiBcInJnYmEoMTY0LCAxNjQsIDE2NCwgMSlcIixcbiAgICAgICAgICBzdHJva2VXaWR0aDogXCI0XCJcbiAgICAgICAgfVxuICAgICAgKSxcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gyMChcbiAgICAgICAgXCJyZWN0XCIsXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogXCJSZWN0YW5nbGUtMVwiLFxuICAgICAgICAgIGZpbGw6IFwicmdiYSgxNjQsIDE2NCwgMTY0LCAxKVwiLFxuICAgICAgICAgIHg6IFwiOFwiLFxuICAgICAgICAgIHk6IFwiMFwiLFxuICAgICAgICAgIHdpZHRoOiBcIjRcIixcbiAgICAgICAgICBoZWlnaHQ6IFwiNFwiLFxuICAgICAgICAgIHJ4OiBcIjhcIlxuICAgICAgICB9XG4gICAgICApXG4gICAgXSB9KSB9KSB9KVxuICBdIH0pO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9zZWFyY2gtZGlhbG9nLnRzeFxuaW1wb3J0IHsgRnJhZ21lbnQgYXMgRnJhZ21lbnQ0LCBqc3ggYXMganN4MjEsIGpzeHMgYXMganN4czkgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBTZWFyY2hEaWFsb2cgPSBjbGFzcyBleHRlbmRzIFJlYWN0MTQuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInN0YXRlXCIsIHtcbiAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICBxdWVyeTogXCJcIixcbiAgICAgIHNlYXJjaFJlc3VsdDogbnVsbCxcbiAgICAgIHNlYXJjaEVycm9yOiBudWxsXG4gICAgfSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIl9pbnB1dFJlZlwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiX3NlYXJjaFwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiX29uQWZ0ZXJPcGVuXCIsICgpID0+IHtcbiAgICAgIGlmICh0aGlzLl9pbnB1dFJlZi5jdXJyZW50KSB7XG4gICAgICAgIHRoaXMuX2lucHV0UmVmLmN1cnJlbnQuZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiX29uQ2hhbmdlUXVlcnlcIiwgKGUpID0+IHtcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gZS50YXJnZXQudmFsdWU7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgcXVlcnkgfSk7XG4gICAgICBpZiAoIXF1ZXJ5LnRyaW0oKSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNMb2FkaW5nOiBmYWxzZSwgc2VhcmNoUmVzdWx0OiBudWxsLCBzZWFyY2hFcnJvcjogbnVsbCB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fc2VhcmNoKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIl9vbkNsZWFyUXVlcnlcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5fb25DaGFuZ2VRdWVyeSh7IHRhcmdldDogeyB2YWx1ZTogXCJcIiB9IH0pO1xuICAgIH0pO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJfd2FybXVwU2VhcmNoXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgc2VhcmNoTm90aW9uLCByb290QmxvY2tJZCB9ID0gdGhpcy5wcm9wcztcbiAgICAgIGF3YWl0IHNlYXJjaE5vdGlvbih7XG4gICAgICAgIHF1ZXJ5OiBcIlwiLFxuICAgICAgICBhbmNlc3RvcklkOiByb290QmxvY2tJZFxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIl9zZWFyY2hJbXBsXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgc2VhcmNoTm90aW9uLCByb290QmxvY2tJZCB9ID0gdGhpcy5wcm9wcztcbiAgICAgIGNvbnN0IHsgcXVlcnkgfSA9IHRoaXMuc3RhdGU7XG4gICAgICBpZiAoIXF1ZXJ5LnRyaW0oKSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNMb2FkaW5nOiBmYWxzZSwgc2VhcmNoUmVzdWx0OiBudWxsLCBzZWFyY2hFcnJvcjogbnVsbCB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzTG9hZGluZzogdHJ1ZSB9KTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlYXJjaE5vdGlvbih7XG4gICAgICAgIHF1ZXJ5LFxuICAgICAgICBhbmNlc3RvcklkOiByb290QmxvY2tJZFxuICAgICAgfSk7XG4gICAgICBjb25zb2xlLmxvZyhcInNlYXJjaFwiLCBxdWVyeSwgcmVzdWx0KTtcbiAgICAgIGxldCBzZWFyY2hSZXN1bHQgPSBudWxsO1xuICAgICAgbGV0IHNlYXJjaEVycm9yID0gbnVsbDtcbiAgICAgIGlmIChyZXN1bHQuZXJyb3IgfHwgcmVzdWx0LmVycm9ySWQpIHtcbiAgICAgICAgc2VhcmNoRXJyb3IgPSByZXN1bHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWFyY2hSZXN1bHQgPSB7IC4uLnJlc3VsdCB9O1xuICAgICAgICBjb25zdCByZXN1bHRzID0gc2VhcmNoUmVzdWx0LnJlc3VsdHMubWFwKChyZXN1bHQyKSA9PiB7XG4gICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICBjb25zdCBibG9jayA9IChfYSA9IHNlYXJjaFJlc3VsdC5yZWNvcmRNYXAuYmxvY2tbcmVzdWx0Mi5pZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYS52YWx1ZTtcbiAgICAgICAgICBpZiAoIWJsb2NrKSByZXR1cm47XG4gICAgICAgICAgY29uc3QgdGl0bGUgPSBnZXRCbG9ja1RpdGxlMyhibG9jaywgc2VhcmNoUmVzdWx0LnJlY29yZE1hcCk7XG4gICAgICAgICAgaWYgKCF0aXRsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXN1bHQyLnRpdGxlID0gdGl0bGU7XG4gICAgICAgICAgcmVzdWx0Mi5ibG9jayA9IGJsb2NrO1xuICAgICAgICAgIHJlc3VsdDIucmVjb3JkTWFwID0gc2VhcmNoUmVzdWx0LnJlY29yZE1hcDtcbiAgICAgICAgICByZXN1bHQyLnBhZ2UgPSBnZXRCbG9ja1BhcmVudFBhZ2UoYmxvY2ssIHNlYXJjaFJlc3VsdC5yZWNvcmRNYXAsIHtcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZVxuICAgICAgICAgIH0pIHx8IGJsb2NrO1xuICAgICAgICAgIGlmICghcmVzdWx0Mi5wYWdlLmlkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICgoX2IgPSByZXN1bHQyLmhpZ2hsaWdodCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnRleHQpIHtcbiAgICAgICAgICAgIHJlc3VsdDIuaGlnaGxpZ2h0Lmh0bWwgPSByZXN1bHQyLmhpZ2hsaWdodC50ZXh0LnJlcGxhY2VBbGwoLzxnemtuZm91dT4vZ2ksIFwiPGI+XCIpLnJlcGxhY2VBbGwoLzxcXC9nemtuZm91dT4vZ2ksIFwiPC9iPlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDI7XG4gICAgICAgIH0pLmZpbHRlcihCb29sZWFuKTtcbiAgICAgICAgY29uc3Qgc2VhcmNoUmVzdWx0c01hcCA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgICAgICByZXN1bHRzLm1hcCgocmVzdWx0MikgPT4gW3Jlc3VsdDIucGFnZS5pZCwgcmVzdWx0Ml0pXG4gICAgICAgICk7XG4gICAgICAgIHNlYXJjaFJlc3VsdC5yZXN1bHRzID0gT2JqZWN0LnZhbHVlcyhzZWFyY2hSZXN1bHRzTWFwKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnN0YXRlLnF1ZXJ5ID09PSBxdWVyeSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNMb2FkaW5nOiBmYWxzZSwgc2VhcmNoUmVzdWx0LCBzZWFyY2hFcnJvciB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLl9pbnB1dFJlZiA9IFJlYWN0MTQuY3JlYXRlUmVmKCk7XG4gIH1cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5fc2VhcmNoID0gKDAsIGltcG9ydF9sb2Rhc2guZGVmYXVsdCkodGhpcy5fc2VhcmNoSW1wbC5iaW5kKHRoaXMpLCAxZTMpO1xuICAgIHZvaWQgdGhpcy5fd2FybXVwU2VhcmNoKCk7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgaXNPcGVuLCBvbkNsb3NlIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHsgaXNMb2FkaW5nLCBxdWVyeSwgc2VhcmNoUmVzdWx0LCBzZWFyY2hFcnJvciB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCBoYXNRdWVyeSA9ICEhcXVlcnkudHJpbSgpO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MjEoTm90aW9uQ29udGV4dENvbnN1bWVyLCB7IGNoaWxkcmVuOiAoY3R4MikgPT4ge1xuICAgICAgY29uc3QgeyBjb21wb25lbnRzLCBkZWZhdWx0UGFnZUljb24sIG1hcFBhZ2VVcmwgfSA9IGN0eDI7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDIxKFxuICAgICAgICBjb21wb25lbnRzLk1vZGFsLFxuICAgICAgICB7XG4gICAgICAgICAgaXNPcGVuLFxuICAgICAgICAgIGNvbnRlbnRMYWJlbDogXCJTZWFyY2hcIixcbiAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLXNlYXJjaFwiLFxuICAgICAgICAgIG92ZXJsYXlDbGFzc05hbWU6IFwibm90aW9uLXNlYXJjaC1vdmVybGF5XCIsXG4gICAgICAgICAgb25SZXF1ZXN0Q2xvc2U6IG9uQ2xvc2UsXG4gICAgICAgICAgb25BZnRlck9wZW46IHRoaXMuX29uQWZ0ZXJPcGVuLFxuICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4czkoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwicXVpY2tGaW5kTWVudVwiLCBjaGlsZHJlbjogW1xuICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeHM5KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInNlYXJjaEJhclwiLCBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MjEoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiaW5saW5lSWNvblwiLCBjaGlsZHJlbjogaXNMb2FkaW5nID8gLyogQF9fUFVSRV9fICovIGpzeDIxKExvYWRpbmdJY29uLCB7IGNsYXNzTmFtZTogXCJsb2FkaW5nSWNvblwiIH0pIDogLyogQF9fUFVSRV9fICovIGpzeDIxKFNlYXJjaEljb24sIHt9KSB9KSxcbiAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDIxKFxuICAgICAgICAgICAgICAgIFwiaW5wdXRcIixcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwic2VhcmNoSW5wdXRcIixcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcIlNlYXJjaFwiLFxuICAgICAgICAgICAgICAgICAgdmFsdWU6IHF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgcmVmOiB0aGlzLl9pbnB1dFJlZixcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLl9vbkNoYW5nZVF1ZXJ5XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBxdWVyeSAmJiAvKiBAX19QVVJFX18gKi8ganN4MjEoXG4gICAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICByb2xlOiBcImJ1dHRvblwiLFxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcImNsZWFyQnV0dG9uXCIsXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0aGlzLl9vbkNsZWFyUXVlcnksXG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDIxKENsZWFySWNvbiwgeyBjbGFzc05hbWU6IFwiY2xlYXJJY29uXCIgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIF0gfSksXG4gICAgICAgICAgICBoYXNRdWVyeSAmJiBzZWFyY2hSZXN1bHQgJiYgLyogQF9fUFVSRV9fICovIGpzeDIxKEZyYWdtZW50NCwgeyBjaGlsZHJlbjogc2VhcmNoUmVzdWx0LnJlc3VsdHMubGVuZ3RoID8gLyogQF9fUFVSRV9fICovIGpzeHM5KFxuICAgICAgICAgICAgICBOb3Rpb25Db250ZXh0UHJvdmlkZXIsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAuLi5jdHgyLFxuICAgICAgICAgICAgICAgIHJlY29yZE1hcDogc2VhcmNoUmVzdWx0LnJlY29yZE1hcCxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDIxKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInJlc3VsdHNQYW5lXCIsIGNoaWxkcmVuOiBzZWFyY2hSZXN1bHQucmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4czkoXG4gICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50cy5QYWdlTGluayxcbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNzKFwicmVzdWx0XCIsIFwibm90aW9uLXBhZ2UtbGlua1wiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY6IG1hcFBhZ2VVcmwoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wYWdlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaFJlc3VsdC5yZWNvcmRNYXBcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MjEoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFnZVRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrOiByZXN1bHQucGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRJY29uOiBkZWZhdWx0UGFnZUljb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICgoX2EgPSByZXN1bHQuaGlnaGxpZ2h0KSA9PSBudWxsID8gdm9pZCAwIDogX2EuaHRtbCkgJiYgLyogQF9fUFVSRV9fICovIGpzeDIxKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1zZWFyY2gtcmVzdWx0LWhpZ2hsaWdodFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX19odG1sOiByZXN1bHQuaGlnaGxpZ2h0Lmh0bWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5pZFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgfSkgfSksXG4gICAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MjEoXCJmb290ZXJcIiwgeyBjbGFzc05hbWU6IFwicmVzdWx0c0Zvb3RlclwiLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeHM5KFwiZGl2XCIsIHsgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDIxKFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJyZXN1bHRzQ291bnRcIiwgY2hpbGRyZW46IHNlYXJjaFJlc3VsdC50b3RhbCB9KSxcbiAgICAgICAgICAgICAgICAgICAgc2VhcmNoUmVzdWx0LnRvdGFsID09PSAxID8gXCIgcmVzdWx0XCIgOiBcIiByZXN1bHRzXCJcbiAgICAgICAgICAgICAgICAgIF0gfSkgfSlcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICkgOiAvKiBAX19QVVJFX18gKi8ganN4czkoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm9SZXN1bHRzUGFuZVwiLCBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MjEoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm9SZXN1bHRzXCIsIGNoaWxkcmVuOiBcIk5vIHJlc3VsdHNcIiB9KSxcbiAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDIxKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcIm5vUmVzdWx0c0RldGFpbFwiLCBjaGlsZHJlbjogXCJUcnkgZGlmZmVyZW50IHNlYXJjaCB0ZXJtc1wiIH0pXG4gICAgICAgICAgICBdIH0pIH0pLFxuICAgICAgICAgICAgaGFzUXVlcnkgJiYgIXNlYXJjaFJlc3VsdCAmJiBzZWFyY2hFcnJvciAmJiAvKiBAX19QVVJFX18gKi8ganN4MjEoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm9SZXN1bHRzUGFuZVwiLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDIxKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcIm5vUmVzdWx0c1wiLCBjaGlsZHJlbjogXCJTZWFyY2ggZXJyb3JcIiB9KSB9KVxuICAgICAgICAgIF0gfSlcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9IH0pO1xuICB9XG59O1xuXG4vLyBzcmMvY29tcG9uZW50cy9oZWFkZXIudHN4XG5pbXBvcnQgeyBGcmFnbWVudCBhcyBGcmFnbWVudDUsIGpzeCBhcyBqc3gyMiwganN4cyBhcyBqc3hzMTAgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmZ1bmN0aW9uIEhlYWRlcih7XG4gIGJsb2NrXG59KSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MjIoXCJoZWFkZXJcIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLWhlYWRlclwiLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeHMxMChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJub3Rpb24tbmF2LWhlYWRlclwiLCBjaGlsZHJlbjogW1xuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gyMihCcmVhZGNydW1icywgeyBibG9jayB9KSxcbiAgICAvKiBAX19QVVJFX18gKi8ganN4MjIoU2VhcmNoLCB7IGJsb2NrIH0pXG4gIF0gfSkgfSk7XG59XG5mdW5jdGlvbiBCcmVhZGNydW1icyh7XG4gIGJsb2NrLFxuICByb290T25seSA9IGZhbHNlXG59KSB7XG4gIGNvbnN0IHsgcmVjb3JkTWFwLCBtYXBQYWdlVXJsLCBjb21wb25lbnRzIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGNvbnN0IGJyZWFkY3J1bWJzID0gUmVhY3QxNS51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCB0ZW1wQnJlYWRjcnVtYnMgPSBnZXRQYWdlQnJlYWRjcnVtYnMocmVjb3JkTWFwLCBibG9jay5pZCk7XG4gICAgaWYgKHJvb3RPbmx5KSB7XG4gICAgICByZXR1cm4gW3RlbXBCcmVhZGNydW1icyA9PSBudWxsID8gdm9pZCAwIDogdGVtcEJyZWFkY3J1bWJzWzBdXS5maWx0ZXIoQm9vbGVhbik7XG4gICAgfVxuICAgIHJldHVybiB0ZW1wQnJlYWRjcnVtYnM7XG4gIH0sIFtyZWNvcmRNYXAsIGJsb2NrLmlkLCByb290T25seV0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDIyKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImJyZWFkY3J1bWJzXCIsIGNoaWxkcmVuOiBicmVhZGNydW1icyA9PSBudWxsID8gdm9pZCAwIDogYnJlYWRjcnVtYnMubWFwKChicmVhZGNydW1iLCBpbmRleCkgPT4ge1xuICAgIGlmICghYnJlYWRjcnVtYikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHBhZ2VMaW5rUHJvcHMgPSB7fTtcbiAgICBjb25zdCBjb21wb25lbnRNYXAgPSB7XG4gICAgICBwYWdlTGluazogY29tcG9uZW50cy5QYWdlTGlua1xuICAgIH07XG4gICAgaWYgKGJyZWFkY3J1bWIuYWN0aXZlKSB7XG4gICAgICBjb21wb25lbnRNYXAucGFnZUxpbmsgPSAocHJvcHMpID0+IC8qIEBfX1BVUkVfXyAqLyBqc3gyMihcImRpdlwiLCB7IC4uLnByb3BzIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYWdlTGlua1Byb3BzLmhyZWYgPSBtYXBQYWdlVXJsKGJyZWFkY3J1bWIucGFnZUlkKTtcbiAgICB9XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzMTAoUmVhY3QxNS5GcmFnbWVudCwgeyBjaGlsZHJlbjogW1xuICAgICAgLyogQF9fUFVSRV9fICovIGpzeHMxMChcbiAgICAgICAgY29tcG9uZW50TWFwLnBhZ2VMaW5rLFxuICAgICAgICB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBjcyhcImJyZWFkY3J1bWJcIiwgYnJlYWRjcnVtYi5hY3RpdmUgJiYgXCJhY3RpdmVcIiksXG4gICAgICAgICAgLi4ucGFnZUxpbmtQcm9wcyxcbiAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgYnJlYWRjcnVtYi5pY29uICYmIC8qIEBfX1BVUkVfXyAqLyBqc3gyMihQYWdlSWNvbiwgeyBjbGFzc05hbWU6IFwiaWNvblwiLCBibG9jazogYnJlYWRjcnVtYi5ibG9jayB9KSxcbiAgICAgICAgICAgIGJyZWFkY3J1bWIudGl0bGUgJiYgLyogQF9fUFVSRV9fICovIGpzeDIyKFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJ0aXRsZVwiLCBjaGlsZHJlbjogYnJlYWRjcnVtYi50aXRsZSB9KVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgKSxcbiAgICAgIGluZGV4IDwgYnJlYWRjcnVtYnMubGVuZ3RoIC0gMSAmJiAvKiBAX19QVVJFX18gKi8ganN4MjIoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInNwYWNlclwiLCBjaGlsZHJlbjogXCIvXCIgfSlcbiAgICBdIH0sIGJyZWFkY3J1bWIucGFnZUlkKTtcbiAgfSkgfSwgXCJicmVhZGNydW1ic1wiKTtcbn1cbmZ1bmN0aW9uIFNlYXJjaCh7XG4gIGJsb2NrLFxuICBzZWFyY2gsXG4gIHRpdGxlID0gXCJTZWFyY2hcIlxufSkge1xuICBjb25zdCB7IHNlYXJjaE5vdGlvbiwgcm9vdFBhZ2VJZCwgaXNTaG93aW5nU2VhcmNoLCBvbkhpZGVTZWFyY2ggfSA9IHVzZU5vdGlvbkNvbnRleHQoKTtcbiAgY29uc3Qgb25TZWFyY2hOb3Rpb24gPSBzZWFyY2ggfHwgc2VhcmNoTm90aW9uO1xuICBjb25zdCBbaXNTZWFyY2hPcGVuLCBzZXRJc1NlYXJjaE9wZW5dID0gUmVhY3QxNS51c2VTdGF0ZShpc1Nob3dpbmdTZWFyY2gpO1xuICBSZWFjdDE1LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0SXNTZWFyY2hPcGVuKGlzU2hvd2luZ1NlYXJjaCk7XG4gIH0sIFtpc1Nob3dpbmdTZWFyY2hdKTtcbiAgY29uc3Qgb25PcGVuU2VhcmNoID0gUmVhY3QxNS51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0SXNTZWFyY2hPcGVuKHRydWUpO1xuICB9LCBbXSk7XG4gIGNvbnN0IG9uQ2xvc2VTZWFyY2ggPSBSZWFjdDE1LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRJc1NlYXJjaE9wZW4oZmFsc2UpO1xuICAgIGlmIChvbkhpZGVTZWFyY2gpIHtcbiAgICAgIG9uSGlkZVNlYXJjaCgpO1xuICAgIH1cbiAgfSwgW29uSGlkZVNlYXJjaF0pO1xuICB1c2VIb3RrZXlzKFwiY21kK3BcIiwgKGV2ZW50KSA9PiB7XG4gICAgb25PcGVuU2VhcmNoKCk7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfSk7XG4gIHVzZUhvdGtleXMoXCJjbWQra1wiLCAoZXZlbnQpID0+IHtcbiAgICBvbk9wZW5TZWFyY2goKTtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICB9KTtcbiAgY29uc3QgaGFzU2VhcmNoID0gISFvblNlYXJjaE5vdGlvbjtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzMTAoRnJhZ21lbnQ1LCB7IGNoaWxkcmVuOiBbXG4gICAgaGFzU2VhcmNoICYmIC8qIEBfX1BVUkVfXyAqLyBqc3hzMTAoXG4gICAgICBcImRpdlwiLFxuICAgICAge1xuICAgICAgICByb2xlOiBcImJ1dHRvblwiLFxuICAgICAgICBjbGFzc05hbWU6IGNzKFwiYnJlYWRjcnVtYlwiLCBcImJ1dHRvblwiLCBcIm5vdGlvbi1zZWFyY2gtYnV0dG9uXCIpLFxuICAgICAgICBvbkNsaWNrOiBvbk9wZW5TZWFyY2gsXG4gICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDIyKFNlYXJjaEljb24sIHsgY2xhc3NOYW1lOiBcInNlYXJjaEljb25cIiB9KSxcbiAgICAgICAgICB0aXRsZSAmJiAvKiBAX19QVVJFX18gKi8ganN4MjIoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInRpdGxlXCIsIGNoaWxkcmVuOiB0aXRsZSB9KVxuICAgICAgICBdXG4gICAgICB9XG4gICAgKSxcbiAgICBpc1NlYXJjaE9wZW4gJiYgaGFzU2VhcmNoICYmIC8qIEBfX1BVUkVfXyAqLyBqc3gyMihcbiAgICAgIFNlYXJjaERpYWxvZyxcbiAgICAgIHtcbiAgICAgICAgaXNPcGVuOiBpc1NlYXJjaE9wZW4sXG4gICAgICAgIHJvb3RCbG9ja0lkOiByb290UGFnZUlkIHx8IChibG9jayA9PSBudWxsID8gdm9pZCAwIDogYmxvY2suaWQpLFxuICAgICAgICBvbkNsb3NlOiBvbkNsb3NlU2VhcmNoLFxuICAgICAgICBzZWFyY2hOb3Rpb246IG9uU2VhcmNoTm90aW9uXG4gICAgICB9XG4gICAgKVxuICBdIH0pO1xufVxuXG4vLyBzcmMvcmVuZGVyZXIudHN4XG5pbXBvcnQgbWVkaXVtWm9vbSBmcm9tIFwiQGZpc2NoMDkyMC9tZWRpdW0tem9vbVwiO1xuaW1wb3J0IFwibm90aW9uLXR5cGVzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdDIwIGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvYmxvY2sudHN4XG5pbXBvcnQge1xuICBnZXRCbG9ja0NvbGxlY3Rpb25JZCxcbiAgZ2V0QmxvY2tJY29uIGFzIGdldEJsb2NrSWNvbjIsXG4gIGdldEJsb2NrUGFyZW50UGFnZSBhcyBnZXRCbG9ja1BhcmVudFBhZ2UyLFxuICBnZXRQYWdlVGFibGVPZkNvbnRlbnRzLFxuICBnZXRUZXh0Q29udGVudCBhcyBnZXRUZXh0Q29udGVudDIsXG4gIHV1aWRUb0lkIGFzIHV1aWRUb0lkMlxufSBmcm9tIFwibm90aW9uLXV0aWxzXCI7XG5pbXBvcnQgUmVhY3QxOSBmcm9tIFwicmVhY3RcIjtcblxuLy8gc3JjL2NvbXBvbmVudHMvYXVkaW8udHN4XG5pbXBvcnQgXCJub3Rpb24tdHlwZXNcIjtcbmltcG9ydCB7IGpzeCBhcyBqc3gyMyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuZnVuY3Rpb24gQXVkaW8oe1xuICBibG9jayxcbiAgY2xhc3NOYW1lXG59KSB7XG4gIHZhciBfYSwgX2IsIF9jO1xuICBjb25zdCB7IHJlY29yZE1hcCB9ID0gdXNlTm90aW9uQ29udGV4dCgpO1xuICBsZXQgc291cmNlID0gcmVjb3JkTWFwLnNpZ25lZF91cmxzW2Jsb2NrLmlkXSB8fCAoKF9jID0gKF9iID0gKF9hID0gYmxvY2sucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnNvdXJjZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iWzBdKSA9PSBudWxsID8gdm9pZCAwIDogX2NbMF0pO1xuICBpZiAoIXNvdXJjZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmIChibG9jay5zcGFjZV9pZCkge1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoc291cmNlKTtcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcInNwYWNlSWRcIiwgYmxvY2suc3BhY2VfaWQpO1xuICAgIHNvdXJjZSA9IHVybC50b1N0cmluZygpO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MjMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNzKFwibm90aW9uLWF1ZGlvXCIsIGNsYXNzTmFtZSksIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MjMoXCJhdWRpb1wiLCB7IGNvbnRyb2xzOiB0cnVlLCBwcmVsb2FkOiBcIm5vbmVcIiwgc3JjOiBzb3VyY2UgfSkgfSk7XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL2ZpbGUudHN4XG5pbXBvcnQgXCJub3Rpb24tdHlwZXNcIjtcblxuLy8gc3JjL2ljb25zL2ZpbGUtaWNvbi50c3hcbmltcG9ydCBcInJlYWN0XCI7XG5pbXBvcnQgeyBqc3ggYXMganN4MjQgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmZ1bmN0aW9uIEZpbGVJY29uKHByb3BzKSB7XG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5yZXN0IH0gPSBwcm9wcztcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gyNChcInN2Z1wiLCB7IGNsYXNzTmFtZSwgLi4ucmVzdCwgdmlld0JveDogXCIwIDAgMzAgMzBcIiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gyNChcInBhdGhcIiwgeyBkOiBcIk0yMiw4djEyYzAsMy44NjYtMy4xMzQsNy03LDdzLTctMy4xMzQtNy03VjhjMC0yLjc2MiwyLjIzOC01LDUtNXM1LDIuMjM4LDUsNXYxMmMwLDEuNjU3LTEuMzQzLDMtMywzcy0zLTEuMzQzLTMtM1Y4aC0ydjEyYzAsMi43NjIsMi4yMzgsNSw1LDVzNS0yLjIzOCw1LTVWOGMwLTMuODY2LTMuMTM0LTctNy03UzYsNC4xMzQsNiw4djEyYzAsNC45NzEsNC4wMjksOSw5LDlzOS00LjAyOSw5LTlWOEgyMnpcIiB9KSB9KTtcbn1cblxuLy8gc3JjL2NvbXBvbmVudHMvZmlsZS50c3hcbmltcG9ydCB7IGpzeCBhcyBqc3gyNSwganN4cyBhcyBqc3hzMTEgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmZ1bmN0aW9uIEZpbGUoe1xuICBibG9jayxcbiAgY2xhc3NOYW1lXG59KSB7XG4gIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gIGNvbnN0IHsgY29tcG9uZW50cywgcmVjb3JkTWFwIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGxldCBzb3VyY2UgPSByZWNvcmRNYXAuc2lnbmVkX3VybHNbYmxvY2suaWRdIHx8ICgoX2MgPSAoX2IgPSAoX2EgPSBibG9jay5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX2Euc291cmNlKSA9PSBudWxsID8gdm9pZCAwIDogX2JbMF0pID09IG51bGwgPyB2b2lkIDAgOiBfY1swXSk7XG4gIGlmICghc291cmNlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKGJsb2NrLnNwYWNlX2lkKSB7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChzb3VyY2UpO1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwic3BhY2VJZFwiLCBibG9jay5zcGFjZV9pZCk7XG4gICAgc291cmNlID0gdXJsLnRvU3RyaW5nKCk7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gyNShcImRpdlwiLCB7IGNsYXNzTmFtZTogY3MoXCJub3Rpb24tZmlsZVwiLCBjbGFzc05hbWUpLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeHMxMShcbiAgICBjb21wb25lbnRzLkxpbmssXG4gICAge1xuICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1maWxlLWxpbmtcIixcbiAgICAgIGhyZWY6IHNvdXJjZSxcbiAgICAgIHRhcmdldDogXCJfYmxhbmtcIixcbiAgICAgIHJlbDogXCJub29wZW5lciBub3JlZmVycmVyXCIsXG4gICAgICBjaGlsZHJlbjogW1xuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MjUoRmlsZUljb24sIHsgY2xhc3NOYW1lOiBcIm5vdGlvbi1maWxlLWljb25cIiB9KSxcbiAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeHMxMShcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJub3Rpb24tZmlsZS1pbmZvXCIsIGNoaWxkcmVuOiBbXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDI1KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcIm5vdGlvbi1maWxlLXRpdGxlXCIsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MjUoVGV4dCwgeyB2YWx1ZTogKChfZCA9IGJsb2NrLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfZC50aXRsZSkgfHwgW1tcIkZpbGVcIl1dLCBibG9jayB9KSB9KSxcbiAgICAgICAgICAoKF9lID0gYmxvY2sucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLnNpemUpICYmIC8qIEBfX1BVUkVfXyAqLyBqc3gyNShcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJub3Rpb24tZmlsZS1zaXplXCIsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MjUoVGV4dCwgeyB2YWx1ZTogYmxvY2sucHJvcGVydGllcy5zaXplLCBibG9jayB9KSB9KVxuICAgICAgICBdIH0pXG4gICAgICBdXG4gICAgfVxuICApIH0pO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9nb29nbGUtZHJpdmUudHN4XG5pbXBvcnQgXCJub3Rpb24tdHlwZXNcIjtcbmltcG9ydCB7IGpzeCBhcyBqc3gyNiwganN4cyBhcyBqc3hzMTIgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmZ1bmN0aW9uIEdvb2dsZURyaXZlKHtcbiAgYmxvY2ssXG4gIGNsYXNzTmFtZVxufSkge1xuICB2YXIgX2E7XG4gIGNvbnN0IHsgY29tcG9uZW50cywgbWFwSW1hZ2VVcmwgfSA9IHVzZU5vdGlvbkNvbnRleHQoKTtcbiAgY29uc3QgcHJvcGVydGllcyA9IChfYSA9IGJsb2NrLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmRyaXZlX3Byb3BlcnRpZXM7XG4gIGlmICghcHJvcGVydGllcykgcmV0dXJuIG51bGw7XG4gIGxldCBkb21haW47XG4gIHRyeSB7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChwcm9wZXJ0aWVzLnVybCk7XG4gICAgZG9tYWluID0gdXJsLmhvc3RuYW1lO1xuICB9IGNhdGNoIChlKSB7XG4gIH1cbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gyNihcImRpdlwiLCB7IGNsYXNzTmFtZTogY3MoXCJub3Rpb24tZ29vZ2xlLWRyaXZlXCIsIGNsYXNzTmFtZSksIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4czEyKFxuICAgIGNvbXBvbmVudHMuTGluayxcbiAgICB7XG4gICAgICBjbGFzc05hbWU6IFwibm90aW9uLWdvb2dsZS1kcml2ZS1saW5rXCIsXG4gICAgICBocmVmOiBwcm9wZXJ0aWVzLnVybCxcbiAgICAgIHRhcmdldDogXCJfYmxhbmtcIixcbiAgICAgIHJlbDogXCJub29wZW5lciBub3JlZmVycmVyXCIsXG4gICAgICBjaGlsZHJlbjogW1xuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MjYoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLWdvb2dsZS1kcml2ZS1wcmV2aWV3XCIsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MjYoXG4gICAgICAgICAgR3JhY2VmdWxJbWFnZSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzcmM6IG1hcEltYWdlVXJsKHByb3BlcnRpZXMudGh1bWJuYWlsLCBibG9jayksXG4gICAgICAgICAgICBhbHQ6IHByb3BlcnRpZXMudGl0bGUgfHwgXCJHb29nbGUgRHJpdmUgRG9jdW1lbnRcIixcbiAgICAgICAgICAgIGxvYWRpbmc6IFwibGF6eVwiXG4gICAgICAgICAgfVxuICAgICAgICApIH0pLFxuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4czEyKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcIm5vdGlvbi1nb29nbGUtZHJpdmUtYm9keVwiLCBjaGlsZHJlbjogW1xuICAgICAgICAgIHByb3BlcnRpZXMudGl0bGUgJiYgLyogQF9fUFVSRV9fICovIGpzeDI2KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcIm5vdGlvbi1nb29nbGUtZHJpdmUtYm9keS10aXRsZVwiLCBjaGlsZHJlbjogcHJvcGVydGllcy50aXRsZSB9KSxcbiAgICAgICAgICBwcm9wZXJ0aWVzLmljb24gJiYgZG9tYWluICYmIC8qIEBfX1BVUkVfXyAqLyBqc3hzMTIoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLWdvb2dsZS1kcml2ZS1ib2R5LXNvdXJjZVwiLCBjaGlsZHJlbjogW1xuICAgICAgICAgICAgcHJvcGVydGllcy5pY29uICYmIC8qIEBfX1BVUkVfXyAqLyBqc3gyNihcbiAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJub3Rpb24tZ29vZ2xlLWRyaXZlLWJvZHktc291cmNlLWljb25cIixcbiAgICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBgdXJsKCR7cHJvcGVydGllcy5pY29ufSlgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgZG9tYWluICYmIC8qIEBfX1BVUkVfXyAqLyBqc3gyNihcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJub3Rpb24tZ29vZ2xlLWRyaXZlLWJvZHktc291cmNlLWRvbWFpblwiLCBjaGlsZHJlbjogZG9tYWluIH0pXG4gICAgICAgICAgXSB9KVxuICAgICAgICBdIH0pXG4gICAgICBdXG4gICAgfVxuICApIH0pO1xufVxuXG4vLyBzcmMvY29tcG9uZW50cy9wYWdlLWFzaWRlLnRzeFxudmFyIGltcG9ydF9sb2Rhc2gyID0gX190b0VTTShyZXF1aXJlX2xvZGFzaCgpLCAxKTtcbmltcG9ydCB7IHV1aWRUb0lkIH0gZnJvbSBcIm5vdGlvbi11dGlsc1wiO1xuaW1wb3J0IFJlYWN0MTcgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBqc3ggYXMganN4MjcsIGpzeHMgYXMganN4czEzIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5mdW5jdGlvbiBQYWdlQXNpZGUoe1xuICB0b2MsXG4gIGFjdGl2ZVNlY3Rpb24sXG4gIHNldEFjdGl2ZVNlY3Rpb24sXG4gIHBhZ2VBc2lkZSxcbiAgaGFzVG9jLFxuICBoYXNBc2lkZSxcbiAgY2xhc3NOYW1lXG59KSB7XG4gIGNvbnN0IHRocm90dGxlTXMgPSAxMDA7XG4gIGNvbnN0IGFjdGlvblNlY3Rpb25TY3JvbGxTcHkgPSBSZWFjdDE3LnVzZU1lbW8oXG4gICAgKCkgPT4gKDAsIGltcG9ydF9sb2Rhc2gyLmRlZmF1bHQpKCgpID0+IHtcbiAgICAgIGNvbnN0IHNlY3Rpb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm5vdGlvbi1oXCIpO1xuICAgICAgbGV0IHByZXZCQm94ID0gbnVsbDtcbiAgICAgIGxldCBjdXJyZW50U2VjdGlvbklkID0gYWN0aXZlU2VjdGlvbjtcbiAgICAgIGZvciAoY29uc3Qgc2VjdGlvbiBvZiBzZWN0aW9ucykge1xuICAgICAgICBpZiAoIXNlY3Rpb24gfHwgIShzZWN0aW9uIGluc3RhbmNlb2YgRWxlbWVudCkpIGNvbnRpbnVlO1xuICAgICAgICBpZiAoIWN1cnJlbnRTZWN0aW9uSWQpIHtcbiAgICAgICAgICBjdXJyZW50U2VjdGlvbklkID0gc2VjdGlvbi5kYXRhc2V0LmlkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJib3ggPSBzZWN0aW9uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCBwcmV2SGVpZ2h0ID0gcHJldkJCb3ggPyBiYm94LnRvcCAtIHByZXZCQm94LmJvdHRvbSA6IDA7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IE1hdGgubWF4KDE1MCwgcHJldkhlaWdodCAvIDQpO1xuICAgICAgICBpZiAoYmJveC50b3AgLSBvZmZzZXQgPCAwKSB7XG4gICAgICAgICAgY3VycmVudFNlY3Rpb25JZCA9IHNlY3Rpb24uZGF0YXNldC5pZDtcbiAgICAgICAgICBwcmV2QkJveCA9IGJib3g7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBzZXRBY3RpdmVTZWN0aW9uKGN1cnJlbnRTZWN0aW9uSWQpO1xuICAgIH0sIHRocm90dGxlTXMpLFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICBbXG4gICAgICAvLyBleHBsaWNpdGx5IG5vdCB0YWtpbmcgYSBkZXBlbmRlbmN5IG9uIGFjdGl2ZVNlY3Rpb25cbiAgICAgIHNldEFjdGl2ZVNlY3Rpb25cbiAgICBdXG4gICk7XG4gIFJlYWN0MTcudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWhhc1RvYykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBhY3Rpb25TZWN0aW9uU2Nyb2xsU3B5KTtcbiAgICBhY3Rpb25TZWN0aW9uU2Nyb2xsU3B5KCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGFjdGlvblNlY3Rpb25TY3JvbGxTcHkpO1xuICAgIH07XG4gIH0sIFtoYXNUb2MsIGFjdGlvblNlY3Rpb25TY3JvbGxTcHldKTtcbiAgaWYgKCFoYXNBc2lkZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4czEzKFwiYXNpZGVcIiwgeyBjbGFzc05hbWU6IGNzKFwibm90aW9uLWFzaWRlXCIsIGNsYXNzTmFtZSksIGNoaWxkcmVuOiBbXG4gICAgaGFzVG9jICYmIC8qIEBfX1BVUkVfXyAqLyBqc3hzMTMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLWFzaWRlLXRhYmxlLW9mLWNvbnRlbnRzXCIsIGNoaWxkcmVuOiBbXG4gICAgICAvKiBAX19QVVJFX18gKi8ganN4MjcoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLWFzaWRlLXRhYmxlLW9mLWNvbnRlbnRzLWhlYWRlclwiLCBjaGlsZHJlbjogXCJUYWJsZSBvZiBDb250ZW50c1wiIH0pLFxuICAgICAgLyogQF9fUFVSRV9fICovIGpzeDI3KFwibmF2XCIsIHsgY2xhc3NOYW1lOiBcIm5vdGlvbi10YWJsZS1vZi1jb250ZW50c1wiLCBjaGlsZHJlbjogdG9jLm1hcCgodG9jSXRlbSkgPT4ge1xuICAgICAgICBjb25zdCBpZCA9IHV1aWRUb0lkKHRvY0l0ZW0uaWQpO1xuICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDI3KFxuICAgICAgICAgIFwiYVwiLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGhyZWY6IGAjJHtpZH1gLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiBjcyhcbiAgICAgICAgICAgICAgXCJub3Rpb24tdGFibGUtb2YtY29udGVudHMtaXRlbVwiLFxuICAgICAgICAgICAgICBgbm90aW9uLXRhYmxlLW9mLWNvbnRlbnRzLWl0ZW0taW5kZW50LWxldmVsLSR7dG9jSXRlbS5pbmRlbnRMZXZlbH1gLFxuICAgICAgICAgICAgICBhY3RpdmVTZWN0aW9uID09PSBpZCAmJiBcIm5vdGlvbi10YWJsZS1vZi1jb250ZW50cy1hY3RpdmUtaXRlbVwiXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gyNyhcbiAgICAgICAgICAgICAgXCJzcGFuXCIsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLXRhYmxlLW9mLWNvbnRlbnRzLWl0ZW0tYm9keVwiLFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICBkaXNwbGF5OiBcImlubGluZS1ibG9ja1wiLFxuICAgICAgICAgICAgICAgICAgbWFyZ2luTGVmdDogdG9jSXRlbS5pbmRlbnRMZXZlbCAqIDE2XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogdG9jSXRlbS50ZXh0XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9LFxuICAgICAgICAgIGlkXG4gICAgICAgICk7XG4gICAgICB9KSB9KVxuICAgIF0gfSksXG4gICAgcGFnZUFzaWRlXG4gIF0gfSk7XG59XG5cbi8vIHNyYy9jb21wb25lbnRzL3N5bmMtcG9pbnRlci1ibG9jay50c3hcbmltcG9ydCBcIm5vdGlvbi10eXBlc1wiO1xuaW1wb3J0IHsganN4IGFzIGpzeDI4IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5mdW5jdGlvbiBTeW5jUG9pbnRlckJsb2NrKHtcbiAgYmxvY2ssXG4gIGxldmVsXG59KSB7XG4gIHZhciBfYSwgX2I7XG4gIGlmICghYmxvY2spIHtcbiAgICBpZiAodHJ1ZSkge1xuICAgICAgY29uc29sZS53YXJuKFwibWlzc2luZyBzeW5jIHBvaW50ZXIgYmxvY2tcIik7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHN5bmNQb2ludGVyQmxvY2sgPSBibG9jaztcbiAgY29uc3QgcmVmZXJlbmNlUG9pbnRlcklkID0gKF9iID0gKF9hID0gc3luY1BvaW50ZXJCbG9jayA9PSBudWxsID8gdm9pZCAwIDogc3luY1BvaW50ZXJCbG9jay5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfYS50cmFuc2NsdXNpb25fcmVmZXJlbmNlX3BvaW50ZXIpID09IG51bGwgPyB2b2lkIDAgOiBfYi5pZDtcbiAgaWYgKCFyZWZlcmVuY2VQb2ludGVySWQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDI4KFxuICAgIE5vdGlvbkJsb2NrUmVuZGVyZXIsXG4gICAge1xuICAgICAgbGV2ZWwsXG4gICAgICBibG9ja0lkOiByZWZlcmVuY2VQb2ludGVySWRcbiAgICB9LFxuICAgIHJlZmVyZW5jZVBvaW50ZXJJZFxuICApO1xufVxuXG4vLyBzcmMvaWNvbnMvbGluay1pY29uLnRzeFxuaW1wb3J0IFwicmVhY3RcIjtcbmltcG9ydCB7IGpzeCBhcyBqc3gyOSB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuZnVuY3Rpb24gTGlua0ljb24ocHJvcHMpIHtcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLnJlc3QgfSA9IHByb3BzO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDI5KFxuICAgIFwic3ZnXCIsXG4gICAge1xuICAgICAgY2xhc3NOYW1lLFxuICAgICAgLi4ucmVzdCxcbiAgICAgIHZpZXdCb3g6IFwiMCAwIDE2IDE2XCIsXG4gICAgICB3aWR0aDogXCIxNlwiLFxuICAgICAgaGVpZ2h0OiBcIjE2XCIsXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDI5KFxuICAgICAgICBcInBhdGhcIixcbiAgICAgICAge1xuICAgICAgICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICAgICAgICBkOiBcIk03Ljc3NSAzLjI3NWEuNzUuNzUgMCAwMDEuMDYgMS4wNmwxLjI1LTEuMjVhMiAyIDAgMTEyLjgzIDIuODNsLTIuNSAyLjVhMiAyIDAgMDEtMi44MyAwIC43NS43NSAwIDAwLTEuMDYgMS4wNiAzLjUgMy41IDAgMDA0Ljk1IDBsMi41LTIuNWEzLjUgMy41IDAgMDAtNC45NS00Ljk1bC0xLjI1IDEuMjV6bS00LjY5IDkuNjRhMiAyIDAgMDEwLTIuODNsMi41LTIuNWEyIDIgMCAwMTIuODMgMCAuNzUuNzUgMCAwMDEuMDYtMS4wNiAzLjUgMy41IDAgMDAtNC45NSAwbC0yLjUgMi41YTMuNSAzLjUgMCAwMDQuOTUgNC45NWwxLjI1LTEuMjVhLjc1Ljc1IDAgMDAtMS4wNi0xLjA2bC0xLjI1IDEuMjVhMiAyIDAgMDEtMi44MyAwelwiXG4gICAgICAgIH1cbiAgICAgIClcbiAgICB9XG4gICk7XG59XG5cbi8vIHNyYy9ibG9jay50c3hcbmltcG9ydCB7IEZyYWdtZW50IGFzIEZyYWdtZW50NiwganN4IGFzIGpzeDMwLCBqc3hzIGFzIGpzeHMxNCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIHRvY0luZGVudExldmVsQ2FjaGUgPSB7fTtcbnZhciBwYWdlQ292ZXJTdHlsZUNhY2hlID0ge307XG5mdW5jdGlvbiBCbG9jayhwcm9wcykge1xuICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaSwgX2osIF9rLCBfbCwgX20sIF9uLCBfbywgX3AsIF9xLCBfciwgX3MsIF90LCBfdSwgX3YsIF93LCBfeCwgX3ksIF96LCBfQSwgX0IsIF9DLCBfRCwgX0UsIF9GLCBfRywgX0gsIF9JLCBfSiwgX0ssIF9MLCBfTSwgX04sIF9PLCBfUCwgX1EsIF9SLCBfUywgX1Q7XG4gIGNvbnN0IGN0eDIgPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGNvbnN0IHtcbiAgICBjb21wb25lbnRzLFxuICAgIGZ1bGxQYWdlLFxuICAgIGRhcmtNb2RlLFxuICAgIHJlY29yZE1hcCxcbiAgICBtYXBQYWdlVXJsLFxuICAgIG1hcEltYWdlVXJsLFxuICAgIHNob3dUYWJsZU9mQ29udGVudHMsXG4gICAgbWluVGFibGVPZkNvbnRlbnRzSXRlbXMsXG4gICAgZGVmYXVsdFBhZ2VJY29uLFxuICAgIGRlZmF1bHRQYWdlQ292ZXIsXG4gICAgZGVmYXVsdFBhZ2VDb3ZlclBvc2l0aW9uXG4gIH0gPSBjdHgyO1xuICBjb25zdCBbYWN0aXZlU2VjdGlvbiwgc2V0QWN0aXZlU2VjdGlvbl0gPSBSZWFjdDE5LnVzZVN0YXRlKG51bGwpO1xuICBjb25zdCB7XG4gICAgYmxvY2ssXG4gICAgY2hpbGRyZW4sXG4gICAgbGV2ZWwsXG4gICAgY2xhc3NOYW1lLFxuICAgIGJvZHlDbGFzc05hbWUsXG4gICAgaGVhZGVyLFxuICAgIGZvb3RlcixcbiAgICBwYWdlSGVhZGVyLFxuICAgIHBhZ2VGb290ZXIsXG4gICAgcGFnZVRpdGxlLFxuICAgIHBhZ2VBc2lkZSxcbiAgICBwYWdlQ292ZXIsXG4gICAgaGlkZUJsb2NrSWQsXG4gICAgZGlzYWJsZUhlYWRlclxuICB9ID0gcHJvcHM7XG4gIGlmICghYmxvY2spIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAobGV2ZWwgPT09IDAgJiYgYmxvY2sudHlwZSA9PT0gXCJjb2xsZWN0aW9uX3ZpZXdcIikge1xuICAgIDtcbiAgICBibG9jay50eXBlID0gXCJjb2xsZWN0aW9uX3ZpZXdfcGFnZVwiO1xuICB9XG4gIGNvbnN0IGJsb2NrSWQgPSBoaWRlQmxvY2tJZCA/IFwibm90aW9uLWJsb2NrXCIgOiBgbm90aW9uLWJsb2NrLSR7dXVpZFRvSWQyKGJsb2NrLmlkKX1gO1xuICBzd2l0Y2ggKGJsb2NrLnR5cGUpIHtcbiAgICBjYXNlIFwiY29sbGVjdGlvbl92aWV3X3BhZ2VcIjpcbiAgICAvLyBmYWxsdGhyb3VnaFxuICAgIGNhc2UgXCJwYWdlXCI6XG4gICAgICBpZiAobGV2ZWwgPT09IDApIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIHBhZ2VfaWNvbiA9IGRlZmF1bHRQYWdlSWNvbixcbiAgICAgICAgICBwYWdlX2NvdmVyID0gZGVmYXVsdFBhZ2VDb3ZlcixcbiAgICAgICAgICBwYWdlX2NvdmVyX3Bvc2l0aW9uID0gZGVmYXVsdFBhZ2VDb3ZlclBvc2l0aW9uLFxuICAgICAgICAgIHBhZ2VfZnVsbF93aWR0aCxcbiAgICAgICAgICBwYWdlX3NtYWxsX3RleHRcbiAgICAgICAgfSA9IGJsb2NrLmZvcm1hdCB8fCB7fTtcbiAgICAgICAgaWYgKGZ1bGxQYWdlKSB7XG4gICAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IGJsb2NrLnR5cGUgPT09IFwicGFnZVwiID8gYmxvY2sucHJvcGVydGllcyA6IHtcbiAgICAgICAgICAgIHRpdGxlOiAoX2IgPSAoX2EgPSByZWNvcmRNYXAuY29sbGVjdGlvbltnZXRCbG9ja0NvbGxlY3Rpb25JZChibG9jaywgcmVjb3JkTWFwKV0pID09IG51bGwgPyB2b2lkIDAgOiBfYS52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLm5hbWVcbiAgICAgICAgICB9O1xuICAgICAgICAgIGNvbnN0IGNvdmVyUG9zaXRpb24gPSAoMSAtIChwYWdlX2NvdmVyX3Bvc2l0aW9uIHx8IDAuNSkpICogMTAwO1xuICAgICAgICAgIGNvbnN0IHBhZ2VDb3Zlck9iamVjdFBvc2l0aW9uID0gYGNlbnRlciAke2NvdmVyUG9zaXRpb259JWA7XG4gICAgICAgICAgbGV0IHBhZ2VDb3ZlclN0eWxlID0gcGFnZUNvdmVyU3R5bGVDYWNoZVtwYWdlQ292ZXJPYmplY3RQb3NpdGlvbl07XG4gICAgICAgICAgaWYgKCFwYWdlQ292ZXJTdHlsZSkge1xuICAgICAgICAgICAgcGFnZUNvdmVyU3R5bGUgPSBwYWdlQ292ZXJTdHlsZUNhY2hlW3BhZ2VDb3Zlck9iamVjdFBvc2l0aW9uXSA9IHtcbiAgICAgICAgICAgICAgb2JqZWN0UG9zaXRpb246IHBhZ2VDb3Zlck9iamVjdFBvc2l0aW9uXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBwYWdlSWNvbiA9IChfYyA9IGdldEJsb2NrSWNvbjIoYmxvY2ssIHJlY29yZE1hcCkpICE9IG51bGwgPyBfYyA6IGRlZmF1bHRQYWdlSWNvbjtcbiAgICAgICAgICBjb25zdCBpc1BhZ2VJY29uVXJsID0gcGFnZUljb24gJiYgaXNVcmwocGFnZUljb24pO1xuICAgICAgICAgIGNvbnN0IHRvYyA9IGdldFBhZ2VUYWJsZU9mQ29udGVudHMoXG4gICAgICAgICAgICBibG9jayxcbiAgICAgICAgICAgIHJlY29yZE1hcFxuICAgICAgICAgICk7XG4gICAgICAgICAgY29uc3QgaGFzVG9jID0gc2hvd1RhYmxlT2ZDb250ZW50cyAmJiB0b2MubGVuZ3RoID49IG1pblRhYmxlT2ZDb250ZW50c0l0ZW1zO1xuICAgICAgICAgIGNvbnN0IGhhc0FzaWRlID0gISEoKGhhc1RvYyB8fCBwYWdlQXNpZGUpICYmICFwYWdlX2Z1bGxfd2lkdGgpO1xuICAgICAgICAgIGNvbnN0IGhhc1BhZ2VDb3ZlciA9ICEhKHBhZ2VDb3ZlciB8fCBwYWdlX2NvdmVyKTtcbiAgICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeHMxNChcbiAgICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogY3MoXG4gICAgICAgICAgICAgICAgXCJub3Rpb25cIixcbiAgICAgICAgICAgICAgICBcIm5vdGlvbi1hcHBcIixcbiAgICAgICAgICAgICAgICBkYXJrTW9kZSA/IFwiZGFyay1tb2RlXCIgOiBcImxpZ2h0LW1vZGVcIixcbiAgICAgICAgICAgICAgICBibG9ja0lkLFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZVxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gzMChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJub3Rpb24tdmlld3BvcnRcIiB9KSxcbiAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4czE0KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcIm5vdGlvbi1mcmFtZVwiLCBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgIWRpc2FibGVIZWFkZXIgJiYgLyogQF9fUFVSRV9fICovIGpzeDMwKGNvbXBvbmVudHMuSGVhZGVyLCB7IGJsb2NrIH0pLFxuICAgICAgICAgICAgICAgICAgaGVhZGVyLFxuICAgICAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeHMxNChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJub3Rpb24tcGFnZS1zY3JvbGxlclwiLCBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgICBoYXNQYWdlQ292ZXIgJiYgKHBhZ2VDb3ZlciAhPSBudWxsID8gcGFnZUNvdmVyIDogLyogQF9fUFVSRV9fICovIGpzeDMwKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcIm5vdGlvbi1wYWdlLWNvdmVyLXdyYXBwZXJcIiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gzMChcbiAgICAgICAgICAgICAgICAgICAgICBMYXp5SW1hZ2UsXG4gICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiBtYXBJbWFnZVVybChwYWdlX2NvdmVyLCBibG9jayksXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHQ6IGdldFRleHRDb250ZW50Mihwcm9wZXJ0aWVzID09IG51bGwgPyB2b2lkIDAgOiBwcm9wZXJ0aWVzLnRpdGxlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaW9yaXR5OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcIm5vdGlvbi1wYWdlLWNvdmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogcGFnZUNvdmVyU3R5bGVcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICkgfSkpLFxuICAgICAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4czE0KFxuICAgICAgICAgICAgICAgICAgICAgIFwibWFpblwiLFxuICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY3MoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwibm90aW9uLXBhZ2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzUGFnZUNvdmVyID8gXCJub3Rpb24tcGFnZS1oYXMtY292ZXJcIiA6IFwibm90aW9uLXBhZ2Utbm8tY292ZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZV9pY29uID8gXCJub3Rpb24tcGFnZS1oYXMtaWNvblwiIDogXCJub3Rpb24tcGFnZS1uby1pY29uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlzUGFnZUljb25VcmwgPyBcIm5vdGlvbi1wYWdlLWhhcy1pbWFnZS1pY29uXCIgOiBcIm5vdGlvbi1wYWdlLWhhcy10ZXh0LWljb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJub3Rpb24tZnVsbC1wYWdlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VfZnVsbF93aWR0aCAmJiBcIm5vdGlvbi1mdWxsLXdpZHRoXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2Vfc21hbGxfdGV4dCAmJiBcIm5vdGlvbi1zbWFsbC10ZXh0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHlDbGFzc05hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlX2ljb24gJiYgLyogQF9fUFVSRV9fICovIGpzeDMwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhZ2VJY29uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdEljb246IGRlZmF1bHRQYWdlSWNvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZTogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VIZWFkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gzMChcImgxXCIsIHsgY2xhc3NOYW1lOiBcIm5vdGlvbi10aXRsZVwiLCBjaGlsZHJlbjogcGFnZVRpdGxlICE9IG51bGwgPyBwYWdlVGl0bGUgOiAvKiBAX19QVVJFX18gKi8ganN4MzAoVGV4dCwgeyB2YWx1ZTogcHJvcGVydGllcyA9PSBudWxsID8gdm9pZCAwIDogcHJvcGVydGllcy50aXRsZSwgYmxvY2sgfSkgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIChibG9jay50eXBlID09PSBcImNvbGxlY3Rpb25fdmlld19wYWdlXCIgfHwgYmxvY2sudHlwZSA9PT0gXCJwYWdlXCIgJiYgYmxvY2sucGFyZW50X3RhYmxlID09PSBcImNvbGxlY3Rpb25cIikgJiYgLyogQF9fUFVSRV9fICovIGpzeDMwKGNvbXBvbmVudHMuQ29sbGVjdGlvbiwgeyBibG9jaywgY3R4OiBjdHgyIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jay50eXBlICE9PSBcImNvbGxlY3Rpb25fdmlld19wYWdlXCIgJiYgLyogQF9fUFVSRV9fICovIGpzeHMxNChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY3MoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibm90aW9uLXBhZ2UtY29udGVudFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNBc2lkZSAmJiBcIm5vdGlvbi1wYWdlLWNvbnRlbnQtaGFzLWFzaWRlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc1RvYyAmJiBcIm5vdGlvbi1wYWdlLWNvbnRlbnQtaGFzLXRvY1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDMwKFwiYXJ0aWNsZVwiLCB7IGNsYXNzTmFtZTogXCJub3Rpb24tcGFnZS1jb250ZW50LWlubmVyXCIsIGNoaWxkcmVuIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNBc2lkZSAmJiAvKiBAX19QVVJFX18gKi8ganN4MzAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFnZUFzaWRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVNlY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRBY3RpdmVTZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzVG9jLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQXNpZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlQXNpZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VGb290ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIGZvb3RlclxuICAgICAgICAgICAgICAgICAgXSB9KVxuICAgICAgICAgICAgICAgIF0gfSlcbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzMTQoXG4gICAgICAgICAgICBcIm1haW5cIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjcyhcbiAgICAgICAgICAgICAgICBcIm5vdGlvblwiLFxuICAgICAgICAgICAgICAgIGRhcmtNb2RlID8gXCJkYXJrLW1vZGVcIiA6IFwibGlnaHQtbW9kZVwiLFxuICAgICAgICAgICAgICAgIFwibm90aW9uLXBhZ2VcIixcbiAgICAgICAgICAgICAgICBwYWdlX2Z1bGxfd2lkdGggJiYgXCJub3Rpb24tZnVsbC13aWR0aFwiLFxuICAgICAgICAgICAgICAgIHBhZ2Vfc21hbGxfdGV4dCAmJiBcIm5vdGlvbi1zbWFsbC10ZXh0XCIsXG4gICAgICAgICAgICAgICAgYmxvY2tJZCxcbiAgICAgICAgICAgICAgICBjbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgYm9keUNsYXNzTmFtZVxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gzMChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJub3Rpb24tdmlld3BvcnRcIiB9KSxcbiAgICAgICAgICAgICAgICBwYWdlSGVhZGVyLFxuICAgICAgICAgICAgICAgIChibG9jay50eXBlID09PSBcImNvbGxlY3Rpb25fdmlld19wYWdlXCIgfHwgYmxvY2sudHlwZSA9PT0gXCJwYWdlXCIgJiYgYmxvY2sucGFyZW50X3RhYmxlID09PSBcImNvbGxlY3Rpb25cIikgJiYgLyogQF9fUFVSRV9fICovIGpzeDMwKGNvbXBvbmVudHMuQ29sbGVjdGlvbiwgeyBibG9jaywgY3R4OiBjdHgyIH0pLFxuICAgICAgICAgICAgICAgIGJsb2NrLnR5cGUgIT09IFwiY29sbGVjdGlvbl92aWV3X3BhZ2VcIiAmJiBjaGlsZHJlbixcbiAgICAgICAgICAgICAgICBwYWdlRm9vdGVyXG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBibG9ja0NvbG9yID0gKF9kID0gYmxvY2suZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX2QuYmxvY2tfY29sb3I7XG4gICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MzAoXG4gICAgICAgICAgY29tcG9uZW50cy5QYWdlTGluayxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjbGFzc05hbWU6IGNzKFxuICAgICAgICAgICAgICBcIm5vdGlvbi1wYWdlLWxpbmtcIixcbiAgICAgICAgICAgICAgYmxvY2tDb2xvciAmJiBgbm90aW9uLSR7YmxvY2tDb2xvcn1gLFxuICAgICAgICAgICAgICBibG9ja0lkXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgaHJlZjogbWFwUGFnZVVybChibG9jay5pZCksXG4gICAgICAgICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDMwKFBhZ2VUaXRsZSwgeyBibG9jayB9KVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICBjYXNlIFwiaGVhZGVyXCI6XG4gICAgLy8gZmFsbHRocm91Z2hcbiAgICBjYXNlIFwic3ViX2hlYWRlclwiOlxuICAgIC8vIGZhbGx0aHJvdWdoXG4gICAgY2FzZSBcInN1Yl9zdWJfaGVhZGVyXCI6IHtcbiAgICAgIGlmICghYmxvY2sucHJvcGVydGllcykgcmV0dXJuIG51bGw7XG4gICAgICBjb25zdCBibG9ja0NvbG9yID0gKF9lID0gYmxvY2suZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX2UuYmxvY2tfY29sb3I7XG4gICAgICBjb25zdCBpZCA9IHV1aWRUb0lkMihibG9jay5pZCk7XG4gICAgICBjb25zdCB0aXRsZSA9IGdldFRleHRDb250ZW50MihibG9jay5wcm9wZXJ0aWVzLnRpdGxlKSB8fCBgTm90aW9uIEhlYWRlciAke2lkfWA7XG4gICAgICBsZXQgaW5kZW50TGV2ZWwgPSB0b2NJbmRlbnRMZXZlbENhY2hlW2Jsb2NrLmlkXTtcbiAgICAgIGxldCBpbmRlbnRMZXZlbENsYXNzO1xuICAgICAgaWYgKGluZGVudExldmVsID09PSB2b2lkIDApIHtcbiAgICAgICAgY29uc3QgcGFnZSA9IGdldEJsb2NrUGFyZW50UGFnZTIoYmxvY2ssIHJlY29yZE1hcCk7XG4gICAgICAgIGlmIChwYWdlKSB7XG4gICAgICAgICAgY29uc3QgdG9jID0gZ2V0UGFnZVRhYmxlT2ZDb250ZW50cyhwYWdlLCByZWNvcmRNYXApO1xuICAgICAgICAgIGNvbnN0IHRvY0l0ZW0gPSB0b2MuZmluZCgodG9jSXRlbTIpID0+IHRvY0l0ZW0yLmlkID09PSBibG9jay5pZCk7XG4gICAgICAgICAgaWYgKHRvY0l0ZW0pIHtcbiAgICAgICAgICAgIGluZGVudExldmVsID0gdG9jSXRlbS5pbmRlbnRMZXZlbDtcbiAgICAgICAgICAgIHRvY0luZGVudExldmVsQ2FjaGVbYmxvY2suaWRdID0gaW5kZW50TGV2ZWw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaW5kZW50TGV2ZWwgIT09IHZvaWQgMCkge1xuICAgICAgICBpbmRlbnRMZXZlbENsYXNzID0gYG5vdGlvbi1oLWluZGVudC0ke2luZGVudExldmVsfWA7XG4gICAgICB9XG4gICAgICBjb25zdCBpc0gxID0gYmxvY2sudHlwZSA9PT0gXCJoZWFkZXJcIjtcbiAgICAgIGNvbnN0IGlzSDIgPSBibG9jay50eXBlID09PSBcInN1Yl9oZWFkZXJcIjtcbiAgICAgIGNvbnN0IGlzSDMgPSBibG9jay50eXBlID09PSBcInN1Yl9zdWJfaGVhZGVyXCI7XG4gICAgICBjb25zdCBjbGFzc05hbWVTdHIgPSBjcyhcbiAgICAgICAgaXNIMSAmJiBcIm5vdGlvbi1oIG5vdGlvbi1oMVwiLFxuICAgICAgICBpc0gyICYmIFwibm90aW9uLWggbm90aW9uLWgyXCIsXG4gICAgICAgIGlzSDMgJiYgXCJub3Rpb24taCBub3Rpb24taDNcIixcbiAgICAgICAgYmxvY2tDb2xvciAmJiBgbm90aW9uLSR7YmxvY2tDb2xvcn1gLFxuICAgICAgICBpbmRlbnRMZXZlbENsYXNzLFxuICAgICAgICBibG9ja0lkXG4gICAgICApO1xuICAgICAgY29uc3QgaW5uZXJIZWFkZXIgPSAvKiBAX19QVVJFX18gKi8ganN4czE0KFwic3BhblwiLCB7IGNoaWxkcmVuOiBbXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gzMChcImRpdlwiLCB7IGlkLCBjbGFzc05hbWU6IFwibm90aW9uLWhlYWRlci1hbmNob3JcIiB9KSxcbiAgICAgICAgISgoX2YgPSBibG9jay5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfZi50b2dnbGVhYmxlKSAmJiAvKiBAX19QVVJFX18gKi8ganN4MzAoXCJhXCIsIHsgY2xhc3NOYW1lOiBcIm5vdGlvbi1oYXNoLWxpbmtcIiwgaHJlZjogYCMke2lkfWAsIHRpdGxlLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDMwKExpbmtJY29uLCB7fSkgfSksXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gzMChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLWgtdGl0bGVcIiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gzMChUZXh0LCB7IHZhbHVlOiBibG9jay5wcm9wZXJ0aWVzLnRpdGxlLCBibG9jayB9KSB9KVxuICAgICAgXSB9KTtcbiAgICAgIGxldCBoZWFkZXJCbG9jayA9IG51bGw7XG4gICAgICBpZiAoaXNIMSkge1xuICAgICAgICBoZWFkZXJCbG9jayA9IC8qIEBfX1BVUkVfXyAqLyBqc3gzMChcImgyXCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVTdHIsIFwiZGF0YS1pZFwiOiBpZCwgY2hpbGRyZW46IGlubmVySGVhZGVyIH0pO1xuICAgICAgfSBlbHNlIGlmIChpc0gyKSB7XG4gICAgICAgIGhlYWRlckJsb2NrID0gLyogQF9fUFVSRV9fICovIGpzeDMwKFwiaDNcIiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZVN0ciwgXCJkYXRhLWlkXCI6IGlkLCBjaGlsZHJlbjogaW5uZXJIZWFkZXIgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBoZWFkZXJCbG9jayA9IC8qIEBfX1BVUkVfXyAqLyBqc3gzMChcImg0XCIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVTdHIsIFwiZGF0YS1pZFwiOiBpZCwgY2hpbGRyZW46IGlubmVySGVhZGVyIH0pO1xuICAgICAgfVxuICAgICAgaWYgKChfZyA9IGJsb2NrLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9nLnRvZ2dsZWFibGUpIHtcbiAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hzMTQoXCJkZXRhaWxzXCIsIHsgY2xhc3NOYW1lOiBjcyhcIm5vdGlvbi10b2dnbGVcIiwgYmxvY2tJZCksIGNoaWxkcmVuOiBbXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDMwKFwic3VtbWFyeVwiLCB7IGNoaWxkcmVuOiBoZWFkZXJCbG9jayB9KSxcbiAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MzAoXCJkaXZcIiwgeyBjaGlsZHJlbiB9KVxuICAgICAgICBdIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGhlYWRlckJsb2NrO1xuICAgICAgfVxuICAgIH1cbiAgICBjYXNlIFwiZGl2aWRlclwiOlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gzMChcImhyXCIsIHsgY2xhc3NOYW1lOiBjcyhcIm5vdGlvbi1oclwiLCBibG9ja0lkKSB9KTtcbiAgICBjYXNlIFwidGV4dFwiOiB7XG4gICAgICBpZiAoIWJsb2NrLnByb3BlcnRpZXMgJiYgISgoX2ggPSBibG9jay5jb250ZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2gubGVuZ3RoKSkge1xuICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDMwKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjcyhcIm5vdGlvbi1ibGFua1wiLCBibG9ja0lkKSwgY2hpbGRyZW46IFwiXFx4QTBcIiB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJsb2NrQ29sb3IgPSAoX2kgPSBibG9jay5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfaS5ibG9ja19jb2xvcjtcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4czE0KFxuICAgICAgICBcImRpdlwiLFxuICAgICAgICB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBjcyhcbiAgICAgICAgICAgIFwibm90aW9uLXRleHRcIixcbiAgICAgICAgICAgIGJsb2NrQ29sb3IgJiYgYG5vdGlvbi0ke2Jsb2NrQ29sb3J9YCxcbiAgICAgICAgICAgIGJsb2NrSWRcbiAgICAgICAgICApLFxuICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAoKF9qID0gYmxvY2sucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9qLnRpdGxlKSAmJiAvKiBAX19QVVJFX18gKi8ganN4MzAoVGV4dCwgeyB2YWx1ZTogYmxvY2sucHJvcGVydGllcy50aXRsZSwgYmxvY2sgfSksXG4gICAgICAgICAgICBjaGlsZHJlbiAmJiAvKiBAX19QVVJFX18gKi8ganN4MzAoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLXRleHQtY2hpbGRyZW5cIiwgY2hpbGRyZW4gfSlcbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICAgIGNhc2UgXCJidWxsZXRlZF9saXN0XCI6XG4gICAgLy8gZmFsbHRocm91Z2hcbiAgICBjYXNlIFwibnVtYmVyZWRfbGlzdFwiOiB7XG4gICAgICBjb25zdCB3cmFwTGlzdCA9IChjb250ZW50LCBzdGFydDIpID0+IGJsb2NrLnR5cGUgPT09IFwiYnVsbGV0ZWRfbGlzdFwiID8gLyogQF9fUFVSRV9fICovIGpzeDMwKFwidWxcIiwgeyBjbGFzc05hbWU6IGNzKFwibm90aW9uLWxpc3RcIiwgXCJub3Rpb24tbGlzdC1kaXNjXCIsIGJsb2NrSWQpLCBjaGlsZHJlbjogY29udGVudCB9KSA6IC8qIEBfX1BVUkVfXyAqLyBqc3gzMChcbiAgICAgICAgXCJvbFwiLFxuICAgICAgICB7XG4gICAgICAgICAgc3RhcnQ6IHN0YXJ0MixcbiAgICAgICAgICBjbGFzc05hbWU6IGNzKFwibm90aW9uLWxpc3RcIiwgXCJub3Rpb24tbGlzdC1udW1iZXJlZFwiLCBibG9ja0lkKSxcbiAgICAgICAgICBzdHlsZTogYmxvY2sudHlwZSA9PT0gXCJudW1iZXJlZF9saXN0XCIgPyB7XG4gICAgICAgICAgICBsaXN0U3R5bGVUeXBlOiBnZXRMaXN0U3R5bGUoXG4gICAgICAgICAgICAgIGdldExpc3ROZXN0aW5nTGV2ZWwoYmxvY2suaWQsIHJlY29yZE1hcC5ibG9jaylcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9IDogdm9pZCAwLFxuICAgICAgICAgIGNoaWxkcmVuOiBjb250ZW50XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBsZXQgb3V0cHV0ID0gbnVsbDtcbiAgICAgIGNvbnN0IGlzVG9wTGV2ZWwgPSBibG9jay50eXBlICE9PSAoKF9sID0gKF9rID0gcmVjb3JkTWFwLmJsb2NrW2Jsb2NrLnBhcmVudF9pZF0pID09IG51bGwgPyB2b2lkIDAgOiBfay52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9sLnR5cGUpO1xuICAgICAgY29uc3Qgc3RhcnQgPSBnZXRMaXN0TnVtYmVyKGJsb2NrLmlkLCByZWNvcmRNYXAuYmxvY2spO1xuICAgICAgaWYgKGJsb2NrLmNvbnRlbnQpIHtcbiAgICAgICAgY29uc3QgbGlzdEl0ZW0gPSBibG9jay5wcm9wZXJ0aWVzID8gLyogQF9fUFVSRV9fICovIGpzeDMwKFwibGlcIiwgeyBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDMwKFRleHQsIHsgdmFsdWU6IGJsb2NrLnByb3BlcnRpZXMudGl0bGUsIGJsb2NrIH0pIH0pIDogbnVsbDtcbiAgICAgICAgaWYgKGJsb2NrLnR5cGUgPT09IFwiYnVsbGV0ZWRfbGlzdFwiKSB7XG4gICAgICAgICAgb3V0cHV0ID0gLyogQF9fUFVSRV9fICovIGpzeHMxNChGcmFnbWVudDYsIHsgY2hpbGRyZW46IFtcbiAgICAgICAgICAgIGxpc3RJdGVtLFxuICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDMwKFwidWxcIiwgeyBjbGFzc05hbWU6IGNzKFwibm90aW9uLWxpc3RcIiwgXCJub3Rpb24tbGlzdC1kaXNjXCIsIGJsb2NrSWQpLCBjaGlsZHJlbiB9KVxuICAgICAgICAgIF0gfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgbmVzdGluZ0xldmVsID0gZ2V0TGlzdE5lc3RpbmdMZXZlbChibG9jay5pZCwgcmVjb3JkTWFwLmJsb2NrKTtcbiAgICAgICAgICBvdXRwdXQgPSAvKiBAX19QVVJFX18gKi8ganN4czE0KEZyYWdtZW50NiwgeyBjaGlsZHJlbjogW1xuICAgICAgICAgICAgbGlzdEl0ZW0sXG4gICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MzAoXG4gICAgICAgICAgICAgIFwib2xcIixcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY3MoXCJub3Rpb24tbGlzdFwiLCBcIm5vdGlvbi1saXN0LW51bWJlcmVkXCIsIGJsb2NrSWQpLFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICBsaXN0U3R5bGVUeXBlOiBnZXRMaXN0U3R5bGUobmVzdGluZ0xldmVsICsgMSlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICBdIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvdXRwdXQgPSBibG9jay5wcm9wZXJ0aWVzID8gLyogQF9fUFVSRV9fICovIGpzeDMwKFwibGlcIiwgeyBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDMwKFRleHQsIHsgdmFsdWU6IGJsb2NrLnByb3BlcnRpZXMudGl0bGUsIGJsb2NrIH0pIH0pIDogbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpc1RvcExldmVsID8gd3JhcExpc3Qob3V0cHV0LCBzdGFydCkgOiBvdXRwdXQ7XG4gICAgfVxuICAgIGNhc2UgXCJlbWJlZFwiOlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gzMChjb21wb25lbnRzLkVtYmVkLCB7IGJsb2NrSWQsIGJsb2NrIH0pO1xuICAgIGNhc2UgXCJyZXBsaXRcIjpcbiAgICAvLyBmYWxsdGhyb3VnaFxuICAgIGNhc2UgXCJ0d2VldFwiOlxuICAgIC8vIGZhbGx0aHJvdWdoXG4gICAgY2FzZSBcIm1hcHNcIjpcbiAgICAvLyBmYWxsdGhyb3VnaFxuICAgIGNhc2UgXCJwZGZcIjpcbiAgICAvLyBmYWxsdGhyb3VnaFxuICAgIGNhc2UgXCJmaWdtYVwiOlxuICAgIC8vIGZhbGx0aHJvdWdoXG4gICAgY2FzZSBcInR5cGVmb3JtXCI6XG4gICAgLy8gZmFsbHRocm91Z2hcbiAgICBjYXNlIFwiY29kZXBlblwiOlxuICAgIC8vIGZhbGx0aHJvdWdoXG4gICAgY2FzZSBcImV4Y2FsaWRyYXdcIjpcbiAgICAvLyBmYWxsdGhyb3VnaFxuICAgIGNhc2UgXCJpbWFnZVwiOlxuICAgIC8vIGZhbGx0aHJvdWdoXG4gICAgY2FzZSBcImdpc3RcIjpcbiAgICAvLyBmYWxsdGhyb3VnaFxuICAgIGNhc2UgXCJ2aWRlb1wiOlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gzMChBc3NldFdyYXBwZXIsIHsgYmxvY2tJZCwgYmxvY2sgfSk7XG4gICAgY2FzZSBcImRyaXZlXCI6IHtcbiAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSAoX20gPSBibG9jay5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfbS5kcml2ZV9wcm9wZXJ0aWVzO1xuICAgICAgaWYgKCFwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGlmICgoX24gPSBibG9jay5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfbi5kaXNwbGF5X3NvdXJjZSkge1xuICAgICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MzAoQXNzZXRXcmFwcGVyLCB7IGJsb2NrSWQsIGJsb2NrIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDMwKFxuICAgICAgICBHb29nbGVEcml2ZSxcbiAgICAgICAge1xuICAgICAgICAgIGJsb2NrLFxuICAgICAgICAgIGNsYXNzTmFtZTogYmxvY2tJZFxuICAgICAgICB9XG4gICAgICApO1xuICAgIH1cbiAgICBjYXNlIFwiYXVkaW9cIjpcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MzAoQXVkaW8sIHsgYmxvY2ssIGNsYXNzTmFtZTogYmxvY2tJZCB9KTtcbiAgICBjYXNlIFwiZmlsZVwiOlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gzMChGaWxlLCB7IGJsb2NrLCBjbGFzc05hbWU6IGJsb2NrSWQgfSk7XG4gICAgY2FzZSBcImVxdWF0aW9uXCI6XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDMwKFxuICAgICAgICBjb21wb25lbnRzLkVxdWF0aW9uLFxuICAgICAgICB7XG4gICAgICAgICAgYmxvY2ssXG4gICAgICAgICAgaW5saW5lOiBmYWxzZSxcbiAgICAgICAgICBjbGFzc05hbWU6IGJsb2NrSWRcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICBjYXNlIFwiY29kZVwiOlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gzMChjb21wb25lbnRzLkNvZGUsIHsgYmxvY2sgfSk7XG4gICAgY2FzZSBcImNvbHVtbl9saXN0XCI6XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDMwKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjcyhcIm5vdGlvbi1yb3dcIiwgYmxvY2tJZCksIGNoaWxkcmVuIH0pO1xuICAgIGNhc2UgXCJjb2x1bW5cIjoge1xuICAgICAgY29uc3Qgc3BhY2VyV2lkdGggPSBgbWluKDMycHgsIDR2dylgO1xuICAgICAgY29uc3QgcmF0aW8gPSAoKF9vID0gYmxvY2suZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX28uY29sdW1uX3JhdGlvKSB8fCAwLjU7XG4gICAgICBjb25zdCBwYXJlbnQgPSAoX3AgPSByZWNvcmRNYXAuYmxvY2tbYmxvY2sucGFyZW50X2lkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9wLnZhbHVlO1xuICAgICAgY29uc3QgY29sdW1ucyA9ICgoX3EgPSBwYXJlbnQgPT0gbnVsbCA/IHZvaWQgMCA6IHBhcmVudC5jb250ZW50KSA9PSBudWxsID8gdm9pZCAwIDogX3EubGVuZ3RoKSB8fCBNYXRoLm1heCgyLCBNYXRoLmNlaWwoMSAvIHJhdGlvKSk7XG4gICAgICBjb25zdCB3aWR0aCA9IGBjYWxjKCgxMDAlIC0gKCR7Y29sdW1ucyAtIDF9ICogJHtzcGFjZXJXaWR0aH0pKSAqICR7cmF0aW99KWA7XG4gICAgICBjb25zdCBzdHlsZSA9IHsgd2lkdGggfTtcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4czE0KEZyYWdtZW50NiwgeyBjaGlsZHJlbjogW1xuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MzAoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNzKFwibm90aW9uLWNvbHVtblwiLCBibG9ja0lkKSwgc3R5bGUsIGNoaWxkcmVuIH0pLFxuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MzAoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLXNwYWNlclwiIH0pXG4gICAgICBdIH0pO1xuICAgIH1cbiAgICBjYXNlIFwicXVvdGVcIjoge1xuICAgICAgaWYgKCFibG9jay5wcm9wZXJ0aWVzKSByZXR1cm4gbnVsbDtcbiAgICAgIGNvbnN0IGJsb2NrQ29sb3IgPSAoX3IgPSBibG9jay5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfci5ibG9ja19jb2xvcjtcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4czE0KFxuICAgICAgICBcImJsb2NrcXVvdGVcIixcbiAgICAgICAge1xuICAgICAgICAgIGNsYXNzTmFtZTogY3MoXG4gICAgICAgICAgICBcIm5vdGlvbi1xdW90ZVwiLFxuICAgICAgICAgICAgYmxvY2tDb2xvciAmJiBgbm90aW9uLSR7YmxvY2tDb2xvcn1gLFxuICAgICAgICAgICAgYmxvY2tJZFxuICAgICAgICAgICksXG4gICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gzMChcImRpdlwiLCB7IGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MzAoVGV4dCwgeyB2YWx1ZTogYmxvY2sucHJvcGVydGllcy50aXRsZSwgYmxvY2sgfSkgfSksXG4gICAgICAgICAgICBjaGlsZHJlblxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9XG4gICAgY2FzZSBcImNvbGxlY3Rpb25fdmlld1wiOlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gzMChjb21wb25lbnRzLkNvbGxlY3Rpb24sIHsgYmxvY2ssIGNsYXNzTmFtZTogYmxvY2tJZCwgY3R4OiBjdHgyIH0pO1xuICAgIGNhc2UgXCJjYWxsb3V0XCI6XG4gICAgICBpZiAoY29tcG9uZW50cy5DYWxsb3V0KSB7XG4gICAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MzAoY29tcG9uZW50cy5DYWxsb3V0LCB7IGJsb2NrLCBjbGFzc05hbWU6IGJsb2NrSWQgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeHMxNChcbiAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogY3MoXG4gICAgICAgICAgICAgIFwibm90aW9uLWNhbGxvdXRcIixcbiAgICAgICAgICAgICAgKChfcyA9IGJsb2NrLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9zLmJsb2NrX2NvbG9yKSAmJiBgbm90aW9uLSR7KF90ID0gYmxvY2suZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX3QuYmxvY2tfY29sb3J9X2NvYCxcbiAgICAgICAgICAgICAgYmxvY2tJZFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3gzMChQYWdlSWNvbiwgeyBibG9jaywgaGlkZURlZmF1bHRJY29uOiB0cnVlIH0pLFxuICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4czE0KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcIm5vdGlvbi1jYWxsb3V0LXRleHRcIiwgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MzAoVGV4dCwgeyB2YWx1ZTogKF91ID0gYmxvY2sucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF91LnRpdGxlLCBibG9jayB9KSxcbiAgICAgICAgICAgICAgICBjaGlsZHJlblxuICAgICAgICAgICAgICBdIH0pXG4gICAgICAgICAgICBdXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgIGNhc2UgXCJib29rbWFya1wiOiB7XG4gICAgICBpZiAoIWJsb2NrLnByb3BlcnRpZXMpIHJldHVybiBudWxsO1xuICAgICAgY29uc3QgbGluayA9IGJsb2NrLnByb3BlcnRpZXMubGluaztcbiAgICAgIGlmICghbGluayB8fCAhKChfdiA9IGxpbmtbMF0pID09IG51bGwgPyB2b2lkIDAgOiBfdlswXSkpIHJldHVybiBudWxsO1xuICAgICAgbGV0IHRpdGxlID0gZ2V0VGV4dENvbnRlbnQyKGJsb2NrLnByb3BlcnRpZXMudGl0bGUpO1xuICAgICAgaWYgKCF0aXRsZSkge1xuICAgICAgICB0aXRsZSA9IGdldFRleHRDb250ZW50MihsaW5rKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aXRsZSkge1xuICAgICAgICBpZiAodGl0bGUuc3RhcnRzV2l0aChcImh0dHBcIikpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh0aXRsZSk7XG4gICAgICAgICAgICB0aXRsZSA9IHVybC5ob3N0bmFtZTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDMwKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcIm5vdGlvbi1yb3dcIiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3hzMTQoXG4gICAgICAgIGNvbXBvbmVudHMuTGluayxcbiAgICAgICAge1xuICAgICAgICAgIHRhcmdldDogXCJfYmxhbmtcIixcbiAgICAgICAgICByZWw6IFwibm9vcGVuZXIgbm9yZWZlcnJlclwiLFxuICAgICAgICAgIGNsYXNzTmFtZTogY3MoXG4gICAgICAgICAgICBcIm5vdGlvbi1ib29rbWFya1wiLFxuICAgICAgICAgICAgKChfdyA9IGJsb2NrLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF93LmJsb2NrX2NvbG9yKSAmJiBgbm90aW9uLSR7YmxvY2suZm9ybWF0LmJsb2NrX2NvbG9yfWAsXG4gICAgICAgICAgICBibG9ja0lkXG4gICAgICAgICAgKSxcbiAgICAgICAgICBocmVmOiBsaW5rWzBdWzBdLFxuICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4czE0KFwiZGl2XCIsIHsgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgdGl0bGUgJiYgLyogQF9fUFVSRV9fICovIGpzeDMwKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcIm5vdGlvbi1ib29rbWFyay10aXRsZVwiLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDMwKFRleHQsIHsgdmFsdWU6IFtbdGl0bGVdXSwgYmxvY2sgfSkgfSksXG4gICAgICAgICAgICAgICgoX3ggPSBibG9jay5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX3guZGVzY3JpcHRpb24pICYmIC8qIEBfX1BVUkVfXyAqLyBqc3gzMChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJub3Rpb24tYm9va21hcmstZGVzY3JpcHRpb25cIiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gzMChUZXh0LCB7IHZhbHVlOiAoX3kgPSBibG9jay5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX3kuZGVzY3JpcHRpb24sIGJsb2NrIH0pIH0pLFxuICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4czE0KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcIm5vdGlvbi1ib29rbWFyay1saW5rXCIsIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgKChfeiA9IGJsb2NrLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF96LmJvb2ttYXJrX2ljb24pICYmIC8qIEBfX1BVUkVfXyAqLyBqc3gzMChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJub3Rpb24tYm9va21hcmstbGluay1pY29uXCIsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MzAoXG4gICAgICAgICAgICAgICAgICBMYXp5SW1hZ2UsXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHNyYzogbWFwSW1hZ2VVcmwoKF9BID0gYmxvY2suZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX0EuYm9va21hcmtfaWNvbiwgYmxvY2spLFxuICAgICAgICAgICAgICAgICAgICBhbHQ6IHRpdGxlXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKSB9KSxcbiAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MzAoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLWJvb2ttYXJrLWxpbmstdGV4dFwiLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDMwKFRleHQsIHsgdmFsdWU6IGxpbmssIGJsb2NrIH0pIH0pXG4gICAgICAgICAgICAgIF0gfSlcbiAgICAgICAgICAgIF0gfSksXG4gICAgICAgICAgICAoKF9CID0gYmxvY2suZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX0IuYm9va21hcmtfY292ZXIpICYmIC8qIEBfX1BVUkVfXyAqLyBqc3gzMChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJub3Rpb24tYm9va21hcmstaW1hZ2VcIiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gzMChcbiAgICAgICAgICAgICAgTGF6eUltYWdlLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc3JjOiBtYXBJbWFnZVVybCgoX0MgPSBibG9jay5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfQy5ib29rbWFya19jb3ZlciwgYmxvY2spLFxuICAgICAgICAgICAgICAgIGFsdDogZ2V0VGV4dENvbnRlbnQyKChfRCA9IGJsb2NrLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfRC50aXRsZSksXG4gICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgIG9iamVjdEZpdDogXCJjb3ZlclwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApIH0pXG4gICAgICAgICAgXVxuICAgICAgICB9XG4gICAgICApIH0pO1xuICAgIH1cbiAgICBjYXNlIFwidG9nZ2xlXCI6XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeHMxNChcImRldGFpbHNcIiwgeyBjbGFzc05hbWU6IGNzKFwibm90aW9uLXRvZ2dsZVwiLCBibG9ja0lkKSwgY2hpbGRyZW46IFtcbiAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDMwKFwic3VtbWFyeVwiLCB7IGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MzAoVGV4dCwgeyB2YWx1ZTogKF9FID0gYmxvY2sucHJvcGVydGllcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9FLnRpdGxlLCBibG9jayB9KSB9KSxcbiAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDMwKFwiZGl2XCIsIHsgY2hpbGRyZW4gfSlcbiAgICAgIF0gfSk7XG4gICAgY2FzZSBcInRhYmxlX29mX2NvbnRlbnRzXCI6IHtcbiAgICAgIGNvbnN0IHBhZ2UgPSBnZXRCbG9ja1BhcmVudFBhZ2UyKGJsb2NrLCByZWNvcmRNYXApO1xuICAgICAgaWYgKCFwYWdlKSByZXR1cm4gbnVsbDtcbiAgICAgIGNvbnN0IHRvYyA9IGdldFBhZ2VUYWJsZU9mQ29udGVudHMocGFnZSwgcmVjb3JkTWFwKTtcbiAgICAgIGNvbnN0IGJsb2NrQ29sb3IgPSAoX0YgPSBibG9jay5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfRi5ibG9ja19jb2xvcjtcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MzAoXG4gICAgICAgIFwiZGl2XCIsXG4gICAgICAgIHtcbiAgICAgICAgICBjbGFzc05hbWU6IGNzKFxuICAgICAgICAgICAgXCJub3Rpb24tdGFibGUtb2YtY29udGVudHNcIixcbiAgICAgICAgICAgIGJsb2NrQ29sb3IgJiYgYG5vdGlvbi0ke2Jsb2NrQ29sb3J9YCxcbiAgICAgICAgICAgIGJsb2NrSWRcbiAgICAgICAgICApLFxuICAgICAgICAgIGNoaWxkcmVuOiB0b2MubWFwKCh0b2NJdGVtKSA9PiAvKiBAX19QVVJFX18gKi8ganN4MzAoXG4gICAgICAgICAgICBcImFcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaHJlZjogYCMke3V1aWRUb0lkMih0b2NJdGVtLmlkKX1gLFxuICAgICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLXRhYmxlLW9mLWNvbnRlbnRzLWl0ZW1cIixcbiAgICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gzMChcbiAgICAgICAgICAgICAgICBcInNwYW5cIixcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwibm90aW9uLXRhYmxlLW9mLWNvbnRlbnRzLWl0ZW0tYm9keVwiLFxuICAgICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogXCJpbmxpbmUtYmxvY2tcIixcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luTGVmdDogdG9jSXRlbS5pbmRlbnRMZXZlbCAqIDI0XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IHRvY0l0ZW0udGV4dFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRvY0l0ZW0uaWRcbiAgICAgICAgICApKVxuICAgICAgICB9XG4gICAgICApO1xuICAgIH1cbiAgICBjYXNlIFwidG9fZG9cIjoge1xuICAgICAgY29uc3QgaXNDaGVja2VkID0gKChfSSA9IChfSCA9IChfRyA9IGJsb2NrLnByb3BlcnRpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfRy5jaGVja2VkKSA9PSBudWxsID8gdm9pZCAwIDogX0hbMF0pID09IG51bGwgPyB2b2lkIDAgOiBfSVswXSkgPT09IFwiWWVzXCI7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeHMxNChcImRpdlwiLCB7IGNsYXNzTmFtZTogY3MoXCJub3Rpb24tdG8tZG9cIiwgYmxvY2tJZCksIGNoaWxkcmVuOiBbXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hzMTQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLXRvLWRvLWl0ZW1cIiwgY2hpbGRyZW46IFtcbiAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MzAoY29tcG9uZW50cy5DaGVja2JveCwgeyBibG9ja0lkLCBpc0NoZWNrZWQgfSksXG4gICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeDMwKFxuICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjcyhcbiAgICAgICAgICAgICAgICBcIm5vdGlvbi10by1kby1ib2R5XCIsXG4gICAgICAgICAgICAgICAgaXNDaGVja2VkICYmIGBub3Rpb24tdG8tZG8tY2hlY2tlZGBcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3gzMChUZXh0LCB7IHZhbHVlOiAoX0ogPSBibG9jay5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX0oudGl0bGUsIGJsb2NrIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKVxuICAgICAgICBdIH0pLFxuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4MzAoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLXRvLWRvLWNoaWxkcmVuXCIsIGNoaWxkcmVuIH0pXG4gICAgICBdIH0pO1xuICAgIH1cbiAgICBjYXNlIFwidHJhbnNjbHVzaW9uX2NvbnRhaW5lclwiOlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gzMChcImRpdlwiLCB7IGNsYXNzTmFtZTogY3MoXCJub3Rpb24tc3luYy1ibG9ja1wiLCBibG9ja0lkKSwgY2hpbGRyZW4gfSk7XG4gICAgY2FzZSBcInRyYW5zY2x1c2lvbl9yZWZlcmVuY2VcIjpcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MzAoU3luY1BvaW50ZXJCbG9jaywgeyAuLi5wcm9wcywgbGV2ZWw6IGxldmVsICsgMSB9KTtcbiAgICBjYXNlIFwiYWxpYXNcIjoge1xuICAgICAgY29uc3QgYmxvY2tQb2ludGVySWQgPSAoX0wgPSAoX0sgPSBibG9jayA9PSBudWxsID8gdm9pZCAwIDogYmxvY2suZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX0suYWxpYXNfcG9pbnRlcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9MLmlkO1xuICAgICAgY29uc3QgbGlua2VkQmxvY2sgPSAoX00gPSByZWNvcmRNYXAuYmxvY2tbYmxvY2tQb2ludGVySWRdKSA9PSBudWxsID8gdm9pZCAwIDogX00udmFsdWU7XG4gICAgICBpZiAoIWxpbmtlZEJsb2NrKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdcImFsaWFzXCIgbWlzc2luZyBibG9jaycsIGJsb2NrUG9pbnRlcklkKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDMwKFxuICAgICAgICBjb21wb25lbnRzLlBhZ2VMaW5rLFxuICAgICAgICB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBjcyhcIm5vdGlvbi1wYWdlLWxpbmtcIiwgYmxvY2tQb2ludGVySWQpLFxuICAgICAgICAgIGhyZWY6IG1hcFBhZ2VVcmwoYmxvY2tQb2ludGVySWQpLFxuICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MzAoUGFnZVRpdGxlLCB7IGJsb2NrOiBsaW5rZWRCbG9jayB9KVxuICAgICAgICB9XG4gICAgICApO1xuICAgIH1cbiAgICBjYXNlIFwidGFibGVcIjpcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MzAoXCJ0YWJsZVwiLCB7IGNsYXNzTmFtZTogY3MoXCJub3Rpb24tc2ltcGxlLXRhYmxlXCIsIGJsb2NrSWQpLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDMwKFwidGJvZHlcIiwgeyBjaGlsZHJlbiB9KSB9KTtcbiAgICBjYXNlIFwidGFibGVfcm93XCI6IHtcbiAgICAgIGNvbnN0IHRhYmxlQmxvY2sgPSAoX04gPSByZWNvcmRNYXAuYmxvY2tbYmxvY2sucGFyZW50X2lkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9OLnZhbHVlO1xuICAgICAgY29uc3Qgb3JkZXIgPSAoX08gPSB0YWJsZUJsb2NrLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9PLnRhYmxlX2Jsb2NrX2NvbHVtbl9vcmRlcjtcbiAgICAgIGNvbnN0IGZvcm1hdE1hcCA9IChfUCA9IHRhYmxlQmxvY2suZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX1AudGFibGVfYmxvY2tfY29sdW1uX2Zvcm1hdDtcbiAgICAgIGNvbnN0IGJhY2tncm91bmRDb2xvciA9IChfUSA9IGJsb2NrLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9RLmJsb2NrX2NvbG9yO1xuICAgICAgY29uc3QgaGFzUm93SGVhZGVyID0gKChfUiA9IHRhYmxlQmxvY2suZm9ybWF0KSA9PSBudWxsID8gdm9pZCAwIDogX1IudGFibGVfYmxvY2tfY29sdW1uX2hlYWRlcikgPT09IHRydWU7XG4gICAgICBjb25zdCBoYXNDb2x1bW5IZWFkZXIgPSAoKF9TID0gdGFibGVCbG9jay5mb3JtYXQpID09IG51bGwgPyB2b2lkIDAgOiBfUy50YWJsZV9ibG9ja19yb3dfaGVhZGVyKSA9PT0gdHJ1ZTtcbiAgICAgIGNvbnN0IGlzSGVhZGVyUm93ID0gaGFzUm93SGVhZGVyICYmICgoX1QgPSB0YWJsZUJsb2NrLmNvbnRlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfVFswXSkgPT09IGJsb2NrLmlkO1xuICAgICAgaWYgKCF0YWJsZUJsb2NrIHx8ICFvcmRlcikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4MzAoXG4gICAgICAgIFwidHJcIixcbiAgICAgICAge1xuICAgICAgICAgIGNsYXNzTmFtZTogY3MoXG4gICAgICAgICAgICBcIm5vdGlvbi1zaW1wbGUtdGFibGUtcm93XCIsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgJiYgYG5vdGlvbi0ke2JhY2tncm91bmRDb2xvcn1gLFxuICAgICAgICAgICAgaXNIZWFkZXJSb3cgJiYgXCJub3Rpb24tc2ltcGxlLXRhYmxlLWhlYWRlci1yb3dcIixcbiAgICAgICAgICAgIGJsb2NrSWRcbiAgICAgICAgICApLFxuICAgICAgICAgIGNoaWxkcmVuOiBvcmRlci5tYXAoKGNvbHVtbiwgY29sdW1uSW5kZXgpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTIsIF9iMiwgX2MyO1xuICAgICAgICAgICAgY29uc3QgY29sb3IgPSAoX2EyID0gZm9ybWF0TWFwID09IG51bGwgPyB2b2lkIDAgOiBmb3JtYXRNYXBbY29sdW1uXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5jb2xvcjtcbiAgICAgICAgICAgIGNvbnN0IGlzSGVhZGVyQ29sdW1uID0gaGFzQ29sdW1uSGVhZGVyICYmIGNvbHVtbkluZGV4ID09PSAwO1xuICAgICAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gzMChcbiAgICAgICAgICAgICAgXCJ0ZFwiLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjcyhcbiAgICAgICAgICAgICAgICAgIGNvbG9yID8gYG5vdGlvbi0ke2NvbG9yfWAgOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgaXNIZWFkZXJDb2x1bW4gJiYgXCJub3Rpb24tc2ltcGxlLXRhYmxlLWhlYWRlci1jZWxsXCJcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICB3aWR0aDogKChfYjIgPSBmb3JtYXRNYXAgPT0gbnVsbCA/IHZvaWQgMCA6IGZvcm1hdE1hcFtjb2x1bW5dKSA9PSBudWxsID8gdm9pZCAwIDogX2IyLndpZHRoKSB8fCAxMjBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MzAoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibm90aW9uLXNpbXBsZS10YWJsZS1jZWxsXCIsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4MzAoXG4gICAgICAgICAgICAgICAgICBUZXh0LFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogKChfYzIgPSBibG9jay5wcm9wZXJ0aWVzKSA9PSBudWxsID8gdm9pZCAwIDogX2MyW2NvbHVtbl0pIHx8IFtbXCJcXHUzMTY0XCJdXSxcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApIH0pXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGNvbHVtblxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICApO1xuICAgIH1cbiAgICBjYXNlIFwiZXh0ZXJuYWxfb2JqZWN0X2luc3RhbmNlXCI6XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDMwKEVPSSwgeyBibG9jaywgY2xhc3NOYW1lOiBibG9ja0lkIH0pO1xuICAgIGRlZmF1bHQ6XG4gICAgICBpZiAodHJ1ZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBcIlVuc3VwcG9ydGVkIGJsb2NrIHR5cGUgXCIgKyBibG9jay50eXBlLFxuICAgICAgICAgIEpTT04uc3RyaW5naWZ5KGJsb2NrLCBudWxsLCAyKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gzMChcImRpdlwiLCB7fSk7XG4gIH1cbn1cblxuLy8gc3JjL3JlbmRlcmVyLnRzeFxuaW1wb3J0IHsganN4IGFzIGpzeDMxIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5mdW5jdGlvbiBOb3Rpb25SZW5kZXJlcih7XG4gIGNvbXBvbmVudHMsXG4gIHJlY29yZE1hcCxcbiAgbWFwUGFnZVVybCxcbiAgbWFwSW1hZ2VVcmwsXG4gIHNlYXJjaE5vdGlvbixcbiAgaXNTaG93aW5nU2VhcmNoLFxuICBvbkhpZGVTZWFyY2gsXG4gIGZ1bGxQYWdlLFxuICByb290UGFnZUlkLFxuICByb290RG9tYWluLFxuICBkYXJrTW9kZSxcbiAgcHJldmlld0ltYWdlcyxcbiAgZm9yY2VDdXN0b21JbWFnZXMsXG4gIHNob3dDb2xsZWN0aW9uVmlld0Ryb3Bkb3duLFxuICBsaW5rVGFibGVUaXRsZVByb3BlcnRpZXMsXG4gIGlzTGlua0NvbGxlY3Rpb25Ub1VybFByb3BlcnR5LFxuICBpc0ltYWdlWm9vbWFibGUgPSB0cnVlLFxuICBzaG93VGFibGVPZkNvbnRlbnRzLFxuICBtaW5UYWJsZU9mQ29udGVudHNJdGVtcyxcbiAgZGVmYXVsdFBhZ2VJY29uLFxuICBkZWZhdWx0UGFnZUNvdmVyLFxuICBkZWZhdWx0UGFnZUNvdmVyUG9zaXRpb24sXG4gIC4uLnJlc3Rcbn0pIHtcbiAgY29uc3Qgem9vbSA9IFJlYWN0MjAudXNlTWVtbyhcbiAgICAoKSA9PiAhIWdsb2JhbFRoaXMud2luZG93ICYmIG1lZGl1bVpvb20oe1xuICAgICAgYmFja2dyb3VuZDogXCJyZ2JhKDAsIDAsIDAsIDAuOClcIixcbiAgICAgIG1pblpvb21TY2FsZTogMixcbiAgICAgIG1hcmdpbjogZ2V0TWVkaXVtWm9vbU1hcmdpbigpXG4gICAgfSksXG4gICAgW11cbiAgKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3gzMShcbiAgICBOb3Rpb25Db250ZXh0UHJvdmlkZXIsXG4gICAge1xuICAgICAgY29tcG9uZW50cyxcbiAgICAgIHJlY29yZE1hcCxcbiAgICAgIG1hcFBhZ2VVcmwsXG4gICAgICBtYXBJbWFnZVVybCxcbiAgICAgIHNlYXJjaE5vdGlvbixcbiAgICAgIGlzU2hvd2luZ1NlYXJjaCxcbiAgICAgIG9uSGlkZVNlYXJjaCxcbiAgICAgIGZ1bGxQYWdlLFxuICAgICAgcm9vdFBhZ2VJZCxcbiAgICAgIHJvb3REb21haW4sXG4gICAgICBkYXJrTW9kZSxcbiAgICAgIHByZXZpZXdJbWFnZXMsXG4gICAgICBmb3JjZUN1c3RvbUltYWdlcyxcbiAgICAgIHNob3dDb2xsZWN0aW9uVmlld0Ryb3Bkb3duLFxuICAgICAgbGlua1RhYmxlVGl0bGVQcm9wZXJ0aWVzLFxuICAgICAgaXNMaW5rQ29sbGVjdGlvblRvVXJsUHJvcGVydHksXG4gICAgICBzaG93VGFibGVPZkNvbnRlbnRzLFxuICAgICAgbWluVGFibGVPZkNvbnRlbnRzSXRlbXMsXG4gICAgICBkZWZhdWx0UGFnZUljb24sXG4gICAgICBkZWZhdWx0UGFnZUNvdmVyLFxuICAgICAgZGVmYXVsdFBhZ2VDb3ZlclBvc2l0aW9uLFxuICAgICAgem9vbTogaXNJbWFnZVpvb21hYmxlID8gem9vbSA6IG51bGwsXG4gICAgICBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeDMxKE5vdGlvbkJsb2NrUmVuZGVyZXIsIHsgLi4ucmVzdCB9KVxuICAgIH1cbiAgKTtcbn1cbmZ1bmN0aW9uIE5vdGlvbkJsb2NrUmVuZGVyZXIoe1xuICBsZXZlbCA9IDAsXG4gIGJsb2NrSWQsXG4gIC4uLnByb3BzXG59KSB7XG4gIHZhciBfYSwgX2I7XG4gIGNvbnN0IHsgcmVjb3JkTWFwIH0gPSB1c2VOb3Rpb25Db250ZXh0KCk7XG4gIGNvbnN0IGlkID0gYmxvY2tJZCB8fCBPYmplY3Qua2V5cyhyZWNvcmRNYXAuYmxvY2spWzBdO1xuICBjb25zdCBibG9jayA9IChfYSA9IHJlY29yZE1hcC5ibG9ja1tpZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYS52YWx1ZTtcbiAgaWYgKCFibG9jaykge1xuICAgIGlmICh0cnVlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJtaXNzaW5nIGJsb2NrXCIsIGJsb2NrSWQpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeDMxKEJsb2NrLCB7IGxldmVsLCBibG9jaywgLi4ucHJvcHMsIGNoaWxkcmVuOiAoX2IgPSBibG9jayA9PSBudWxsID8gdm9pZCAwIDogYmxvY2suY29udGVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLm1hcCgoY29udGVudEJsb2NrSWQpID0+IC8qIEBfX1BVUkVfXyAqLyBqc3gzMShcbiAgICBOb3Rpb25CbG9ja1JlbmRlcmVyLFxuICAgIHtcbiAgICAgIGJsb2NrSWQ6IGNvbnRlbnRCbG9ja0lkLFxuICAgICAgbGV2ZWw6IGxldmVsICsgMSxcbiAgICAgIC4uLnByb3BzXG4gICAgfSxcbiAgICBjb250ZW50QmxvY2tJZFxuICApKSB9LCBpZCk7XG59XG5mdW5jdGlvbiBnZXRNZWRpdW1ab29tTWFyZ2luKCkge1xuICBjb25zdCB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICBpZiAod2lkdGggPCA1MDApIHtcbiAgICByZXR1cm4gODtcbiAgfSBlbHNlIGlmICh3aWR0aCA8IDgwMCkge1xuICAgIHJldHVybiAyMDtcbiAgfSBlbHNlIGlmICh3aWR0aCA8IDEyODApIHtcbiAgICByZXR1cm4gMzA7XG4gIH0gZWxzZSBpZiAod2lkdGggPCAxNjAwKSB7XG4gICAgcmV0dXJuIDQwO1xuICB9IGVsc2UgaWYgKHdpZHRoIDwgMTkyMCkge1xuICAgIHJldHVybiA0ODtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gNzI7XG4gIH1cbn1cbmV4cG9ydCB7XG4gIEJyZWFkY3J1bWJzLFxuICBIZWFkZXIsXG4gIE5vdGlvbkNvbnRleHRDb25zdW1lcixcbiAgTm90aW9uQ29udGV4dFByb3ZpZGVyLFxuICBOb3Rpb25SZW5kZXJlcixcbiAgUGFnZUljb24sXG4gIFBhZ2VJY29uSW1wbCxcbiAgU2VhcmNoLFxuICBUZXh0LFxuICBjcyxcbiAgZHVtbXlMaW5rLFxuICBmb3JtYXREYXRlLFxuICBmb3JtYXROb3Rpb25EYXRlVGltZSxcbiAgZ2V0SGFzaEZyYWdtZW50VmFsdWUsXG4gIGdldExpc3ROZXN0aW5nTGV2ZWwsXG4gIGdldExpc3ROdW1iZXIsXG4gIGdldExpc3RTdHlsZSxcbiAgZ2V0VXJsUGFyYW1zLFxuICBnZXRZb3V0dWJlSWQsXG4gIGlzQnJvd3NlcixcbiAgaXNVcmwsXG4gIHVzZU5vdGlvbkNvbnRleHRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/../../packages/react-notion-x/build/index.js\n");

/***/ }),

/***/ "(pages-dir-node)/../../packages/react-notion-x/src/styles.css":
/*!****************************************************!*\
  !*** ../../packages/react-notion-x/src/styles.css ***!
  \****************************************************/
/***/ (() => {



/***/ }),

/***/ "(pages-dir-node)/./components/NotionPage.tsx":
/*!***********************************!*\
  !*** ./components/NotionPage.tsx ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NotionPage: () => (/* binding */ NotionPage)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/head */ \"(pages-dir-node)/../../node_modules/.pnpm/next@15.3.3_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/head.js\");\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_head__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var notion_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! notion-utils */ \"(pages-dir-node)/../../packages/notion-utils/build/index.js\");\n/* harmony import */ var react_notion_x__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-notion-x */ \"(pages-dir-node)/../../packages/react-notion-x/build/index.js\");\n\n\n\n\nfunction NotionPage({ recordMap, rootPageId }) {\n    if (!recordMap) {\n        return null;\n    }\n    const title = (0,notion_utils__WEBPACK_IMPORTED_MODULE_2__.getPageTitle)(recordMap);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_head__WEBPACK_IMPORTED_MODULE_1___default()), {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                        name: \"description\",\n                        content: \"React Notion X Minimal Demo\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\kudry\\\\Documents\\\\ReactProjects\\\\react-notion-x\\\\examples\\\\minimal\\\\components\\\\NotionPage.tsx\",\n                        lineNumber: 22,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"title\", {\n                        children: title\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\kudry\\\\Documents\\\\ReactProjects\\\\react-notion-x\\\\examples\\\\minimal\\\\components\\\\NotionPage.tsx\",\n                        lineNumber: 24,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\kudry\\\\Documents\\\\ReactProjects\\\\react-notion-x\\\\examples\\\\minimal\\\\components\\\\NotionPage.tsx\",\n                lineNumber: 21,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_notion_x__WEBPACK_IMPORTED_MODULE_3__.NotionRenderer, {\n                recordMap: recordMap,\n                fullPage: true,\n                darkMode: false,\n                rootPageId: rootPageId\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\kudry\\\\Documents\\\\ReactProjects\\\\react-notion-x\\\\examples\\\\minimal\\\\components\\\\NotionPage.tsx\",\n                lineNumber: 27,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvTm90aW9uUGFnZS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBNEI7QUFFZTtBQUNJO0FBRXhDLFNBQVNHLFdBQVcsRUFDekJDLFNBQVMsRUFDVEMsVUFBVSxFQUlYO0lBQ0MsSUFBSSxDQUFDRCxXQUFXO1FBQ2QsT0FBTztJQUNUO0lBRUEsTUFBTUUsUUFBUUwsMERBQVlBLENBQUNHO0lBRTNCLHFCQUNFOzswQkFDRSw4REFBQ0osa0RBQUlBOztrQ0FDSCw4REFBQ087d0JBQUtDLE1BQUs7d0JBQWNDLFNBQVE7Ozs7OztrQ0FFakMsOERBQUNIO2tDQUFPQTs7Ozs7Ozs7Ozs7OzBCQUdWLDhEQUFDSiwwREFBY0E7Z0JBQ2JFLFdBQVdBO2dCQUNYTSxVQUFVO2dCQUNWQyxVQUFVO2dCQUNWTixZQUFZQTs7Ozs7Ozs7QUFJcEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xca3VkcnlcXERvY3VtZW50c1xcUmVhY3RQcm9qZWN0c1xccmVhY3Qtbm90aW9uLXhcXGV4YW1wbGVzXFxtaW5pbWFsXFxjb21wb25lbnRzXFxOb3Rpb25QYWdlLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgSGVhZCBmcm9tICduZXh0L2hlYWQnXHJcbmltcG9ydCB7IHR5cGUgRXh0ZW5kZWRSZWNvcmRNYXAgfSBmcm9tICdub3Rpb24tdHlwZXMnXHJcbmltcG9ydCB7IGdldFBhZ2VUaXRsZSB9IGZyb20gJ25vdGlvbi11dGlscydcclxuaW1wb3J0IHsgTm90aW9uUmVuZGVyZXIgfSBmcm9tICdyZWFjdC1ub3Rpb24teCdcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBOb3Rpb25QYWdlKHtcclxuICByZWNvcmRNYXAsXHJcbiAgcm9vdFBhZ2VJZFxyXG59OiB7XHJcbiAgcmVjb3JkTWFwOiBFeHRlbmRlZFJlY29yZE1hcFxyXG4gIHJvb3RQYWdlSWQ/OiBzdHJpbmdcclxufSkge1xyXG4gIGlmICghcmVjb3JkTWFwKSB7XHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuXHJcbiAgY29uc3QgdGl0bGUgPSBnZXRQYWdlVGl0bGUocmVjb3JkTWFwKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPD5cclxuICAgICAgPEhlYWQ+XHJcbiAgICAgICAgPG1ldGEgbmFtZT0nZGVzY3JpcHRpb24nIGNvbnRlbnQ9J1JlYWN0IE5vdGlvbiBYIE1pbmltYWwgRGVtbycgLz5cclxuXHJcbiAgICAgICAgPHRpdGxlPnt0aXRsZX08L3RpdGxlPlxyXG4gICAgICA8L0hlYWQ+XHJcblxyXG4gICAgICA8Tm90aW9uUmVuZGVyZXJcclxuICAgICAgICByZWNvcmRNYXA9e3JlY29yZE1hcH1cclxuICAgICAgICBmdWxsUGFnZT17dHJ1ZX1cclxuICAgICAgICBkYXJrTW9kZT17ZmFsc2V9XHJcbiAgICAgICAgcm9vdFBhZ2VJZD17cm9vdFBhZ2VJZH1cclxuICAgICAgLz5cclxuICAgIDwvPlxyXG4gIClcclxufVxyXG4iXSwibmFtZXMiOlsiSGVhZCIsImdldFBhZ2VUaXRsZSIsIk5vdGlvblJlbmRlcmVyIiwiTm90aW9uUGFnZSIsInJlY29yZE1hcCIsInJvb3RQYWdlSWQiLCJ0aXRsZSIsIm1ldGEiLCJuYW1lIiwiY29udGVudCIsImZ1bGxQYWdlIiwiZGFya01vZGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/NotionPage.tsx\n");

/***/ }),

/***/ "(pages-dir-node)/./lib/config.ts":
/*!***********************!*\
  !*** ./lib/config.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isDev: () => (/* binding */ isDev),\n/* harmony export */   rootNotionPageId: () => (/* binding */ rootNotionPageId)\n/* harmony export */ });\n// TODO: change this to the notion ID of the page you want to test\nconst rootNotionPageId = '1e17f34a361a800f8cbdc18b4312959a';\nconst isDev =  true || 0;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2xpYi9jb25maWcudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxrRUFBa0U7QUFDM0QsTUFBTUEsbUJBQW1CLG1DQUFrQztBQUUzRCxNQUFNQyxRQUNYQyxLQUFzQyxJQUFJLEVBQXFCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGt1ZHJ5XFxEb2N1bWVudHNcXFJlYWN0UHJvamVjdHNcXHJlYWN0LW5vdGlvbi14XFxleGFtcGxlc1xcbWluaW1hbFxcbGliXFxjb25maWcudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVE9ETzogY2hhbmdlIHRoaXMgdG8gdGhlIG5vdGlvbiBJRCBvZiB0aGUgcGFnZSB5b3Ugd2FudCB0byB0ZXN0XHJcbmV4cG9ydCBjb25zdCByb290Tm90aW9uUGFnZUlkID0gJzFlMTdmMzRhMzYxYTgwMGY4Y2JkYzE4YjQzMTI5NTlhJ1xyXG5cclxuZXhwb3J0IGNvbnN0IGlzRGV2ID1cclxuICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyB8fCAhcHJvY2Vzcy5lbnYuTk9ERV9FTlZcclxuIl0sIm5hbWVzIjpbInJvb3ROb3Rpb25QYWdlSWQiLCJpc0RldiIsInByb2Nlc3MiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./lib/config.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./lib/notion.ts":
/*!***********************!*\
  !*** ./lib/notion.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var notion_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! notion-client */ \"(pages-dir-node)/../../packages/notion-client/build/index.js\");\n\nconst notion = new notion_client__WEBPACK_IMPORTED_MODULE_0__.NotionAPI();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (notion);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2xpYi9ub3Rpb24udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBeUM7QUFFekMsTUFBTUMsU0FBUyxJQUFJRCxvREFBU0E7QUFDNUIsaUVBQWVDLE1BQU1BLEVBQUEiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xca3VkcnlcXERvY3VtZW50c1xcUmVhY3RQcm9qZWN0c1xccmVhY3Qtbm90aW9uLXhcXGV4YW1wbGVzXFxtaW5pbWFsXFxsaWJcXG5vdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOb3Rpb25BUEkgfSBmcm9tICdub3Rpb24tY2xpZW50J1xyXG5cclxuY29uc3Qgbm90aW9uID0gbmV3IE5vdGlvbkFQSSgpXHJcbmV4cG9ydCBkZWZhdWx0IG5vdGlvblxyXG4iXSwibmFtZXMiOlsiTm90aW9uQVBJIiwibm90aW9uIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./lib/notion.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./pages/_app.tsx":
/*!************************!*\
  !*** ./pages/_app.tsx ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_notion_x_src_styles_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-notion-x/src/styles.css */ \"(pages-dir-node)/../../packages/react-notion-x/src/styles.css\");\n/* harmony import */ var react_notion_x_src_styles_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_notion_x_src_styles_css__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../styles/globals.css */ \"(pages-dir-node)/./styles/globals.css\");\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_styles_globals_css__WEBPACK_IMPORTED_MODULE_2__);\n// core styles shared by all of react-notion-x (required)\n\n\n\n// used for code syntax highlighting (optional)\n// import 'prismjs/themes/prism-tomorrow.css'\n// used for rendering equations (optional)\n// import 'katex/dist/katex.min.css'\nfunction MyApp({ Component, pageProps }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Component, {\n        ...pageProps\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\kudry\\\\Documents\\\\ReactProjects\\\\react-notion-x\\\\examples\\\\minimal\\\\pages\\\\_app.tsx\",\n        lineNumber: 12,\n        columnNumber: 10\n    }, this);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MyApp);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3BhZ2VzL19hcHAudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSx5REFBeUQ7O0FBQ25CO0FBQ1I7QUFFOUIsK0NBQStDO0FBQy9DLDZDQUE2QztBQUU3QywwQ0FBMEM7QUFDMUMsb0NBQW9DO0FBRXBDLFNBQVNBLE1BQU0sRUFBRUMsU0FBUyxFQUFFQyxTQUFTLEVBQU87SUFDMUMscUJBQU8sOERBQUNEO1FBQVcsR0FBR0MsU0FBUzs7Ozs7O0FBQ2pDO0FBRUEsaUVBQWVGLEtBQUtBLEVBQUEiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xca3VkcnlcXERvY3VtZW50c1xcUmVhY3RQcm9qZWN0c1xccmVhY3Qtbm90aW9uLXhcXGV4YW1wbGVzXFxtaW5pbWFsXFxwYWdlc1xcX2FwcC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gY29yZSBzdHlsZXMgc2hhcmVkIGJ5IGFsbCBvZiByZWFjdC1ub3Rpb24teCAocmVxdWlyZWQpXHJcbmltcG9ydCAncmVhY3Qtbm90aW9uLXgvc3JjL3N0eWxlcy5jc3MnXHJcbmltcG9ydCAnLi4vc3R5bGVzL2dsb2JhbHMuY3NzJ1xyXG5cclxuLy8gdXNlZCBmb3IgY29kZSBzeW50YXggaGlnaGxpZ2h0aW5nIChvcHRpb25hbClcclxuLy8gaW1wb3J0ICdwcmlzbWpzL3RoZW1lcy9wcmlzbS10b21vcnJvdy5jc3MnXHJcblxyXG4vLyB1c2VkIGZvciByZW5kZXJpbmcgZXF1YXRpb25zIChvcHRpb25hbClcclxuLy8gaW1wb3J0ICdrYXRleC9kaXN0L2thdGV4Lm1pbi5jc3MnXHJcblxyXG5mdW5jdGlvbiBNeUFwcCh7IENvbXBvbmVudCwgcGFnZVByb3BzIH06IGFueSkge1xyXG4gIHJldHVybiA8Q29tcG9uZW50IHsuLi5wYWdlUHJvcHN9IC8+XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IE15QXBwXHJcbiJdLCJuYW1lcyI6WyJNeUFwcCIsIkNvbXBvbmVudCIsInBhZ2VQcm9wcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./pages/_app.tsx\n");

/***/ }),

/***/ "(pages-dir-node)/./pages/_document.tsx":
/*!*****************************!*\
  !*** ./pages/_document.tsx ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ MyDocument)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_document__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/document */ \"(pages-dir-node)/../../node_modules/.pnpm/next@15.3.3_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/document.js\");\n/* harmony import */ var next_document__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_document__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass MyDocument extends (next_document__WEBPACK_IMPORTED_MODULE_1___default()) {\n    render() {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.Html, {\n            lang: \"en\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.Head, {}, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\kudry\\\\Documents\\\\ReactProjects\\\\react-notion-x\\\\examples\\\\minimal\\\\pages\\\\_document.tsx\",\n                    lineNumber: 7,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"body\", {\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.Main, {}, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\kudry\\\\Documents\\\\ReactProjects\\\\react-notion-x\\\\examples\\\\minimal\\\\pages\\\\_document.tsx\",\n                            lineNumber: 10,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.NextScript, {}, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\kudry\\\\Documents\\\\ReactProjects\\\\react-notion-x\\\\examples\\\\minimal\\\\pages\\\\_document.tsx\",\n                            lineNumber: 11,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\kudry\\\\Documents\\\\ReactProjects\\\\react-notion-x\\\\examples\\\\minimal\\\\pages\\\\_document.tsx\",\n                    lineNumber: 9,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\kudry\\\\Documents\\\\ReactProjects\\\\react-notion-x\\\\examples\\\\minimal\\\\pages\\\\_document.tsx\",\n            lineNumber: 6,\n            columnNumber: 7\n        }, this);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3BhZ2VzL19kb2N1bWVudC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXNFO0FBRXZELE1BQU1LLG1CQUFtQkwsc0RBQVFBO0lBQ3JDTSxTQUFTO1FBQ2hCLHFCQUNFLDhEQUFDSiwrQ0FBSUE7WUFBQ0ssTUFBSzs7OEJBQ1QsOERBQUNOLCtDQUFJQTs7Ozs7OEJBRUwsOERBQUNPOztzQ0FDQyw4REFBQ0wsK0NBQUlBOzs7OztzQ0FDTCw4REFBQ0MscURBQVVBOzs7Ozs7Ozs7Ozs7Ozs7OztJQUluQjtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGt1ZHJ5XFxEb2N1bWVudHNcXFJlYWN0UHJvamVjdHNcXHJlYWN0LW5vdGlvbi14XFxleGFtcGxlc1xcbWluaW1hbFxccGFnZXNcXF9kb2N1bWVudC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IERvY3VtZW50LCB7IEhlYWQsIEh0bWwsIE1haW4sIE5leHRTY3JpcHQgfSBmcm9tICduZXh0L2RvY3VtZW50J1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTXlEb2N1bWVudCBleHRlbmRzIERvY3VtZW50IHtcclxuICBvdmVycmlkZSByZW5kZXIoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8SHRtbCBsYW5nPSdlbic+XHJcbiAgICAgICAgPEhlYWQgLz5cclxuXHJcbiAgICAgICAgPGJvZHk+XHJcbiAgICAgICAgICA8TWFpbiAvPlxyXG4gICAgICAgICAgPE5leHRTY3JpcHQgLz5cclxuICAgICAgICA8L2JvZHk+XHJcbiAgICAgIDwvSHRtbD5cclxuICAgIClcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkRvY3VtZW50IiwiSGVhZCIsIkh0bWwiLCJNYWluIiwiTmV4dFNjcmlwdCIsIk15RG9jdW1lbnQiLCJyZW5kZXIiLCJsYW5nIiwiYm9keSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./pages/_document.tsx\n");

/***/ }),

/***/ "(pages-dir-node)/./pages/index.tsx":
/*!*************************!*\
  !*** ./pages/index.tsx ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Page),\n/* harmony export */   getStaticProps: () => (/* binding */ getStaticProps)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_NotionPage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/NotionPage */ \"(pages-dir-node)/./components/NotionPage.tsx\");\n/* harmony import */ var _lib_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/config */ \"(pages-dir-node)/./lib/config.ts\");\n/* harmony import */ var _lib_notion__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/notion */ \"(pages-dir-node)/./lib/notion.ts\");\n\n\n\n\nconst getStaticProps = async ()=>{\n    const pageId = _lib_config__WEBPACK_IMPORTED_MODULE_2__.rootNotionPageId;\n    const recordMap = await _lib_notion__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getPage(pageId);\n    return {\n        props: {\n            recordMap\n        },\n        revalidate: 10\n    };\n};\nfunction Page({ recordMap }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_NotionPage__WEBPACK_IMPORTED_MODULE_1__.NotionPage, {\n        recordMap: recordMap,\n        rootPageId: _lib_config__WEBPACK_IMPORTED_MODULE_2__.rootNotionPageId\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\kudry\\\\Documents\\\\ReactProjects\\\\react-notion-x\\\\examples\\\\minimal\\\\pages\\\\index.tsx\",\n        lineNumber: 20,\n        columnNumber: 10\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3BhZ2VzL2luZGV4LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUVxRDtBQUNMO0FBQ2Q7QUFFM0IsTUFBTUcsaUJBQWlCO0lBQzVCLE1BQU1DLFNBQVNILHlEQUFnQkE7SUFDL0IsTUFBTUksWUFBWSxNQUFNSCwyREFBYyxDQUFDRTtJQUV2QyxPQUFPO1FBQ0xHLE9BQU87WUFDTEY7UUFDRjtRQUNBRyxZQUFZO0lBQ2Q7QUFDRixFQUFDO0FBRWMsU0FBU0MsS0FBSyxFQUFFSixTQUFTLEVBQW9DO0lBQzFFLHFCQUFPLDhEQUFDTCw4REFBVUE7UUFBQ0ssV0FBV0E7UUFBV0ssWUFBWVQseURBQWdCQTs7Ozs7O0FBQ3ZFIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGt1ZHJ5XFxEb2N1bWVudHNcXFJlYWN0UHJvamVjdHNcXHJlYWN0LW5vdGlvbi14XFxleGFtcGxlc1xcbWluaW1hbFxccGFnZXNcXGluZGV4LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0eXBlIEV4dGVuZGVkUmVjb3JkTWFwIH0gZnJvbSAnbm90aW9uLXR5cGVzJ1xyXG5cclxuaW1wb3J0IHsgTm90aW9uUGFnZSB9IGZyb20gJy4uL2NvbXBvbmVudHMvTm90aW9uUGFnZSdcclxuaW1wb3J0IHsgcm9vdE5vdGlvblBhZ2VJZCB9IGZyb20gJy4uL2xpYi9jb25maWcnXHJcbmltcG9ydCBub3Rpb24gZnJvbSAnLi4vbGliL25vdGlvbidcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRTdGF0aWNQcm9wcyA9IGFzeW5jICgpID0+IHtcclxuICBjb25zdCBwYWdlSWQgPSByb290Tm90aW9uUGFnZUlkXHJcbiAgY29uc3QgcmVjb3JkTWFwID0gYXdhaXQgbm90aW9uLmdldFBhZ2UocGFnZUlkKVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgcHJvcHM6IHtcclxuICAgICAgcmVjb3JkTWFwXHJcbiAgICB9LFxyXG4gICAgcmV2YWxpZGF0ZTogMTBcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFBhZ2UoeyByZWNvcmRNYXAgfTogeyByZWNvcmRNYXA6IEV4dGVuZGVkUmVjb3JkTWFwIH0pIHtcclxuICByZXR1cm4gPE5vdGlvblBhZ2UgcmVjb3JkTWFwPXtyZWNvcmRNYXB9IHJvb3RQYWdlSWQ9e3Jvb3ROb3Rpb25QYWdlSWR9IC8+XHJcbn1cclxuIl0sIm5hbWVzIjpbIk5vdGlvblBhZ2UiLCJyb290Tm90aW9uUGFnZUlkIiwibm90aW9uIiwiZ2V0U3RhdGljUHJvcHMiLCJwYWdlSWQiLCJyZWNvcmRNYXAiLCJnZXRQYWdlIiwicHJvcHMiLCJyZXZhbGlkYXRlIiwiUGFnZSIsInJvb3RQYWdlSWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./pages/index.tsx\n");

/***/ }),

/***/ "(pages-dir-node)/./styles/globals.css":
/*!****************************!*\
  !*** ./styles/globals.css ***!
  \****************************/
/***/ (() => {



/***/ }),

/***/ "next/dist/compiled/next-server/pages.runtime.dev.js":
/*!**********************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages.runtime.dev.js" ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/pages.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("react");

/***/ }),

/***/ "react/jsx-dev-runtime":
/*!****************************************!*\
  !*** external "react/jsx-dev-runtime" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-dev-runtime");

/***/ }),

/***/ "react/jsx-runtime":
/*!************************************!*\
  !*** external "react/jsx-runtime" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-runtime");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@15.3.3_react-dom@19.1.0_react@19.1.0__react@19.1.0","vendor-chunks/@swc+helpers@0.5.15","vendor-chunks/ky@1.8.1","vendor-chunks/@babel+runtime@7.27.6","vendor-chunks/p-queue@8.1.0","vendor-chunks/react-image@4.1.0_@babel+ru_6fbc4a02b6848c0cca97fe2864b98fb7","vendor-chunks/react-hotkeys-hook@4.6.2_re_132c23ea08d1cf082479922b9f53a5dd","vendor-chunks/eventemitter3@5.0.1","vendor-chunks/p-timeout@6.1.4","vendor-chunks/p-map@7.0.3","vendor-chunks/normalize-url@8.0.2","vendor-chunks/mimic-function@5.0.1","vendor-chunks/memoize@10.1.0","vendor-chunks/is-url-superb@6.1.0","vendor-chunks/unionize@2.2.0","vendor-chunks/react-lazy-images@1.1.0_rea_8ee3c10bdf36427c94472c5e0f755fc1","vendor-chunks/react-intersection-observer@6.4.2_react@19.1.0","vendor-chunks/react-fast-compare@3.2.2","vendor-chunks/invariant@2.2.4","vendor-chunks/@fisch0920+medium-zoom@1.0.7"], () => (__webpack_exec__("(pages-dir-node)/../../node_modules/.pnpm/next@15.3.3_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F&preferredRegion=&absolutePagePath=.%2Fpages%5Cindex.tsx&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();